[{"data":1,"prerenderedAt":776},["ShallowReactive",2],{"/2025/06/self-fediverse-prepare/":3,"surround-/2025/06/self-fediverse-prepare":765},{"id":4,"title":5,"body":6,"categories":740,"date":742,"description":743,"draft":744,"extension":745,"image":746,"meta":747,"navigation":748,"path":749,"permalink":750,"readingTime":751,"recommend":756,"references":750,"seo":757,"sitemap":758,"stem":759,"tags":760,"type":750,"updated":763,"__hash__":764},"content/posts/2025/06/self-fediverse-prepare.md","自建一个 Fediverse 实例，我们需要准备什么？",{"type":7,"value":8,"toc":710},"minimark",[9,13,17,20,23,26,29,32,36,61,64,71,74,77,80,83,87,90,155,158,165,259,266,269,272,278,285,288,291,294,297,300,303,306,309,312,315,318,333,344,351,355,358,368,374,377,380,384,387,390,393,397,400,403,407,410,413,416,419,422,426,429,432,435,438,441,444,451,454,458,461,464,467,470,473,476,479,482,485,488,491,500,503,617,620,679,682,685,688],[10,11,12],"h2",{"id":12},"前言",[14,15,16],"p",{},"这几年，Fediverse（联邦宇宙）作为一种去中心化社交网络概念正逐渐流行。我们进入联邦宇宙的门槛并不高——最简单的方式就是在现有的某个实例上注册账户并开始交流。",[14,18,19],{},"然而，联邦宇宙的核心价值在于其去中心化的网络架构。许多用户选择加入联邦宇宙，正是因为希望摆脱中心化平台所带来的各种限制和问题。",[14,21,22],{},"但如果我们真正希望掌控自己的数据主权，自建实例无疑是最为理想的解决方案。",[14,24,25],{},"以 Misskey 或 Mastodon 等微博类服务为例，你可以建立一个小型实例，既可以邀请朋友共同使用，也可以仅作为仅个人使用的实例，整体灵活度还是相当高的。",[14,27,28],{},"从技术层面看，联邦宇宙中的大多数应用本质上仍是可直接访问的网络服务，因此我们可以沿用“建立网站”的思路来配置所需资源。那么，建立一个联邦宇宙实例，具体需要准备哪些东西呢？",[10,30,31],{"id":31},"域名",[33,34,35],"h3",{"id":35},"基本介绍",[14,37,38,39,43,44,47,48,56,57,60],{},"域名是实例的基本“身份”构成的一部分，相当于电子邮件中",[40,41,42],"code",{"code":42},"user@xxx.com","中的",[40,45,46],{"code":46},"@xxx.com","部分，比如我的自建实例账号是",[49,50,55],"a",{"href":51,"rel":52,"title":54},"https://circle.tkg3.top/@PaloMiku",[53],"nofollow","@PaloMiku","@PaloMiku@circle.tkg3.top","，那么后面的",[40,58,59],{"code":59},"tkg3.top","即代表了主域名。",[14,62,63],{},"没有域名和 HTTPS 安全的实例是无法进入联邦宇宙网络的，域名也代表了你的实例给别人的第一印象。",[14,65,66,67,70],{},"所以有一个短而好记或者好的寓意的域名其实很重要，但我们选择域名仍需一些门道，比如太短或者一些常见而热门的英语单词域名前缀常常被域名注册商标记为",[40,68,69],{"code":69},"Premium","而十分昂贵，同样也有一些域名后缀十分昂贵。",[33,72,73],{"id":73},"域名注册商",[14,75,76],{},"域名的注册审批是由域名的”注册局“控制的，但一般用户都是通过”域名注册商“来购买域名。",[14,78,79],{},"选择一个好的注册商能够更好的管理你的域名，比如他们可能具有更好的管理控制台或者更优惠的价格等。所以在选择注册局时还是有一些“门道”的。",[14,81,82],{},"首先对于一般用户来说，我们更建议使用“域名比价网站”来综合比对多个注册商的价格等，这是最简单的方式，但比价网站的数据库也不一定十分全面，更多的是为我们提供基本的参考。",[84,85,86],"h4",{"id":86},"比价网站",[14,88,89],{},"这里个人列举几个比价网站推荐：",[91,92,93],"card-list",{},[94,95,96,117,136],"ul",{},[97,98,99,100],"li",{},"TLD-LIST\n",[94,101,102,105,111,114],{},[97,103,104],{},"网址（中文版）：",[97,106,107],{},[49,108,109],{"href":109,"rel":110},"https://zh-hans.tld-list.com",[53],[97,112,113],{},"个人观点：",[97,115,116],{},"个人用过的感觉最好的域名比价网站，有着十分清晰的综合比价机制和更新较为迅速的数据库。",[97,118,119,120],{},"NameBeta\n",[94,121,122,125,131,133],{},[97,123,124],{},"网址（自动判断语言和货币）：",[97,126,127],{},[49,128,129],{"href":129,"rel":130},"https://namebeta.com",[53],[97,132,113],{},[97,134,135],{},"个人觉得它的移动端使用体验相对较好，他们也提供了 AI 域名生成器帮助选择域名。",[97,137,138,139],{},"哪煮米\n",[94,140,141,144,150,152],{},[97,142,143],{},"网址（默认中文）：",[97,145,146],{},[49,147,148],{"href":148,"rel":149},"https://www.nazhumi.com",[53],[97,151,113],{},[97,153,154],{},"应该是由国内作者维护更新的网站，相对来说对中国大陆地区的域名注册价格判断更为精准，但功能性和数据更新速度个人感觉均不如前两个。",[84,156,157],{"id":157},"海外注册商",[14,159,160,161,164],{},"当然个人观点来说，不建议选择",[40,162,163],{"code":163},"GoBuddy","这样黑历史和价格都一样高的注册商，个人目前使用过也比较推荐的有以下几个注册商：",[91,166,167],{},[94,168,169,191,213,237],{},[97,170,171,172],{},"Namesilo\n",[94,173,174,177,183,185,188],{},[97,175,176],{},"网址（无中文）：",[97,178,179],{},[49,180,181],{"href":181,"rel":182},"https://www.namesilo.com",[53],[97,184,113],{},[97,186,187],{},"这是我使用的第一家域名商，公司注册地在美国，也算比较老牌的注册商了。",[97,189,190],{},"他们常常以更为优惠的价格吸引用户，其平均价格相对其他域名注册商确实较低，但他们的后台管理不是很好用，虽然现在已经有所优化但仍较为繁琐，不过他们有着免费的配套服务，比如域名邮件转发，域名 DNS 解析和隐私等，个人跟他们的客服打过几次交道，感觉他们的客服服务态度等也十分不错。",[97,192,193,194],{},"Spaceship\n",[94,195,196,199,205,207,210],{},[97,197,198],{},"网址（有中文）:",[97,200,201],{},[49,202,203],{"href":203,"rel":204},"https://www.spaceship.com/zh",[53],[97,206,113],{},[97,208,209],{},"这是全球第二大域名注册商和顶级网络服务提供商 Namecheap 的 CEO 创立的新公司，成立于 2019 年。",[97,211,212],{},"这家最大优势是整体域名价格较低的同时还具备极其好用的后台设计，服务拼装化的感觉很有意思，也有简体中文支持，个人还是十分推荐这里的，也有免费的配套服务，比如域名 DNS 解析和隐私等。",[97,214,215,216],{},"Porkbun\n",[94,217,218,220,226,228,231,234],{},[97,219,176],{},[97,221,222],{},[49,223,224],{"href":224,"rel":225},"https://porkbun.com",[53],[97,227,113],{},[97,229,230],{},"也算是比较新兴的域名注册商，也是以域名价格相对较低而出名。",[97,232,233],{},"这家对于一些较为冷门的域名后缀可能有很优惠的价格，且每个月都会有定期活动，价格会十分优惠。但后台特别难用，无中文和纯文字 UI 对于新手来说简直是噩梦。",[97,235,236],{},"适合用来较低价格注册域名，然后转出去（Doge）",[97,238,239,240],{},"Dynadot\n",[94,241,242,245,251,253,256],{},[97,243,244],{},"网址（有中文）：",[97,246,247],{},[49,248,249],{"href":249,"rel":250},"https://www.dynadot.com/zh",[53],[97,252,113],{},[97,254,255],{},"在国内有子公司协助管理和代理，后台可以和 Spaceship 齐名的一样好用，这家日常平均价优势不是很大，但每年都有白送域名的同时还有着价格较为低廉的优惠促销活动。",[97,257,258],{},"个人推荐有活动的时候来看看，整体来说还是不错的。",[14,260,261,262,265],{},"同时",[40,263,264],{"code":264},"Cloudflare","也是一个相对不错的选择，价格较低，不过强制使用他家的 DNS 解析服务。",[84,267,268],{"id":268},"国内注册商",[14,270,271],{},"选择国内的域名注册商的用户可能更多是觉得更好支付（虽然上述四家海外域名注册商有支持支付宝和国区 PayPal 支付），或者更好管理等，当然价格其实也真的不是很高。",[273,274,275],"alert",{},[14,276,277],{},"国内的域名注册商可能有着相对严格的审核制度，且强制用户实名，请注意。",[14,279,280,281,284],{},"个人建议无论如何，都不建议选择",[40,282,283],{"code":283},"cn","域名，缺失隐私保护和安全管理。",[14,286,287],{},"国内并没有多少选择，比较主流的也就是阿里云，腾讯云，西部数码等这几个，我们还是看情况选吧。",[33,289,290],{"id":290},"域名解析服务",[14,292,293],{},"什么是域名解析？相信很多之前没有接触过网站建设的人不知道域名解析是什么，也不知道域名解析的作用是什么。",[14,295,296],{},"域名解析最为直观的解释就是：将域名转换为 IP 地址的过程。",[14,298,299],{},"好比你出国旅游有导游，或者打电话有电话本一样，他们帮助你找到服务器的 IP 地址，它就是这样辅助你的一个工具，也是域名配套服务重要的部分。",[14,301,302],{},"相对来说，个人建议优先选择海外的域名解析服务，比如主流的有 Cloudflare，HeNet 等。",[14,304,305],{},"基本上域名注册商都会提供 DNS 解析服务，质量也是不等，但不一定十分难用。",[10,307,308],{"id":308},"服务器",[33,310,35],{"id":311},"基本介绍-1",[14,313,314],{},"服务器是承载你的实例的“基本载体”。",[14,316,317],{},"考虑联邦宇宙的特性来说，它甚至也可以是你家中的服务器，但要注意的是它一定要有公网访问，不然你的个人实例会变成“单向实例”，只出不进，显然不完全符合联邦宇宙的概念。",[14,319,320,321,324,325,328,329,332],{},"选择服务器时要考虑你使用的实例程序对硬件的需求，如果使用",[40,322,323],{"code":323},"GotoSocial","这样比较轻量的服务，使用",[40,326,327],{"code":327},"1c1g","的服务器都能带起来。如果使用",[40,330,331],{"code":331},"Mastodon","这样的“重量级”产品，你就需要准备更高配置的服务器了。",[14,334,335,336,339,340,343],{},"对于新人站长来说，最为推荐的程序是",[40,337,338],{"code":338},"Misskey","系列，我们视实例人数准备",[40,341,342],{"code":342},"2c2g","及以上服务器一般就够用了，后续人数和交互时间越长，你需要准备的配置也越大。",[14,345,346,347,350],{},"服务器的基本带宽建议较大一些，一般上行带宽建议至少",[40,348,349],{"code":349},"5mb","及以上，低于这个速度会严重影响和联邦宇宙的交互，下行速度的要求则相对较为灵活。",[33,352,354],{"id":353},"cpu核数和主频","CPU（核数和主频）",[14,356,357],{},"CPU 是电脑也包括服务器在内的“大脑”。",[14,359,360,361,363,364,367],{},"前面我们也提到了视运行程序选择不同的配置，比如",[40,362,331],{"code":331},"是使用",[40,365,366],{"code":366},"Ruby","构建的，我们需要至少为其准备 2-4vCPU 核心及以上的服务器。",[14,369,370,371,373],{},"整体来说除了",[40,372,323],{"code":323},"轻量级程序等，个人都建议至少使用 2vCPU 以上的服务器。",[14,375,376],{},"值得注意的是服务器 CPU 主频建议更高一些，一个高主频的 CPU 核心可以顶更多低主频的 CPU 核心，可以优先选择 AMD 的 CPU，以及其他较新的 CPU 型号。",[14,378,379],{},"CPU 占用高峰主要在与其他实例通讯也即个人实例队列工作进行时。",[33,381,383],{"id":382},"ram内存","RAM（内存）",[14,385,386],{},"视不同程序来说，运行内存都建议至少 2GB 及以上，服务器建议配置物理内存 1-2 倍的 SWAP 虚拟交换分区。",[14,388,389],{},"对于 Mastodon 来说，建议至少 4GB 防止服务运行异常。",[14,391,392],{},"运行内存占用高峰与 CPU 基本一致，主要在与其他实例通讯也即个人实例队列工作进行时，运行内存不足会严重影响本地用户和与远程实例交互性能。",[33,394,396],{"id":395},"存储硬盘","存储（硬盘）",[14,398,399],{},"首先建议实例服务和数据库是运行在 NVMe SSD 上以保证实例程序基本性能，视程序不定，一般建议至少 20GB 及以上。有额外本地媒体文件存储需求的服务器可以额外配置 SATA HDD 机械硬盘获得价格更低的本地存储需求。",[14,401,402],{},"对于 Mastodon，若不配置自动清理策略或手动清理，请注意其存储占用问题（Mastodon 会自动缓存远程实例的媒体）。",[33,404,406],{"id":405},"网络带宽和流量","网络（带宽和流量）",[14,408,409],{},"网络带宽十分重要，联邦宇宙中实例和其他实例的网络互动极大，尤其是在配置中继以后，带宽较低会使得和远程实例互动处理较慢，且可能会因此堵塞本地队列导致服务器硬件占用提高，得不偿失。",[14,411,412],{},"所以服务器的上行带宽一定要较高一些，海外很多服务器提供商大多上下对等带宽且平均为 1Gbps 以上，但一般都是共享带宽。",[14,414,415],{},"下行带宽需求视程序而论，对于 Mastodon 等会主动缓存远程实例媒体文件的程序来说，建议配置较高的下行带宽防止拥堵下载队列引起服务器更高硬件资源占用。",[14,417,418],{},"还需要注意的是服务器流量，有些服务器提供商会不限制服务器流量，但会限制合理使用。",[14,420,421],{},"也有些服务器提供商提供按量计费的流量，海外服务商多数流行为 500GB-10TB 左右，对于用户较多或者和其他实例互动较为频繁的情况下会使用更多带宽，同样的对于有主动缓存媒体文件操作的程序来说，需要更多注意其网络流量用量。",[33,423,425],{"id":424},"操作系统系统和管理程序","操作系统（系统和管理程序）",[14,427,428],{},"目前比较流行且稳定的选择是 Linux 系统，发行版则常见为 Debian，Ubuntu，RHEL系列。",[14,430,431],{},"不建议使用 Windows Server 操作系统，长期运行稳定性还是难以保证。",[14,433,434],{},"一般来说运行以上联邦宇宙程序都是使用容器（Docker）运行的，可以配合 1Panel 等支持容器管理的面板使用，个人不建议使用宝塔，可能会上报服务器信息或后门入侵引起安全问题等。",[33,436,437],{"id":437},"选购建议",[14,439,440],{},"一般来说，🇩🇪德国服务器一向具备较大性价比优势（即更大带宽，更强性能的同时还价格较为低廉），但其与中国大陆地区网络通讯条件可能较差，配合合理的 CDN 使用可能会有较好的体验。",[14,442,443],{},"个人建议谨记三色图：",[14,445,446],{},[447,448],"img",{"alt":449,"src":450},"","https://blog-files.101045700.xyz/Web/three-c-p.webp",[14,452,453],{},"建议勤关注独立服务器和服务器提供商活动，后续个人可能也会列举文章提出服务器选择建议。",[10,455,457],{"id":456},"对象存储oss","对象存储（OSS）",[33,459,35],{"id":460},"基本介绍-2",[14,462,463],{},"对象存储 (Object Storage) 是一种用于存储和检索数据的服务，通常用于保存大量静态数据，如图片、视频、文档等。",[14,465,466],{},"在这里则主要是用于媒体文件存储，也是一种在不扩容服务器的情况下比较经济的存储方案。",[14,468,469],{},"大多数情况下都不建议选择国内 OSS ，尤其是在有媒体主动缓存的情况下，因为联邦宇宙实例多数位于海外，不一定遵守 OSS 所在地（中国大陆）地区法律，可能会引起审核安全性问题，且国内 OSS 多需要实名使用。",[14,471,472],{},"注意 OSS 使用网络流量计费问题，尤其是按量计费且未作任何封顶安全措施的情况下，若被恶意刷取可能会导致账单不忍直视（一夜一套房不是梦），尤其是国内 OSS 可能会对海外访问有安全策略限制和不同计费问题，建议仔细阅读 OSS 服务提供商的文档。",[33,474,475],{"id":475},"考虑方向",[14,477,478],{},"对于一般个人用户来说，我们首先需要想的一定是存储和网络计费价格，这点在下文会做详细对比叙述。",[14,480,481],{},"我们还需要考虑存储性能问题，大多数对象存储性能一般都不低，但仍有小型提供商可能提供较低的出口量。",[14,483,484],{},"还有 SLA （可用性）问题，大多数大型对象存储提供商都能保证 99％ 及以上的可用性，请仔细阅读对象存储服务商文档。",[33,486,437],{"id":487},"选购建议-1",[14,489,490],{},"通过上文我们也知道了建议优先选择海外对象存储服务商。",[14,492,493,494,499],{},"下文部分引用了",[49,495,498],{"href":496,"rel":497},"https://catcat.blog/object-storage-pricing-comparison-1tb-storage-transfer-benchmark.html",[53],"猫猫博客的博文资料","，结合个人部分理解列举了对象存储选择建议，建议配合其博文阅读获得最佳体验。",[14,501,502],{},"比如猫猫博客中列举了各主流服务商在 1TB 存储和 1TB 出站流量场景下的价格对比表格，标注为 0 的出站流量成本代表基本不计算出口流量。",[504,505,506,525],"table",{},[507,508,509],"thead",{},[510,511,512,516,519,522],"tr",{},[513,514,515],"th",{},"对象存储服务商",[513,517,518],{},"1TB存储成本（美元/月）",[513,520,521],{},"1TB出站流量成本（美元/月）",[513,523,524],{},"总成本（美元/月）",[526,527,528,542,555,567,581,593,605],"tbody",{},[510,529,530,534,537,540],{},[531,532,533],"td",{},"Hetzner",[531,535,536],{},"5.99",[531,538,539],{},"0",[531,541,536],{},[510,543,544,547,550,552],{},[531,545,546],{},"DigitalOcean Spaces",[531,548,549],{},"15.48",[531,551,539],{},[531,553,554],{},"20.48",[510,556,557,560,563,565],{},[531,558,559],{},"Wasabi",[531,561,562],{},"6.99",[531,564,539],{},[531,566,562],{},[510,568,569,572,575,578],{},[531,570,571],{},"Scaleway (Standard)",[531,573,574],{},"16.30 (按当前汇率估算)",[531,576,577],{},"10.30 (按当前汇率估算)",[531,579,580],{},"26.60 (估算)",[510,582,583,586,589,591],{},[531,584,585],{},"Vultr (Standard)",[531,587,588],{},"18.00",[531,590,539],{},[531,592,588],{},[510,594,595,598,601,603],{},[531,596,597],{},"Backblaze B2",[531,599,600],{},"6.00",[531,602,539],{},[531,604,600],{},[510,606,607,610,613,615],{},[531,608,609],{},"Cloudflare R2",[531,611,612],{},"15.36",[531,614,539],{},[531,616,612],{},[14,618,619],{},"其中 Cloudflare R2 提供了以下免费额度：",[504,621,622,632],{},[507,623,624],{},[510,625,626,629],{},[513,627,628],{},"类型",[513,630,631],{},"额度",[526,633,634,642,654,665],{},[510,635,636,639],{},[531,637,638],{},"存储额度",[531,640,641],{},"10GB（所有存储桶的总额）",[510,643,644,651],{},[531,645,646],{},[647,648,650],"tip",{"tip":649},"即 A 类操作，常见于上传和列出存储列表等操作","Class A Operations",[531,652,653],{},"每月前一千万次请求免费",[510,655,656,662],{},[531,657,658],{},[647,659,661],{"tip":660},"即 B 类操作，常见于下载文件等操作","Class B Operations",[531,663,664],{},"每月前一亿次请求免费",[510,666,667,673],{},[531,668,669],{},[647,670,672],{"tip":671},"也就是下载文件时产生的下载流量","出口流量",[531,674,675],{},[647,676,678],{"tip":677},"从 R2 直接出站，包括通过Workers API、S3 API 以及 r2.dev 域名，都不会产生数据出站（Egress）费用，是免费的。但如果你将其他按用量计费的服务连接到R2存储桶，可能会被这些服务收费。","免费",[14,680,681],{},"所以结合这个免费额度来说，非常适合小实例使用，低于 10GB 情况下基本都能免费，对于 100GB 及以内来说都是性价比还算不错的选择。",[14,683,684],{},"但如果等于或者超过了 1TB，或者说超过 500GB 及以上，你可能就需要参考上面的 1TB 存储定价表选择其他存储服务了。",[10,686,687],{"id":687},"参考资料",[94,689,690,697,704],{},[97,691,692],{},[49,693,696],{"href":694,"rel":695},"https://developers.cloudflare.com/r2/pricing",[53],"Cloudflare R2 Pricing Docs",[97,698,699],{},[49,700,703],{"href":701,"rel":702},"https://fedi-wiki.tkg3.top/for-admin/resources/",[53],"Circlari Fediverse Wiki",[97,705,706],{},[49,707,709],{"href":496,"rel":708},[53],"对象存储服务商价格对比：1TB存储与1TB流量基准分析（猫猫博客）",{"title":449,"searchDepth":711,"depth":711,"links":712},4,[713,715,725,734,739],{"id":12,"depth":714,"text":12},2,{"id":31,"depth":714,"text":31,"children":716},[717,719,724],{"id":35,"depth":718,"text":35},3,{"id":73,"depth":718,"text":73,"children":720},[721,722,723],{"id":86,"depth":711,"text":86},{"id":157,"depth":711,"text":157},{"id":268,"depth":711,"text":268},{"id":290,"depth":718,"text":290},{"id":308,"depth":714,"text":308,"children":726},[727,728,729,730,731,732,733],{"id":311,"depth":718,"text":35},{"id":353,"depth":718,"text":354},{"id":382,"depth":718,"text":383},{"id":395,"depth":718,"text":396},{"id":405,"depth":718,"text":406},{"id":424,"depth":718,"text":425},{"id":437,"depth":718,"text":437},{"id":456,"depth":714,"text":457,"children":735},[736,737,738],{"id":460,"depth":718,"text":35},{"id":475,"depth":718,"text":475},{"id":487,"depth":718,"text":437},{"id":687,"depth":714,"text":687},[741],"联邦宇宙","2025-06-09 18:44:09","本文介绍了自建Fediverse实例的完整准备清单：注册简短易记的域名，优选海外注册商并接入Cloudflare解析；根据程序选配服务器，轻量GotoSocial 1C1G起跳，Mastodon建议4C4G+NVMe与5Mbps上行；用Linux+Docker部署，德机性价比高；媒体文件走海外对象存储，小实例用Cloudflare R2免费额度，大数据量选Hetzner、Wasabi、Backblaze，注意流量防盗刷。",false,"md","https://engagemedia.org/wp-content/uploads/2020/07/Fediverse-3D_logojpg.jpg",{},true,"/2025/06/self-fediverse-prepare",null,{"text":752,"minutes":753,"time":754,"words":755},"20 min read",19.975,1198500,3995,6,{"title":5,"description":743},{"loc":749},"posts/2025/06/self-fediverse-prepare",[761,762],"Fediverse","Website","2025-06-09 21:00:00","6a5DkKq4sn-ABjcs_SR2g8j2wCMbxLAjSBYuD3_4H3A",[766,771],{"title":767,"path":768,"stem":769,"date":770,"type":750,"children":-1},"Decky Loader——Linux下 Steamdeck 和大屏幕模式的最佳伴侣","/2025/06/decky-loader","posts/2025/06/decky-loader","2025-06-08 05:30:00",{"title":772,"path":773,"stem":774,"date":775,"type":750,"children":-1},"《痴情哥哥与病弱妹妹的乡间生活》 Steam 版在 Linux/Deck 下的运行问题修复","/2025/06/sickly-days-linux-run","posts/2025/06/sickly-days-linux-run","2025-06-22 05:30:00",1761216041144]