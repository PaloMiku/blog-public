[{"data":1,"prerenderedAt":229},["ShallowReactive",2],{"/2025/01/arch-aur-kazumi":3,"toc-/2025/01/arch-aur-kazumi":141,"surround-/2025/01/arch-aur-kazumi":218},{"id":4,"title":5,"body":6,"categories":119,"date":121,"description":12,"draft":122,"extension":123,"image":124,"meta":125,"navigation":126,"path":127,"readingTime":128,"recommend":133,"references":134,"seo":135,"stem":136,"tags":137,"type":134,"updated":134,"__hash__":140},"content/posts/2025/01/arch-aur-kazumi.md","为了一碟醋包了一盘饺子：构建和提交Kazumi AUR包",{"type":7,"value":8,"toc":116},"minimark",[9,13,22,25,28,31,34,37,40,43,50,53,56,59,62,65,75,78,86,92,99,108,113],[10,11,12],"p",{},"最近追番的时候看到了一个名为Kazumi的程序，它是一个基于Flutter开发的，可自定义规则的番剧采集程序，支持流媒体在线观看，同时还支持弹幕和实时超分辨率。",[10,14,15,16],{},"Github仓库：",[17,18,19],"a",{"href":19,"rel":20},"https://github.com/Predidit/Kazumi",[21],"nofollow",[10,23,24],{},"那听上去还是很有意思的，我属于看番剧喜欢顺带看点弹幕的那种，就像我明明知道不全，知道会删减，但依然还续着B站大会员也多少跟这有些关系。",[10,26,27],{},"总之我还是比较喜欢Kazumi的，它支持的平台也是不少的，iOS，安卓，Win，Linux，甚至新的鸿蒙Next都有支持。",[10,29,30],{},"不过我是一个ArchLinux+KDE用户，在使用它时就遇到了一些问题。",[10,32,33],{},"首先Kazumi官方提供的Linux安装方式是Deb（Debian）和tar.gz包，或者你也可以通过Flathub安装它。",[10,35,36],{},"但是很显然，Arch它不能用Deb安装，而我也不能用Flathub。",[10,38,39],{},"Kazumi Flathub的安装方式对我这个KDE桌面用户来说并不友好，居然还需要安装一整套GNOME组件？这不开玩笑嘛，我为了装个程序还得去装隔壁GNOME桌面，这肯定不行。",[10,41,42],{},"咱们有请万能的AUR来给我们看看，首先我们看到了也是有前人种树的：kazumi-bin，但是很可惜的是截止本文发布时，此包维护者已经很久没有更新过它了。",[10,44,45],{},[46,47],"img",{"alt":48,"src":49},"","https://file.101045700.xyz/2025/01/de4c7618811b03e971e5092c703f530f.webp",[10,51,52],{},"还是古早版本，好在Arch安装包是使用PKGBUILD管理的，过程不算复杂，我能很轻松复现它这个过程，更新为最新版本并且安装。",[10,54,55],{},"（为此我还去查了Arch Wiki看了半天软件包构建与AUR包提交资料）",[10,57,58],{},"我是解决了，但是其他用户呢？也许会有别的Arch用户也想装Kazumi，然后遇到我这个难受的情况。",[10,60,61],{},"所以作为老好人（bushi）的我决定提交下AUR包📦来帮助后人。",[10,63,64],{},"你现在想要在Arch使用我构建的这个包很简单，有yay的情况下直接输入下面命令然后Enter就行了。",[66,67,72],"pre",{"className":68,"code":70,"language":71},[69],"language-text","yay -S kazumi\n","text",[73,74,70],"code",{"__ignoreMap":48},[10,76,77],{},"我为了琢磨这个包看了半天时间资料，毕竟我对Linux基础也不算特别好，这更是我第一次提交AUR包，配置公私密钥和构建花费了我俩小时的时间。",[10,79,80,85],{},[17,81,84],{"href":82,"rel":83},"https://aur.archlinux.org/packages/kazumi",[21],"我构建的AUR包","是以Kazumi的tar.gz为基底做的，它的PKGBUILD文件如下",[66,87,90],{"className":88,"code":89,"language":71},[69],"# Maintainer: PaloMiku \u003Cpalomiku@outlook.com>\npkgname=kazumi\npkgver=1.5.3\npkgrel=2\npkgdesc=\"基于自定义规则的番剧采集APP，支持流媒体在线观看，支持弹幕。\"\narch=('x86_64')\nurl='https://github.com/Predidit/Kazumi'\nlicense=('GPL3')\nsource_x86_64=(\"${pkgname}-${pkgver}.tar.gz::https://github.com/Predidit/Kazumi/releases/download/$pkgver/Kazumi_linux_${pkgver}_amd64.tar.gz\" \"icon.png\")\nsha256sums_x86_64=('2e06f4fa252a93324b74098ab336874780b62e5058d6a85e6ed97a54e3f0986c' 'SKIP')\ndepends=('libayatana-appindicator' 'xdg-user-dirs' 'webkit2gtk-4.1')\n\npackage() {\n    install -d \"${pkgdir}/opt/Kazumi\" \"${pkgdir}/usr/bin\"\n\n    bsdtar -xf \"$srcdir/${pkgname}-${pkgver}.tar.gz\" -C \"${pkgdir}/opt/Kazumi\"\n\n    ln -s /opt/Kazumi/kazumi \"${pkgdir}/usr/bin/kazumi\"\n\n    install -Dm644 /dev/stdin \"${pkgdir}/usr/share/applications/kazumi.desktop\" \u003C\u003CEOF\n#!/usr/bin/env xdg-open\n[Desktop Entry]\nName=Kazumi\nComment=Watch Animes online with danmaku support.\nComment[zh_CN]=一款好用的追番软件\nExec=kazumi\nIcon=io.github.Predidit.Kazumi\nTerminal=false\nType=Application\nCategories=AudioVideo;Audio;Video;\nEOF\n\n    # 安装图标\n    install -Dm644 \"${srcdir}/icon.png\" \"${pkgdir}/usr/share/icons/hicolor/128x128/apps/io.github.Predidit.Kazumi.png\"\n}\n",[73,91,89],{"__ignoreMap":48},[10,93,94,95,98],{},"它的实现方式上半段就是从Kazumi Github仓库下载tar.gz文件然后复制相关依赖文件到指定位置，后半段则是给应用程序列表增加Kazumi应用，这样可以让你不用终端",[73,96,97],{},"kazumi","启动它。",[10,100,101,102,107],{},"给Kazumi Github仓库也提交了一个",[17,103,106],{"href":104,"rel":105},"https://github.com/Predidit/Kazumi/pull/660",[21],"Pull requests","，希望能增加此安装方式，令人高兴的是被合并了。",[10,109,110],{},[46,111],{"alt":48,"src":112},"https://file.101045700.xyz/2025/01/cfc871e26ce25d6ed2c5ecb43ba05109.webp",[10,114,115],{},"希望能够帮到更多人。",{"title":48,"searchDepth":117,"depth":117,"links":118},4,[],[120],"技术探索","2025-01-24 18:24:26",false,"md","https://file.101045700.xyz/2025/01/76ab1468eba28613d3177cea8f63994d.webp",{},true,"/2025/01/arch-aur-kazumi",{"text":129,"minutes":130,"time":131,"words":132},"5 min read",4.125,247500,825,5,null,{"title":5,"description":12},"posts/2025/01/arch-aur-kazumi",[138,139],"Arch","AUR","Ptc3e2qygT1OxYeIPsktQty5BDLIZ3UBdCUVBkobHL4",{"id":4,"title":5,"body":142,"categories":213,"date":121,"description":12,"draft":122,"extension":123,"image":124,"meta":214,"navigation":126,"path":127,"readingTime":215,"recommend":133,"references":134,"seo":216,"stem":136,"tags":217,"type":134,"updated":134,"__hash__":140},{"type":7,"value":143,"toc":211},[144,146,151,153,155,157,159,161,163,165,169,171,173,175,177,179,184,186,191,196,200,205,209],[10,145,12],{},[10,147,15,148],{},[17,149,19],{"href":19,"rel":150},[21],[10,152,24],{},[10,154,27],{},[10,156,30],{},[10,158,33],{},[10,160,36],{},[10,162,39],{},[10,164,42],{},[10,166,167],{},[46,168],{"alt":48,"src":49},[10,170,52],{},[10,172,55],{},[10,174,58],{},[10,176,61],{},[10,178,64],{},[66,180,182],{"className":181,"code":70,"language":71},[69],[73,183,70],{"__ignoreMap":48},[10,185,77],{},[10,187,188,85],{},[17,189,84],{"href":82,"rel":190},[21],[66,192,194],{"className":193,"code":89,"language":71},[69],[73,195,89],{"__ignoreMap":48},[10,197,94,198,98],{},[73,199,97],{},[10,201,101,202,107],{},[17,203,106],{"href":104,"rel":204},[21],[10,206,207],{},[46,208],{"alt":48,"src":112},[10,210,115],{},{"title":48,"searchDepth":117,"depth":117,"links":212},[],[120],{},{"text":129,"minutes":130,"time":131,"words":132},{"title":5,"description":12},[138,139],[219,224],{"title":220,"path":221,"stem":222,"date":223,"type":134,"children":-1},"记一次被1Panel官方应用商店拒绝合并","/2024/09/1panel-appstore-refused","posts/2024/09/1panel-appstore-refused","2024-9-7 19:24:26",{"title":225,"path":226,"stem":227,"date":228,"type":134,"children":-1},"旮沓给木太好玩辣——2025年上半Gal历程个人总结","/2025/05/gal-up","posts/2025/05/gal-up","2025-05-19 00:30:00",1754917571669]