[{"data":1,"prerenderedAt":207},["ShallowReactive",2],{"/2025/01/arch-aur-kazumi":3,"surround-/2025/01/arch-aur-kazumi":198},{"_path":4,"_dir":5,"_draft":6,"_partial":6,"_locale":7,"title":8,"description":9,"date":10,"categories":11,"tags":13,"image":16,"recommend":17,"readingTime":18,"body":23,"_type":191,"_id":192,"_source":193,"_file":194,"_stem":195,"_extension":196,"_original_dir":197},"/2025/01/arch-aur-kazumi","01",false,"","为了一碟醋包了一盘饺子：构建和提交Kazumi AUR包","最近追番的时候看到了一个名为Kazumi的程序，它是一个基于Flutter开发的，可自定义规则的番剧采集程序，支持流媒体在线观看，同时还支持弹幕和实时超分辨率。","2025-01-24T10:24:26.000Z",[12],"技术探索",[14,15],"Arch","AUR","https://file.101045700.xyz/2025/01/76ab1468eba28613d3177cea8f63994d.webp",5,{"text":19,"minutes":20,"time":21,"words":22},"5 min read",4.125,247500,825,{"type":24,"children":25,"toc":188},"root",[26,33,46,51,56,61,66,71,76,81,89,94,99,104,109,114,124,129,141,149,162,176,183],{"type":27,"tag":28,"props":29,"children":30},"element","p",{},[31],{"type":32,"value":9},"text",{"type":27,"tag":28,"props":34,"children":35},{},[36,38],{"type":32,"value":37},"Github仓库：",{"type":27,"tag":39,"props":40,"children":44},"a",{"href":41,"rel":42},"https://github.com/Predidit/Kazumi",[43],"nofollow",[45],{"type":32,"value":41},{"type":27,"tag":28,"props":47,"children":48},{},[49],{"type":32,"value":50},"那听上去还是很有意思的，我属于看番剧喜欢顺带看点弹幕的那种，就像我明明知道不全，知道会删减，但依然还续着B站大会员也多少跟这有些关系。",{"type":27,"tag":28,"props":52,"children":53},{},[54],{"type":32,"value":55},"总之我还是比较喜欢Kazumi的，它支持的平台也是不少的，iOS，安卓，Win，Linux，甚至新的鸿蒙Next都有支持。",{"type":27,"tag":28,"props":57,"children":58},{},[59],{"type":32,"value":60},"不过我是一个ArchLinux+KDE用户，在使用它时就遇到了一些问题。",{"type":27,"tag":28,"props":62,"children":63},{},[64],{"type":32,"value":65},"首先Kazumi官方提供的Linux安装方式是Deb（Debian）和tar.gz包，或者你也可以通过Flathub安装它。",{"type":27,"tag":28,"props":67,"children":68},{},[69],{"type":32,"value":70},"但是很显然，Arch它不能用Deb安装，而我也不能用Flathub。",{"type":27,"tag":28,"props":72,"children":73},{},[74],{"type":32,"value":75},"Kazumi Flathub的安装方式对我这个KDE桌面用户来说并不友好，居然还需要安装一整套GNOME组件？这不开玩笑嘛，我为了装个程序还得去装隔壁GNOME桌面，这肯定不行。",{"type":27,"tag":28,"props":77,"children":78},{},[79],{"type":32,"value":80},"咱们有请万能的AUR来给我们看看，首先我们看到了也是有前人种树的：kazumi-bin，但是很可惜的是截止本文发布时，此包维护者已经很久没有更新过它了。",{"type":27,"tag":28,"props":82,"children":83},{},[84],{"type":27,"tag":85,"props":86,"children":88},"img",{"alt":7,"src":87},"https://file.101045700.xyz/2025/01/de4c7618811b03e971e5092c703f530f.webp",[],{"type":27,"tag":28,"props":90,"children":91},{},[92],{"type":32,"value":93},"还是古早版本，好在Arch安装包是使用PKGBUILD管理的，过程不算复杂，我能很轻松复现它这个过程，更新为最新版本并且安装。",{"type":27,"tag":28,"props":95,"children":96},{},[97],{"type":32,"value":98},"（为此我还去查了Arch Wiki看了半天软件包构建与AUR包提交资料）",{"type":27,"tag":28,"props":100,"children":101},{},[102],{"type":32,"value":103},"我是解决了，但是其他用户呢？也许会有别的Arch用户也想装Kazumi，然后遇到我这个难受的情况。",{"type":27,"tag":28,"props":105,"children":106},{},[107],{"type":32,"value":108},"所以作为老好人（bushi）的我决定提交下AUR包📦来帮助后人。",{"type":27,"tag":28,"props":110,"children":111},{},[112],{"type":32,"value":113},"你现在想要在Arch使用我构建的这个包很简单，有yay的情况下直接输入下面命令然后Enter就行了。",{"type":27,"tag":115,"props":116,"children":118},"pre",{"code":117},"yay -S kazumi\n",[119],{"type":27,"tag":120,"props":121,"children":122},"code",{"__ignoreMap":7},[123],{"type":32,"value":117},{"type":27,"tag":28,"props":125,"children":126},{},[127],{"type":32,"value":128},"我为了琢磨这个包看了半天时间资料，毕竟我对Linux基础也不算特别好，这更是我第一次提交AUR包，配置公私密钥和构建花费了我俩小时的时间。",{"type":27,"tag":28,"props":130,"children":131},{},[132,139],{"type":27,"tag":39,"props":133,"children":136},{"href":134,"rel":135},"https://aur.archlinux.org/packages/kazumi",[43],[137],{"type":32,"value":138},"我构建的AUR包",{"type":32,"value":140},"是以Kazumi的tar.gz为基底做的，它的PKGBUILD文件如下",{"type":27,"tag":115,"props":142,"children":144},{"code":143},"# Maintainer: PaloMiku \u003Cpalomiku@outlook.com>\npkgname=kazumi\npkgver=1.5.3\npkgrel=2\npkgdesc=\"基于自定义规则的番剧采集APP，支持流媒体在线观看，支持弹幕。\"\narch=('x86_64')\nurl='https://github.com/Predidit/Kazumi'\nlicense=('GPL3')\nsource_x86_64=(\"${pkgname}-${pkgver}.tar.gz::https://github.com/Predidit/Kazumi/releases/download/$pkgver/Kazumi_linux_${pkgver}_amd64.tar.gz\" \"icon.png\")\nsha256sums_x86_64=('2e06f4fa252a93324b74098ab336874780b62e5058d6a85e6ed97a54e3f0986c' 'SKIP')\ndepends=('libayatana-appindicator' 'xdg-user-dirs' 'webkit2gtk-4.1')\n\npackage() {\n    install -d \"${pkgdir}/opt/Kazumi\" \"${pkgdir}/usr/bin\"\n\n    bsdtar -xf \"$srcdir/${pkgname}-${pkgver}.tar.gz\" -C \"${pkgdir}/opt/Kazumi\"\n\n    ln -s /opt/Kazumi/kazumi \"${pkgdir}/usr/bin/kazumi\"\n\n    install -Dm644 /dev/stdin \"${pkgdir}/usr/share/applications/kazumi.desktop\" \u003C\u003CEOF\n#!/usr/bin/env xdg-open\n[Desktop Entry]\nName=Kazumi\nComment=Watch Animes online with danmaku support.\nComment[zh_CN]=一款好用的追番软件\nExec=kazumi\nIcon=io.github.Predidit.Kazumi\nTerminal=false\nType=Application\nCategories=AudioVideo;Audio;Video;\nEOF\n\n    # 安装图标\n    install -Dm644 \"${srcdir}/icon.png\" \"${pkgdir}/usr/share/icons/hicolor/128x128/apps/io.github.Predidit.Kazumi.png\"\n}\n",[145],{"type":27,"tag":120,"props":146,"children":147},{"__ignoreMap":7},[148],{"type":32,"value":143},{"type":27,"tag":28,"props":150,"children":151},{},[152,154,160],{"type":32,"value":153},"它的实现方式上半段就是从Kazumi Github仓库下载tar.gz文件然后复制相关依赖文件到指定位置，后半段则是给应用程序列表增加Kazumi应用，这样可以让你不用终端",{"type":27,"tag":120,"props":155,"children":157},{"className":156},[],[158],{"type":32,"value":159},"kazumi",{"type":32,"value":161},"启动它。",{"type":27,"tag":28,"props":163,"children":164},{},[165,167,174],{"type":32,"value":166},"给Kazumi Github仓库也提交了一个",{"type":27,"tag":39,"props":168,"children":171},{"href":169,"rel":170},"https://github.com/Predidit/Kazumi/pull/660",[43],[172],{"type":32,"value":173},"Pull requests",{"type":32,"value":175},"，希望能增加此安装方式，令人高兴的是被合并了。",{"type":27,"tag":28,"props":177,"children":178},{},[179],{"type":27,"tag":85,"props":180,"children":182},{"alt":7,"src":181},"https://file.101045700.xyz/2025/01/cfc871e26ce25d6ed2c5ecb43ba05109.webp",[],{"type":27,"tag":28,"props":184,"children":185},{},[186],{"type":32,"value":187},"希望能够帮到更多人。",{"title":7,"searchDepth":189,"depth":189,"links":190},4,[],"markdown","content:posts:2025:01:arch-aur-kazumi.md","content","posts/2025/01/arch-aur-kazumi.md","posts/2025/01/arch-aur-kazumi","md","/posts",[199,203],{"_path":200,"title":201,"date":202},"/2024/12/oyiso-tianligpt","为Oyiso主题引入TianliGPT摘要","2024-12-07T10:24:26.000Z",{"_path":204,"title":205,"date":206},"/2025/05/gal-up","旮沓给木太好玩辣——2025年上半Gal历程个人总结","2025-05-18T16:30:00.000Z",1749476264166]