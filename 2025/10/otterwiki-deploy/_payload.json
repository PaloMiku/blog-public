[{"data":1,"prerenderedAt":353},["ShallowReactive",2],{"global-music-player":3,"post-/2025/10/otterwiki-deploy":102,"surround-/2025/10/otterwiki-deploy":341},{"musicList":4,"error":101},[5,12,18,24,30,36,41,46,51,56,60,65,71,77,83,89,95],{"id":6,"title":7,"artist":8,"source":9,"url":10,"cover":11},"760528","メグメル (cuckool Mix 2007)","eufonius","netease","https://api.obdo.cc/meting/?server=netease&type=url&id=760528","https://p3.music.126.net/UVSTEnyyWfnQmhI5kqvvMQ==/109951170852620291.jpg?param=90y90",{"id":13,"title":14,"artist":15,"source":9,"url":16,"cover":17},"1484017181","Sofia","Álvaro Soler","https://api.obdo.cc/meting/?server=netease&type=url&id=1484017181","https://p3.music.126.net/Db50NT4VRJJPIBFYRMhdvQ==/109951165359298851.jpg?param=90y90",{"id":19,"title":20,"artist":21,"source":9,"url":22,"cover":23},"22706984","Étude pour les petites supercordes","戸越まごめ","https://api.obdo.cc/meting/?server=netease&type=url&id=22706984","https://p3.music.126.net/kkkPkRGflxLurhhKBbCmPg==/109951171268737495.jpg?param=90y90",{"id":25,"title":26,"artist":27,"source":9,"url":28,"cover":29},"1311319929","アルカテイル","鈴木このみ/VISUAL ARTS / Key","https://api.obdo.cc/meting/?server=netease&type=url&id=1311319929","https://p3.music.126.net/MVWKZCUCNQocuhMRBpL-Qw==/109951169976613728.jpg?param=90y90",{"id":31,"title":32,"artist":33,"source":9,"url":34,"cover":35},"2734259397","Utopia or Dystopia","夢乃ゆき","https://api.obdo.cc/meting/?server=netease&type=url&id=2734259397","https://p3.music.126.net/fgj1rPzHY_l63_jJ2Cg2uw==/109951171811747559.jpg?param=90y90",{"id":37,"title":38,"artist":39,"source":9,"url":40,"cover":11},"760533","だんご大家族","茶太/真理絵/くない瓜/Rio/Morrigan/藤枝あかね/加藤恒太","https://api.obdo.cc/meting/?server=netease&type=url&id=760533",{"id":42,"title":43,"artist":44,"source":9,"url":45,"cover":23},"22706980","渚","VISUAL ARTS / Key","https://api.obdo.cc/meting/?server=netease&type=url&id=22706980",{"id":47,"title":48,"artist":49,"source":9,"url":50,"cover":23},"22707008","潮鳴り","折戸伸治","https://api.obdo.cc/meting/?server=netease&type=url&id=22707008",{"id":52,"title":53,"artist":44,"source":9,"url":54,"cover":55},"1446832656","REFLECTION BLUE","https://api.obdo.cc/meting/?server=netease&type=url&id=1446832656","https://p3.music.126.net/9Z_HRqDjs2iBLz7_qqSPkg==/109951170197587239.jpg?param=90y90",{"id":57,"title":58,"artist":44,"source":9,"url":59,"cover":23},"22706979","汐","https://api.obdo.cc/meting/?server=netease&type=url&id=22706979",{"id":61,"title":62,"artist":63,"source":9,"url":64,"cover":55},"1446837300","しろはの子守歌","小原好美/VISUAL ARTS / Key","https://api.obdo.cc/meting/?server=netease&type=url&id=1446837300",{"id":66,"title":67,"artist":68,"source":9,"url":69,"cover":70},"1303019256","astral ability","橋本みゆき/佐咲紗花","https://api.obdo.cc/meting/?server=netease&type=url&id=1303019256","https://p3.music.126.net/YM3igu2abTjWdIfT_Gn5Lw==/109951163479574970.jpg?param=90y90",{"id":72,"title":73,"artist":74,"source":9,"url":75,"cover":76},"541492408","強がるオトナのSecret Labo","後藤麻衣","https://api.obdo.cc/meting/?server=netease&type=url&id=541492408","https://p3.music.126.net/KyQpNXO_3pvMwcgBhl0oGg==/109951163169040453.jpg?param=90y90",{"id":78,"title":79,"artist":80,"source":9,"url":81,"cover":82},"530057368","PERFECT GIRL","種崎敦美","https://api.obdo.cc/meting/?server=netease&type=url&id=530057368","https://p3.music.126.net/ZGqIyyu7ziQayjXIpID4qg==/109951163108870649.jpg?param=90y90",{"id":84,"title":85,"artist":86,"source":9,"url":87,"cover":88},"542058337","大和撫子はあこがれ","遥そら","https://api.obdo.cc/meting/?server=netease&type=url&id=542058337","https://p3.music.126.net/r4KRde43oriYxAgyD8-MOA==/109951163169043939.jpg?param=90y90",{"id":90,"title":91,"artist":92,"source":9,"url":93,"cover":94},"1958727599","明日への扉","高橋李依","https://api.obdo.cc/meting/?server=netease&type=url&id=1958727599","https://p3.music.126.net/fNvDL1E9IX-__sUBPhLAGw==/109951167585364773.jpg?param=90y90",{"id":96,"title":97,"artist":98,"source":9,"url":99,"cover":100},"1818615632","色香水","神山羊","https://api.obdo.cc/meting/?server=netease&type=url&id=1818615632","https://p3.music.126.net/z-GWtONkPJHkPS8G9v55qw==/109951166198068699.jpg?param=90y90",null,{"id":103,"title":104,"body":105,"categories":318,"date":320,"description":321,"draft":322,"extension":323,"hide-info":322,"image":125,"meta":324,"navigation":325,"path":326,"permalink":101,"readingTime":327,"recommend":332,"references":101,"seo":333,"sitemap":334,"stem":335,"subtitle":101,"tags":336,"type":339,"updated":101,"__hash__":340},"content/posts/2025/10/otterwiki-deploy.md","OtterWiki 部署：基于 Python 的轻量知识库系统",{"type":106,"value":107,"toc":304},"minimark",[108,112,116,119,126,129,132,135,147,151,154,163,166,169,172,183,188,191,197,204,208,219,227,237,244,254,258,261,267,278,286,289,295,298,301],[109,110,111],"h2",{"id":111},"前言",[113,114,115],"p",{},"前两天我简单介绍了下 Affine 知识库系统，然后有人可能就有疑问了，Affine 占用那么高，我只是想部署一个小知识库，也不需要那么多复杂的特性，有没有轻巧一点的系统呢？",[113,117,118],{},"还真有，在之前个人写小 Wiki 在线整理时曾经了解并使用过 OtterWiki 这个知识库系统，使用 Flask 框架，基于 Python 编写，使用 Markdown 作为标记语言，总体来说还是比较舒服的，页面设计不算十分前卫但也不算落后。",[113,120,121],{},[122,123],"img",{"alt":124,"src":125},"","https://blog-files.101045700.xyz/2025/10/otterwiki.png",[113,127,128],{},"且自身还支持 Git Http 服务器，可以通过 Git 协议拉取和管理知识库内容。还是有点意思的。",[109,130,131],{"id":131},"要求",[113,133,134],{},"OtterWiki 的 CPU 需求非常低，你甚至可以在树莓派上运行它。所需的 RAM 大约为 100MiB，官方给出的推荐部署方式是使用 Docker 部署。",[113,136,137,138,142,143,146],{},"需要使用专用域名，例如",[139,140,141],"code",{"code":141},"wiki.example.com","，不能使用子目录",[139,144,145],{"code":145},"example.com/wiki","，浏览器需要启用 Javascript。",[109,148,150],{"id":149},"安装-docker","安装 Docker",[113,152,153],{},"我们使用 Linuxmirrors 提供的 Docker 安装脚本来执行 Docker 的安装，它可以在多种 Linux 系统上安装 Docker。",[155,156,161],"pre",{"className":157,"code":159,"language":160,"meta":124},[158],"language-bash","bash \u003C(curl -sSL https://linuxmirrors.cn/docker.sh)\n","bash",[139,162,159],{"__ignoreMap":124},[113,164,165],{},"在遵照脚本步骤完成安装 Docker 后，我们进行下一步操作。",[109,167,168],{"id":168},"反向代理服务",[113,170,171],{},"我个人推荐使用 Caddy 作为反向代理服务的选择，它和 OtterWiki 一样占用的性能极低，且可以自动为域名申请 Https 证书。",[113,173,174,175,182],{},"Caddy 的部署和安装可以参见",[176,177,181],"a",{"href":178,"rel":179},"https://caddyserver.com/docs/install",[180],"nofollow","官方文档","，我们在这里仅介绍 Debian/Ubuntu 环境下的安装和使用方式。",[184,185,187],"h3",{"id":186},"安装-caddy","安装 Caddy",[113,189,190],{},"使用以下命令在 Debian/Ubuntu 环境下一键安装和启动 Caddy 本身以及需求的组件以及配置 Caddy 官方软件包仓库（稳定版）：",[155,192,195],{"className":193,"code":194,"language":160,"meta":124},[158],"sudo apt install -y debian-keyring debian-archive-keyring apt-transport-https curl\ncurl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/gpg.key' | sudo gpg --dearmor -o /usr/share/keyrings/caddy-stable-archive-keyring.gpg\ncurl -1sLf 'https://dl.cloudsmith.io/public/caddy/stable/debian.deb.txt' | sudo tee /etc/apt/sources.list.d/caddy-stable.list\nchmod o+r /usr/share/keyrings/caddy-stable-archive-keyring.gpg\nchmod o+r /etc/apt/sources.list.d/caddy-stable.list\nsudo apt update\nsudo apt install caddy\n",[139,196,194],{"__ignoreMap":124},[113,198,199,200,203],{},"执行此安装操作后，Caddy 将自动启动并作为名为 ",[139,201,202],{"code":202},"caddy"," 的 systemd 服务运行 Caddy。",[184,205,207],{"id":206},"配置-caddy-反向代理","配置 Caddy 反向代理",[113,209,210,211,214,215,218],{},"我们打开",[139,212,213],{"code":213},"/etc/caddy/","目录下的",[139,216,217],{"code":217},"Caddyfile","文件，在最下面首先添加如下配置：",[155,220,225],{"className":221,"code":223,"language":224,"meta":124},[222],"language-json","wiki.example.com {\n  reverse_proxy 127.0.0.1:8080\n  encode zstd gzip\n}\n","json",[139,226,223],{"__ignoreMap":124},[113,228,229,230,232,233,236],{},"这代表 Caddy 会反代",[139,231,141],{"code":141},"的请求，并把请求转发到在本地",[139,234,235],{"code":235},"8080","端口上暴露的服务，我们这篇教程会让 OtterWiki 在 8080 端口上部署，这是官方给出的默认配置端口，如果你想要更换端口，那么在上面的配置文件和后面的配置文件中你都需要更换对应端口。",[113,238,239,240,243],{},"Caddy 支持通过配置文件启用 Zstandard和 Gzip 压缩功能，这是主流的两种压缩算法。我们只需要把",[139,241,242],{"code":242}," encode zstd gzip","加入域名配置文件下方即可，后续加入其他配置也是类似这样放置。",[113,245,246,247,249,250,253],{},"同样你也需要更换",[139,248,141],{"code":141},"为你实际想部署的域名，完成配置后，确保域名已经解析到服务器的前提下，使用",[139,251,252],{"code":252},"systemctl restart caddy","重启 Caddy 服务。",[109,255,257],{"id":256},"安装-otterwiki","安装 OtterWiki",[113,259,260],{},"我们先新建放置 OtterWiki 数据的文件夹，然后终端进入其中。",[155,262,265],{"className":263,"code":264,"language":160,"meta":124},[158],"mkdir otterwiki\ncd otterwiki\n",[139,266,264],{"__ignoreMap":124},[113,268,269,270,273,274,277],{},"在",[139,271,272],{"code":272},"otterwiki","目录下新建",[139,275,276],{"code":276},"docker-compose.yml","文件并填入如下内容",[155,279,284],{"className":280,"code":282,"language":283,"meta":124},[281],"language-yaml","services:\n  otterwiki:\n    image: redimp/otterwiki:2\n    restart: unless-stopped\n    ports:\n      - 127.0.0.1:8080:80\n    volumes:\n      - ./app-data:/app-data\n","yaml",[139,285,282],{"__ignoreMap":124},[113,287,288],{},"接下来使用以下命令拉取和启动编排镜像文件：",[155,290,293],{"className":291,"code":292,"language":160,"meta":124},[158],"docker compose up -d\n",[139,294,292],{"__ignoreMap":124},[113,296,297],{},"如果你的域名解析和 Caddy 配置正确，稍等片刻你就可以在域名上看到 OtterWiki 了。",[109,299,300],{"id":300},"结束",[113,302,303],{},"OtterWiki 启动后注册的第一个账户将作为管理员账户，所以部署启动后请尽快先注册账户哦。",{"title":124,"searchDepth":305,"depth":305,"links":306},4,[307,309,310,311,316,317],{"id":111,"depth":308,"text":111},2,{"id":131,"depth":308,"text":131},{"id":149,"depth":308,"text":150},{"id":168,"depth":308,"text":168,"children":312},[313,315],{"id":186,"depth":314,"text":187},3,{"id":206,"depth":314,"text":207},{"id":256,"depth":308,"text":257},{"id":300,"depth":308,"text":300},[319],"技术探索","2025-10-24T22:00:00","本文介绍了轻量级知识库系统 OtterWiki 的完整部署流程。系统基于 Python Flask 开发，采用 Markdown 语法，支持 Git 协议管理内容，最低仅需 100MiB 内存。部署步骤包括：使用一键脚本安装 Docker，通过官方仓库安装 Caddy 并配置自动 HTTPS 反向代理，创建专用目录后编写 docker-compose.yml 启动服务，默认监听 8080 端口。首次注册账户将自动获得管理员权限，适合资源有限的个人或小团队快速搭建私有 Wiki。",false,"md",{},true,"/2025/10/otterwiki-deploy",{"text":328,"minutes":329,"time":330,"words":331},"5 min read",4.505,270300,901,13,{"title":104,"description":321},{"loc":326},"posts/2025/10/otterwiki-deploy",[337,338],"自托管","知识库","tech","p-ikvrY51OUxx7rRD95ceMIrA_4hICxdDfHkaNqA6UE",[342,347],{"title":343,"path":344,"stem":345,"date":346,"type":339,"children":-1},"Misskey 部署：新一代联邦星际微博平台","/2025/10/misskey-fediverse-deploy","posts/2025/10/misskey-fediverse-deploy","2025-10-24T05:00:00",{"title":348,"path":349,"stem":350,"date":351,"type":352,"children":-1},"迟来的个人对《拔作岛》第一部游戏动漫杂谈","/2025/10/nukitashi-gv-end","posts/2025/10/nukitashi-gv-end","2025-10-25T02:00:00","story",1765487034236]