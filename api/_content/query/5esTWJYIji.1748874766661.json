{"_path":"/2025/05/maitetsu-video-fix","_dir":"05","_draft":false,"_partial":false,"_locale":"","title":"《爱上火车》在 Linux 下的视频播放修复","description":"本文介绍了《爱上火车》系列在 Linux Proton 环境下播放游戏内视频的修复","date":"2025-05-19T10:30:00.000Z","categories":["旮瘩给木"],"tags":["Galgame"],"image":"https://blog-files.101045700.xyz/MaitetsuVideoFix/Home.webp","recommend":10,"readingTime":{"text":"6 min read","minutes":5.845,"time":350700,"words":1169},"body":{"type":"root","children":[{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.xiaoheihe.cn/app/bbs/link/153105496","rel":["nofollow"]},"children":[{"type":"text","value":"本文类似版本"}]},{"type":"text","value":"个人首发于小黑盒，你在此看到的版本为基于小黑盒版本的专业向二次修订版。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"本次修订版本发布于个人博客，目前仅在小黑盒和个人博客发布过本文。"}]}]},{"type":"element","tag":"h2","props":{"id":"小剧场"},"children":[{"type":"element","tag":"tip","props":{"tip":"基于今天和朋友的聊天以及之前看到的一些聊天梗做的夸张虚构，图一乐就行了。"},"children":[{"type":"text","value":"小剧场"}]}]},{"type":"element","tag":"chat","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"{:2025-05-19 16:30:00}"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"{朋友}"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"鬆啊，马上要 520 了，不去陪女朋友在这写博客啊，你是打算运用你在《爱上火车》《苍之彼方的四重奏》《魔女的夜宴》《恋爱与选举与巧克力》《拔作岛》《夏日口袋》中学到的技巧来哄你的女朋友嘛。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"{:鬆撤回了一条消息}"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"{.鬆}"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我真不会哄女朋友😭，今天发完文章明天还得思考怎么哄女朋友。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"{朋友}"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"太惨了，现充不会哄女朋友，今天帮我看看电脑问题呗。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"{.鬆}"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"不看，说这样的风凉话你自己研究去。"}]}]},{"type":"element","tag":"h2","props":{"id":"前言"},"children":[{"type":"text","value":"前言"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"之前文章也提到过，我是一个 Steamdeck Gal 玩家，而且是用 Linux 跑 Galgame 的“勇者”。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"既然都用 Linux 跑 Gal 了，那么会遇到各种奇奇怪怪问题都算正常了。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在 Linux 游玩《爱上火车 LastRun!!》时，我就遇到了相关组件缺失问题，使用环境为Proton 9.0，会出现人物线开场动画无法正常播放问题。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Maitetsu Home","src":"https://blog-files.101045700.xyz/Gal2025Up/Maitetsu/Home.webp"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"一开始我尝试使用Proton GE环境再次运行进行尝试，但单纯使用ProtonGE环境后反而问题更加严重，到剧情线开场动画会直接黑屏卡死。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"ProtonDB","src":"https://blog-files.101045700.xyz/MaitetsuVideoFix/ProtonDB.webp"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在四处寻找解决方法时，发现ProtonDB下的一位用户提出了解决方案，使用Protontricks进行补丁修补，经过验证，问题得到了很好的解决。"}]},{"type":"element","tag":"h2","props":{"id":"为什么不用-wine"},"children":[{"type":"text","value":"为什么不用 Wine？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"这个综合原因是有很多的，但简单来说就是笔者是购买的 Steam 官方中文版，使用 Steam Proton 进行运行游戏，很难切换 Proton 以外的第三方兼容层。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"使用第三方版本在 Deck 的 Gamescope 游戏桌面启动和切换也不方便和不美观。"}]},{"type":"element","tag":"alert","props":{"type":"question"},"children":[{"type":"element","tag":"template","props":{"v-slot:title":""},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"值得注意！"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"tip","props":{"tip":"似乎很多 Linux Galgame 玩家都使用它（雾）"},"children":[{"type":"text","value":"笔者使用的 Linux 发行版为 Arch Linux"}]},{"type":"text","value":"，桌面环境为 GNOME，后文教程也主要围绕其进行，对于其他发行版，大部分情况下也就是安装方式和软件包存在差异。"}]}]},{"type":"element","tag":"h2","props":{"id":"安装-protontricks"},"children":[{"type":"text","value":"安装 Protontricks"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于 Steam 官方中文版，我们需要先安装 Protontricks 来实现对其补丁和环境修复。"}]},{"type":"element","tag":"h3","props":{"id":"arch-linux-命令安装"},"children":[{"type":"text","value":"Arch Linux 命令安装"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于 Arch Linux 且非 Flathub 用户来说，安装 Protontricks 相当简单，而且不需要额外的权限配置。"}]},{"type":"element","tag":"copy","props":{"code":"sudo pacman -S protontricks"},"children":[]},{"type":"element","tag":"h3","props":{"id":"flathub-安装"},"children":[{"type":"text","value":"Flathub 安装"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"对于其他 Linux 发行版，首先你先去安装 Flatpak，然后我们可以通过 Flathub 来安装 Protontricks。"}]},{"type":"element","tag":"h4","props":{"id":"切换国内-flathub-官方源"},"children":[{"type":"text","value":"切换国内 Flathub 官方源"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们可以通过以下指令为 Flatpak 切换中国大陆地区的下载源提高下载速度。"}]},{"type":"element","tag":"h5","props":{"id":"上海交通大学"},"children":[{"type":"text","value":"上海交通大学"}]},{"type":"element","tag":"copy","props":{"code":"sudo flatpak remote-modify flathub --url=https://mirror.sjtu.edu.cn/flathub"},"children":[]},{"type":"element","tag":"h5","props":{"id":"中国科学技术大学"},"children":[{"type":"text","value":"中国科学技术大学"}]},{"type":"element","tag":"copy","props":{"code":"sudo flatpak remote-modify flathub --url=https://mirrors.ustc.edu.cn/flathub"},"children":[]},{"type":"element","tag":"h4","props":{"id":"获取-protontricks-和-flatseal"},"children":[{"type":"text","value":"获取 Protontricks 和 Flatseal"}]},{"type":"element","tag":"h5","props":{"id":"软件中心安装"},"children":[{"type":"text","value":"软件中心安装"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"前往 GNOME 软件中心搜索并获取 Protontricks 和 Flatseal"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://blog-files.101045700.xyz/MaitetsuVideoFix/Fl_Protontricks.webp"},"children":[]}]},{"type":"element","tag":"h5","props":{"id":"命令安装"},"children":[{"type":"text","value":"命令安装"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们也可以通过以下命令从 Flatpak 安装程序："}]},{"type":"element","tag":"copy","props":{"code":"flatpak install flathub com.github.Matoking.protontricks"},"children":[]},{"type":"element","tag":"copy","props":{"code":"flatpak install flathub com.github.tchx84.Flatseal"},"children":[]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://blog-files.101045700.xyz/MaitetsuVideoFix/Sh_Protontricks.webp"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"权限配置"},"children":[{"type":"text","value":"权限配置"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们需要通过 Flatseal 为 Protontricks 配置相关权限保证它能读写文件和正常运行，首先打开 Flatseal 并找到 Protontricks。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://blog-files.101045700.xyz/MaitetsuVideoFix/Flatseal01.webp"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"向下翻找到文件系统相关配置，把这四个全部打开（勾选），为程序分配全部文件系统访问权限，然后关闭 Flatseal，此处配置操作结束。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://blog-files.101045700.xyz/MaitetsuVideoFix/Flatseal02.webp"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"修补组件"},"children":[{"type":"text","value":"修补组件"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"接下来打开 Protontricks，会出现一个提示框让我们选择需要打补丁的游戏，我们以爱上火车做例子，在此处选择对应的游戏并且选择 OK"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果报错请先确定你是否已经通过 Proton 启动过一次游戏，不然此处可能会报错找不到游戏相关 Proton 文件。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://blog-files.101045700.xyz/MaitetsuVideoFix/Protontricks-01.webp"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在一番确定（可能有选择默认 Proton 容器）操作后，我们可以来到如下页面。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://blog-files.101045700.xyz/MaitetsuVideoFix/Protontricks-02.webp"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在此处我们选择“安装Windows DLL 或组件”来为游戏安装缺失的相关组件，以爱上火车为例，需要安装 DirectShow 和 WMP9 组件来修补视频播放。"}]},{"type":"element","tag":"alert","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果下载组件失败，你可能需要配置海外网络环境。"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"选定完需要修补的组件后，单击“确定“开始修补安装，期间可能会弹窗和出现安装页面，全部遵循其标准顺序确定或安装。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://blog-files.101045700.xyz/MaitetsuVideoFix/Protontricks-03.webp"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"测试"},"children":[{"type":"text","value":"测试"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"我们关闭Protontricks然后启动游戏测试效果，测试发现游戏内开场动画已经可以正常得到播放，很显然我们修补成功了！"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"","src":"https://blog-files.101045700.xyz/MaitetsuVideoFix/MaitetsuGames.webp"},"children":[]}]}],"toc":{"title":"","searchDepth":4,"depth":4,"links":[{"id":"小剧场","depth":2,"text":"小剧场"},{"id":"前言","depth":2,"text":"前言"},{"id":"为什么不用-wine","depth":2,"text":"为什么不用 Wine？"},{"id":"安装-protontricks","depth":2,"text":"安装 Protontricks","children":[{"id":"arch-linux-命令安装","depth":3,"text":"Arch Linux 命令安装"},{"id":"flathub-安装","depth":3,"text":"Flathub 安装","children":[{"id":"切换国内-flathub-官方源","depth":4,"text":"切换国内 Flathub 官方源","children":[{"id":"上海交通大学","depth":5,"text":"上海交通大学"},{"id":"中国科学技术大学","depth":5,"text":"中国科学技术大学"}]},{"id":"获取-protontricks-和-flatseal","depth":4,"text":"获取 Protontricks 和 Flatseal","children":[{"id":"软件中心安装","depth":5,"text":"软件中心安装"},{"id":"命令安装","depth":5,"text":"命令安装"}]}]}]},{"id":"权限配置","depth":2,"text":"权限配置"},{"id":"修补组件","depth":2,"text":"修补组件"},{"id":"测试","depth":2,"text":"测试"}]}},"_type":"markdown","_id":"content:posts:2025:05:maitetsu-video-fix.md","_source":"content","_file":"posts/2025/05/maitetsu-video-fix.md","_stem":"posts/2025/05/maitetsu-video-fix","_extension":"md","_original_dir":"/posts"}