import{q as A}from"./DSXnOi67.js";import{az as $,aA as I,aB as R,aC as T,ah as d,aD as z,ae as D,y as q,r as m,G as C}from"./rKnU_epd.js";const E=(e,t)=>e.reduce((s,a)=>{const n=t(a);return s[n]||(s[n]=[]),s[n].push(a),s},{}),G=(e,t,s=!1)=>{if(!e)return[];const a=(o,r)=>t(o)-t(r),n=(o,r)=>t(r)-t(o);return e.slice().sort(s===!0?n:a)},_=(e,t,s="asc")=>{if(!e)return[];const a=(o,r)=>`${t(o)}`.localeCompare(t(r)),n=(o,r)=>`${t(r)}`.localeCompare(t(o));return e.slice().sort(s==="desc"?n:a)},y=new WeakMap;function h(e,t,s={}){const{mode:a="replace",route:n=$(),router:o=I(),transform:r}=s;let f=u=>u,g=u=>u;typeof r=="function"?f=r:r&&(r.get&&(f=r.get),r.set&&(g=r.set)),y.has(o)||y.set(o,new Map);const p=y.get(o);let i=n.query[e];R(()=>{i=void 0});let c;const O=T((u,b)=>(c=b,{get(){return u(),f(i!==void 0?i:d(t))},set(l){l=g(l),i!==l&&(i=l===d(t)?void 0:l,p.set(e,l===d(t)?void 0:l),b(),z(()=>{if(p.size===0)return;const Q=Object.fromEntries(p.entries());p.clear();const{params:S,query:w,hash:x}=n;o[d(a)]({params:S,query:{...w,...Q},hash:x})}))}}));return D(()=>n.query[e],u=>{i!==f(u)&&(i=u,c())},{flush:"sync"}),O}function M(e="posts/%"){return A("content").where("stem","LIKE",e).select("categories","date","description","image","path","readingTime","recommend","title","type","updated").all()}function j(e,t){const{bindQuery:s}=t||{},a=s?h(s,void 0):m(),n=C(()=>[...new Set(d(e).map(r=>r.categories?.[0]))]),o=C(()=>d(e).filter(r=>!a.value||r.categories?.[0]===a.value));return{category:a,categories:n,listCategorized:o}}function B(e,t){const s=q(),{bindDirectionQuery:a,bindOrderQuery:n,initialAscend:o=!1,initialOrder:r=s.pagination.sortOrder||"date"}=t||{},f=n?h(n,r):m(r),g={get:c=>c==="true",set:c=>c.toString()},p=a?h(a,o.toString(),{transform:g}):m(o),i=C(()=>_(d(e),c=>c[f.value]||"",p.value?"asc":"desc"));return{sortOrder:f,isAscending:p,listSorted:i}}function K(e){return q().article.categories[e]?.icon??"ph:folder-bold"}function L(e){return q().article.categories[e]?.color??"#888"}function N(e="tech",t){const{prefix:s="text"}=t||{};return`${s}-${e}`}export{B as a,j as b,K as c,L as d,N as e,M as f,E as g,G as s,h as u};
