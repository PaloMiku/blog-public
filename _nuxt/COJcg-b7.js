import{_ as Z}from"./C7uyNXg_.js";import{_ as j,i as z}from"./CHeLNKl_.js";import{J as U,x as A,Q as g,aN as o,aM as C,aQ as S,aR as y,K as t,aT as B,b5 as n,b8 as p,aU as x,b7 as F,br as Q,b4 as I,ah as W,bp as E,l as T,aV as $,aX as G,bc as H}from"./D6ajeznB.js";import{j as J,c as K,d as M,t as P}from"./CoLgjbI_.js";import{g as w,i as X}from"./CXZoJmO6.js";import{a as q,b as ee,c as te,g as ae}from"./DyEXceBO.js";import"./D-deoX8n.js";import"./WPawofUq.js";const se={class:"article-item"},ie={class:"article-title"},ne=U({__name:"Archive",props:{to:{},useUpdated:{type:Boolean},path:{},readingTime:{},title:{},subtitle:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{},"hide-info":{type:Boolean}},setup(e){const r=e,c=A(()=>r.useUpdated?r.updated:r.date);return(i,f)=>{const _=j,b=Q,N=J;return o(),g("li",se,[t(c)?(o(),C(_,{key:0,datetime:t(c),title:("getLocaleDatetime"in i?i.getLocaleDatetime:t(w))(t(c)),month:"2-digit",day:"2-digit"},null,8,["datetime","title"])):S("",!0),y(N,{class:"article-link gradient-card",to:e.to,title:e.description},{default:B(()=>[n("span",ie,p(e.title),1),e.date&&e.useUpdated&&("isTimeDiffSignificant"in i?i.isTimeDiffSignificant:t(X))(e.date,e.updated)?(o(),g(x,{key:0},[f[0]||(f[0]=F("   ",-1)),y(_,{class:"aux-date",datetime:e.date,title:("getLocaleDatetime"in i?i.getLocaleDatetime:t(w))(e.date),year:t(z)(e.date,e.updated??0)?void 0:"numeric",month:"2-digit",day:"2-digit"},null,8,["datetime","title","year"])],64)):S("",!0),e.image?(o(),C(b,{key:1,class:"article-cover",src:e.image,alt:e.title,loading:"lazy"},null,8,["src","alt"])):S("",!0)]),_:1},8,["to","title"])])}}}),oe=Object.assign(I(ne,[["__scopeId","data-v-41660236"]]),{__name:"ZArchive"}),re={class:"archive proper-height"},le={class:"archive-title"},ce={class:"archive-year"},de={class:"archive-age"},ue={class:"archive-info"},me=U({__name:"archive",async setup(e){let r,c;const i=K();W({meta:[{name:"description",content:`${i.title}的所有文章归档。`}]});const f=i.component.stats.birthYear;M().setAside(["blog-stats","blog-log"]);const{data:b}=([r,c]=E(()=>q()),r=await r,c(),r),{listSorted:N,isAscending:v,sortOrder:d}=ee(b),{category:k,categories:O,listCategorized:V}=te(N),L=A(()=>{const u=Object.entries(ae(V.value,a=>{try{const l=a[d.value];if(!l)return 0;const m=new Date(l);return Number.isNaN(m.getTime())?0:m.getFullYear()}catch(l){return console.error(`Invalid date: ${a[d.value]}`,l),0}}));return v.value?u:u.reverse()}),R=A(()=>L.value.reduce((u,[a,l])=>{const m=l?.reduce((s,h)=>s+h.readingTime.words,0)||0;return u[a]=P(m),u},{}));return(u,a)=>{const l=Z,m=oe;return o(),g("div",re,[y(l,{"is-ascending":t(v),"onUpdate:isAscending":a[0]||(a[0]=s=>T(v)?v.value=s:null),"sort-order":t(d),"onUpdate:sortOrder":a[1]||(a[1]=s=>T(d)?d.value=s:null),category:t(k),"onUpdate:category":a[2]||(a[2]=s=>T(k)?k.value=s:null),categories:t(O)},null,8,["is-ascending","sort-order","category","categories"]),(o(!0),g(x,null,$(t(L),([s,h])=>(o(),g("section",{key:s,class:"archive-group"},[n("div",le,[n("h2",ce,p(s),1),n("div",de,[n("span",null,p(Number(s)-t(f)),1),a[3]||(a[3]=n("span",{class:"age-label"},"岁",-1))]),n("div",ue,[n("span",null,p(t(R)[s])+"字",1),n("span",null,p(h?.length)+"篇",1)])]),y(H,{tag:"menu",class:"archive-list",name:"float-in"},{default:B(()=>[(o(!0),g(x,null,$(h,(D,Y)=>(o(),C(m,G({key:D.path},{ref_for:!0},D,{to:D.path,"use-updated":t(d)==="updated",style:{"--delay":`${Y*.03}s`}}),null,16,["to","use-updated","style"]))),128))]),_:2},1024)]))),128))])}}}),Ne=I(me,[["__scopeId","data-v-8882bb7e"]]);export{Ne as default};
