import{d as P,B as L,c as A,$ as U,a0 as X,k as m,h as s,X as k,f as x,l as g,j as l,n as Y,i as c,P as G,u as e,w as C,y as v,a1 as F,q as R,t as h,Y as J,z as N,r as j,o as Q,a2 as W,F as B,v as ee,a3 as O,D as V,a4 as te,_ as oe,C as ne,a5 as ae,E as se,H as q,I as H,a6 as ce}from"#entry";import{_ as z}from"./_va1mDQG.js";import{g as Z,i as re}from"./DjWPuc-B.js";import{d as ie,e as E}from"./CaK2fdVU.js";import{_ as le,a as de}from"./D8Dg1or6.js";import ue from"./lC7elAEK.js";import{u as M,a as me,q as pe}from"./CVKEoqRs.js";import{u as _e}from"./B1mPrnRu.js";import"./rJCbAzvX.js";const fe={class:"post-nav"},ge={class:"operations"},ve={key:0,class:"post-info"},he={key:2},ye=P({inheritAttrs:!1,__name:"PostHeader",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{}},setup(t){const a=t,d=L(),o=A(()=>a.categories?.[0]),i=A(()=>ie(o.value)),n=`【${d.title}】${a.title}

${a.description?`${a.description}

`:""}${new URL(a.path,d.url).href}`,{copy:p,copied:f}=U(n);return(r,_)=>{const T=Y,y=G,$=z,b=R,u=X("tip");return s(),m("div",{class:k(["post-header",{"has-cover":t.image,"text-revert":t.meta?.coverRevert}])},[t.image?(s(),x(T,{key:0,class:"post-cover",src:t.image,alt:t.title},null,8,["src","alt"])):g("",!0),l("div",fe,[l("div",ge,[c(y,{icon:e(f)?"ph:check-bold":"ph:share-bold",onClick:_[0]||(_[0]=D=>e(p)())},{default:C(()=>[..._[1]||(_[1]=[v(" 文字分享 ",-1)])]),_:1},8,["icon"])]),t.meta?.hideInfo?g("",!0):(s(),m("div",ve,[t.date?F((s(),x($,{key:0,date:t.date,icon:"ph:calendar-dots-bold"},null,8,["date"])),[[u,`创建于 ${("getLocaleDatetime"in r?r.getLocaleDatetime:e(Z))(t.date)}`]]):g("",!0),t.updated&&("isTimeDiffSignificant"in r?r.isTimeDiffSignificant:e(re))(t.date,t.updated,.999)?F((s(),x($,{key:1,date:t.updated,icon:"ph:calendar-plus-bold"},null,8,["date"])),[[u,`修改于 ${("getLocaleDatetime"in r?r.getLocaleDatetime:e(Z))(t.updated)}`]]):g("",!0),e(o)?(s(),m("span",he,[c(b,{name:e(i)},null,8,["name"]),v(" "+h(e(o)),1)])):g("",!0),l("span",null,[c(b,{name:"ph:paragraph-bold"}),v(" "+h(("formatNumber"in r?r.formatNumber:e(J))(t.readingTime?.words))+" 字 ",1)])]))]),l("h1",{class:k(["post-title",("getPostTypeClassName"in r?r.getPostTypeClassName:e(E))(t.type)])},h(t.title),3)],2)}}}),be=Object.assign(N(ye,[["__scopeId","data-v-55ada320"]]),{__name:"PostHeader"}),xe={class:"md-excerpt gradient-card"},$e=P({__name:"Excerpt",props:{excerpt:{}},setup(t){const a=t,d=L(),o=j(a.excerpt),i=j("");return d.component.excerpt?.animation!==!1&&(o.value="",Q(async()=>{i.value=d.component.excerpt?.caret??"_";for(const n of a.excerpt)o.value+=n,await W(50);i.value=""})),(n,p)=>{const f=R;return s(),m("div",xe,[c(f,{name:"ph:highlighter-bold"}),v(h(e(o))+h(e(i)),1)])}}}),ke=Object.assign(N($e,[["__scopeId","data-v-186a6ec2"]]),{__name:"PostExcerpt"}),Ce={class:"post-footer"},Pe={key:0,class:"reference"},Te={class:"content"},De={class:"license"},Ne={class:"content"},we=P({inheritAttrs:!1,__name:"PostFooter",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{}},setup(t){const a=L();return(d,o)=>{const i=ue;return s(),m("div",Ce,[t.references?(s(),m("section",Pe,[o[0]||(o[0]=l("div",{id:"references",class:"title text-creative"}," 参考链接 ",-1)),l("div",Te,[l("ul",null,[(s(!0),m(B,null,ee(t.references,({title:n,link:p},f)=>(s(),m("li",{key:f},[c(i,{href:p||""},{default:C(()=>[v(h(n??p),1)]),_:2},1032,["href"])]))),128))])])])):g("",!0),l("section",De,[o[3]||(o[3]=l("div",{class:"title text-creative"}," 许可协议 ",-1)),l("div",Ne,[l("p",null,[o[1]||(o[1]=v(" 本文采用 ",-1)),c(i,{href:e(a).copyright.url},{default:C(()=>[v(h(e(a).copyright.name),1)]),_:1},8,["href"]),o[2]||(o[2]=v(" 许可协议，转载请注明出处。 ",-1))])])])])}}}),Ie=Object.assign(N(we,[["__scopeId","data-v-cdb923bb"]]),{__name:"PostFooter"}),Se={class:"surround-text"},Ae={key:0,class:"surround-post",dir:"ltr"},Le=P({__name:"PostSurround",async setup(t){let a,d;const o=O(),{data:i}=([a,d]=V(()=>M(`surround-${o.path}`,()=>me("content",o.path,{fields:["date","title","type"]}).order("date","ASC").where("stem","LIKE","posts/%"))),a=await a,d(),a),[n=null,p=null]=i.value??[],[f,r]=te({inheritAttrs:!1});return(_,T)=>{const y=R,$=z,b=oe;return s(),m(B,null,[c(e(f),null,{default:C(({post:u,icon:D,fallbackIcon:w,fallbackText:I,alignEnd:S})=>[c(b,{to:u?.path,class:"surround-link","align-end":S},{default:C(()=>[c(y,{class:k({"rtl-flip":u}),name:u?D:w},null,8,["class","name"]),l("div",Se,[l("strong",{class:k(["title",("getPostTypeClassName"in _?_.getPostTypeClassName:e(E))(u?.type)])},h(u?.title||I),3),u?.date?(s(),x($,{key:0,class:"date",date:u.date},null,8,["date"])):g("",!0)])]),_:2},1032,["to","align-end"])]),_:1}),e(n)||e(p)?(s(),m("div",Ae,[c(e(r),{post:e(p),icon:"solar:rewind-back-bold-duotone","fallback-icon":"solar:document-add-bold-duotone","fallback-text":"新故事即将发生"},null,8,["post"]),c(e(r),{post:e(n),icon:"solar:rewind-forward-bold-duotone","fallback-icon":"solar:reel-bold-duotone","fallback-text":"已抵达博客尽头","align-end":""},null,8,["post"])])):g("",!0)],64)}}}),Re=Object.assign(N(Le,[["__scopeId","data-v-5bbacfc0"]]),{__name:"PostSurround"}),ze=P({__name:"[...slug]",async setup(t){let a,d;const o=O(),i=ne();i.setAside(["toc"]);const{data:n}=([a,d]=V(()=>M(()=>o.path,()=>pe("content").path(o.path).first(),"$BPopkF1nvN")),a=await a,d(),a),p=_e(),{toc:f,meta:r}=ae(p),_=A(()=>n.value?.description||"");function T(){f.value=n.value?.body.toc,r.value=n.value?.meta}return T(),n.value?(se({title:n.value.title,meta:[{property:"og:type",content:"article"},{property:"og:image",content:n.value.image},{name:"description",content:n.value.description}]}),i.setAside(n.value.meta?.aside)):(o.meta.title="404",i.setAside(["blog-log"])),(y,$)=>{const b=be,u=ke,D=le,w=Ie,I=Re,S=de,K=ce;return e(n)?(s(),m(B,{key:0},[c(b,q(H(e(n))),null,16),e(_)?(s(),x(u,{key:0,excerpt:e(_)},null,8,["excerpt"])):g("",!0),c(D,{class:k(["article",("getPostTypeClassName"in y?y.getPostTypeClassName:e(E))(e(n)?.type,{prefix:"md"})]),value:e(n),tag:"article"},null,8,["class","value"]),c(w,q(H(e(n))),null,16),c(I),c(S)],64)):(s(),x(K,{key:1,icon:"solar:confounded-square-bold-duotone",title:"内容为空或页面不存在"}))}}});export{ze as default};
