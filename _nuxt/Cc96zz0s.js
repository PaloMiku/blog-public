import{d as D,y as A,X as M,Y as U,k as l,o as r,R as T,b as N,h as f,f as p,i as K,e as a,M as X,u as e,w as C,q as g,Z as E,j as B,t as u,U as Y,s as I,O as F,I as G,$ as J,F as S,n as Q,a0 as H,A as V,a1 as W,_ as ee,z as te,c as oe,B as se,C as j,D as q,a2 as ne}from"./Bimv5xXQ.js";import{g as w,a as O,c as L,b as ae}from"./DofoyMMY.js";import{d as re,e as R}from"./BsdKm-Kc.js";import{_ as ie,a as ce}from"./D5xn4Ltu.js";import le from"./EPs5UIti.js";import{u as Z,a as pe,q as de}from"./BiB_A0VY.js";import"./rJCbAzvX.js";const ue={class:"post-nav"},_e={class:"operations"},me={key:0,class:"post-info"},ge=["datetime"],fe=["datetime"],he={key:2,class:"article-category"},ye={class:"wordcount"},ve=D({inheritAttrs:!1,__name:"PostHeader",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},cover_revert:{type:Boolean},hideInfo:{type:Boolean},recommend:{},references:{}},setup(b){const o=b,i=A(),n=w(o.date),c=w(o.updated),s=o.categories?.[0],_=re(s),h=`【${i.title}】${o.title}

${o.description?`${o.description}

`:""}${new URL(o.path,i.url).href}`,{copy:k,copied:m}=M(h);return(t,y)=>{const P=K,d=X,v=B,$=U("tip");return r(),l("div",{class:T(["post-header",{"has-cover":t.image,"text-revert":t.cover_revert}])},[t.image?(r(),N(P,{key:0,class:"post-cover",src:t.image,alt:t.title},null,8,["src","alt"])):f("",!0),p("div",ue,[p("div",_e,[a(d,{icon:e(m)?"ph:check-bold":"ph:share-bold",onClick:y[0]||(y[0]=x=>e(k)())},{default:C(()=>y[1]||(y[1]=[g(" 文字分享 ",-1)])),_:1,__:[1]},8,["icon"])]),t.hideInfo?f("",!0):(r(),l("div",me,[t.date?E((r(),l("time",{key:0,datetime:("getIsoDatetime"in t?t.getIsoDatetime:e(L))(t.date)},[a(v,{name:"ph:calendar-dots-bold"}),g(" "+u(e(n)),1)],8,ge)),[[$,`创建于 ${("getLocaleDatetime"in t?t.getLocaleDatetime:e(O))(o.date)}`]]):f("",!0),("isTimeDiffSignificant"in t?t.isTimeDiffSignificant:e(ae))(t.date,t.updated,.999)?E((r(),l("time",{key:1,datetime:("getIsoDatetime"in t?t.getIsoDatetime:e(L))(t.updated)},[a(v,{name:"ph:calendar-plus-bold"}),g(" "+u(e(c)),1)],8,fe)),[[$,`修改于 ${("getLocaleDatetime"in t?t.getLocaleDatetime:e(O))(o.updated)}`]]):f("",!0),e(s)?(r(),l("span",he,[a(v,{name:e(_)},null,8,["name"]),g(" "+u(e(s)),1)])):f("",!0),p("span",ye,[a(v,{name:"ph:paragraph-bold"}),g(" "+u(("formatNumber"in t?t.formatNumber:e(Y))(t.readingTime?.words))+" 字 ",1)])]))]),p("h1",{class:T(["post-title",("getPostTypeClassName"in t?t.getPostTypeClassName:e(R))(t.type)])},u(t.title),3)],2)}}}),be=Object.assign(I(ve,[["__scopeId","data-v-a1c363b3"]]),{__name:"PostHeader"}),$e={class:"md-excerpt gradient-card"},ke=D({__name:"Excerpt",props:{excerpt:{}},setup(b){const o=b,i=A(),n=F(o.excerpt),c=F("");return i.content.excerpt?.animation!==!1&&(n.value="",G(async()=>{c.value=i.content.excerpt?.caret??"_";for(const s of o.excerpt)n.value+=s,await J(50);c.value=""})),(s,_)=>{const h=B;return r(),l("div",$e,[a(h,{name:"ph:highlighter-bold"}),g(u(e(n))+u(e(c)),1)])}}}),Pe=Object.assign(I(ke,[["__scopeId","data-v-bf7538b0"]]),{__name:"PostExcerpt"}),Ce={class:"post-footer"},De={key:0,class:"reference"},Ie={class:"content"},Te={class:"license"},Ne={class:"content"},we=D({inheritAttrs:!1,__name:"PostFooter",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},cover_revert:{type:Boolean},hideInfo:{type:Boolean},recommend:{},references:{}},setup(b){const o=A();return(i,n)=>{const c=le;return r(),l("div",Ce,[i.references?(r(),l("section",De,[n[0]||(n[0]=p("div",{id:"references",class:"title text-creative"}," 参考链接 ",-1)),p("div",Ie,[p("ul",null,[(r(!0),l(S,null,Q(i.references,(s,_)=>(r(),l("li",{key:_},[a(c,{href:s.link||""},{default:C(()=>[g(u(s.title??s.link),1)]),_:2},1032,["href"])]))),128))])])])):f("",!0),p("section",Te,[n[3]||(n[3]=p("div",{class:"title text-creative"}," 许可协议 ",-1)),p("div",Ne,[p("p",null,[n[1]||(n[1]=g(" 本文采用 ",-1)),a(c,{href:e(o).copyright.url},{default:C(()=>[g(u(e(o).copyright.name),1)]),_:1},8,["href"]),n[2]||(n[2]=g(" 许可协议，转载请注明出处。 ",-1))])])])])}}}),Le=Object.assign(I(we,[["__scopeId","data-v-c423e6b6"]]),{__name:"PostFooter"}),Ae={class:"surround-text"},Be=["datetime"],Se={key:0,class:"surround-post"},Re=D({__name:"PostSurround",async setup(b){let o,i;const n=H(),{data:c}=([o,i]=V(()=>Z(`surround-${n.path}`,()=>pe("content",n.path,{fields:["date","title","type"]}).order("date","ASC").where("stem","LIKE","posts/%"))),o=await o,i(),o),[s=null,_=null]=c.value??[],[h,k]=W({inheritAttrs:!1});return(m,t)=>{const y=B,P=ee;return r(),l(S,null,[a(e(h),null,{default:C(({post:d,icon:v,fallbackIcon:$,fallbackText:x,alignRight:z})=>[a(P,{to:d?.path,class:"surround-link","align-right":z},{default:C(()=>[a(y,{name:d?v:$},null,8,["name"]),p("div",Ae,[p("strong",{class:T(["title",("getPostTypeClassName"in m?m.getPostTypeClassName:e(R))(d?.type)])},u(d?.title||x),3),d?(r(),l("time",{key:0,datetime:("getIsoDatetime"in m?m.getIsoDatetime:e(L))(d.date)},u(("getPostDate"in m?m.getPostDate:e(w))(d.date)),9,Be)):f("",!0)])]),_:2},1032,["to","align-right"])]),_:1}),e(s)||e(_)?(r(),l("div",Se,[a(e(k),{post:e(_),icon:"solar:rewind-back-bold-duotone","fallback-icon":"solar:document-add-bold-duotone","fallback-text":"新故事即将发生"},null,8,["post"]),a(e(k),{post:e(s),icon:"solar:rewind-forward-bold-duotone","fallback-icon":"solar:reel-bold-duotone","fallback-text":"已抵达博客尽头","align-right":""},null,8,["post"])])):f("",!0)],64)}}}),xe=Object.assign(I(Re,[["__scopeId","data-v-f181f773"]]),{__name:"PostSurround"}),Ee=D({__name:"[...slug]",async setup(b){let o,i;const n=H(),c=te();c.setAside(["toc"]);const{data:s}=([o,i]=V(()=>Z(()=>n.path,()=>de("content").path(n.path).first(),"$BPopkF1nvN")),o=await o,i(),o),_=oe(()=>s.value?.description||"");return s.value?(se({title:s.value.title,meta:[{property:"og:type",content:"article"},{property:"og:image",content:s.value.image},{name:"description",content:s.value.description}]}),c.setAside(s.value.meta?.aside)):(n.meta.title="404",c.setAside(["blog-log"])),(h,k)=>{const m=be,t=Pe,y=ie,P=Le,d=xe,v=ce,$=ne;return e(s)?(r(),l(S,{key:0},[a(m,j(q(e(s))),null,16),e(_)?(r(),N(t,{key:0,excerpt:e(_)},null,8,["excerpt"])):f("",!0),a(y,{class:T(["article",("getPostTypeClassName"in h?h.getPostTypeClassName:e(R))(e(s)?.type,{prefix:"md"})]),value:e(s),tag:"article"},null,8,["class","value"]),a(P,j(q(e(s))),null,16),a(d),a(v)],64)):(r(),N($,{key:1,icon:"solar:confounded-square-bold-duotone",title:"内容为空或页面不存在"}))}}}),ze=I(Ee,[["__scopeId","data-v-87b84342"]]);export{ze as default};
