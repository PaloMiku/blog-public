import{u as S,q as $}from"./BDjvjfxx.js";import{ae as I,af as Q,ag as R,ah as _,O as f,ai as T,L as k,A as q,r as g,c as m}from"./BJJeEbQF.js";const L=(e,t)=>e.reduce((r,n)=>{const a=t(n);return r[a]||(r[a]=[]),r[a].push(n),r},{}),M=(e,t,r=!1)=>{if(!e)return[];const n=(o,s)=>t(o)-t(s),a=(o,s)=>t(s)-t(o);return e.slice().sort(r===!0?a:n)},v=(e,t,r="asc")=>{if(!e)return[];const n=(o,s)=>`${t(o)}`.localeCompare(t(s)),a=(o,s)=>`${t(s)}`.localeCompare(t(o));return e.slice().sort(r==="desc"?a:n)},d=new WeakMap;function z(e,t,r={}){const{mode:n="replace",route:a=I(),router:o=Q(),transform:s}=r;let p=c=>c,y=c=>c;typeof s=="function"?p=s:s&&(s.get&&(p=s.get),s.set&&(y=s.set)),d.has(o)||d.set(o,new Map);const l=d.get(o);let i=a.query[e];R(()=>{i=void 0});let h;const x=_((c,C)=>(h=C,{get(){return c(),p(i!==void 0?i:f(t))},set(u){u=y(u),i!==u&&(i=u===f(t)?void 0:u,l.set(e,u===f(t)?void 0:u),C(),T(()=>{if(l.size===0)return;const w=Object.fromEntries(l.entries());l.clear();const{params:A,query:b,hash:O}=a;o[f(n)]({params:A,query:{...b,...w},hash:O})}))}}));return k(()=>a.query[e],c=>{i!==p(c)&&(i=c,h())},{flush:"sync"}),x}function j(e="posts/%"){return S(`index_${e}`,()=>$("content").where("stem","LIKE",e).select("categories","date","description","image","path","readingTime","recommend","title","type","updated").all(),{default:()=>[]})}function G(e,t){const{bindQuery:r}=t??{},n=r?z(r,void 0,{transform:s=>s,mode:"push"}):g(),a=m(()=>[...new Set(f(e).map(s=>s.categories?.[0]))]),o=m(()=>f(e).filter(s=>!n.value||s.categories?.[0]===n.value));return{category:n,categories:a,listCategorized:o}}function K(e){const t=q(),r=g(t.pagination.sortOrder||"date"),n=g(),a=m(()=>v(f(e),o=>o[r.value]||"",n.value?"asc":"desc"));return{sortOrder:r,isAscending:n,listSorted:a}}function N(e){return q().article.categories[e]?.icon??"ph:folder-bold"}function P(e,t={prefix:"text"}){e||(e="tech");const{prefix:r}=t;return`${r}-${e}`}export{j as a,K as b,G as c,N as d,P as e,L as g,M as s,z as u};
