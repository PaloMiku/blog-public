import{d as S,h as n,o as a,j as e,l as m,I as W,k as g,x as r,M as z,y as N,A as w,_ as D,n as f,$ as j,a0 as V,e as p,c as C,E as A,H as b,J as T,m as B,v as H,F as P,s as G,a1 as O,u as R,a as U,b as Q,Q as Z}from"#entry";import{s as q,a as J,f as K,u as X}from"./COoJSQyo.js";import{_ as Y}from"./CMYqRiiI.js";import ee from"./Dvs4aiXW.js";import{_ as se}from"./TKr96X1f.js";import"./Dk1GcALs.js";import"./CaiwunYR.js";const te={key:0,class:"steam-profile"},ae={class:"profile-header"},oe={class:"profile-info"},ne={class:"username-row"},le={class:"username"},ie={class:"status-badge-group"},re={key:0,class:"status-playing"},ce={key:1,class:"status-playing"},me=["href"],de={key:1,class:"steam-profile-empty"},ue=S({__name:"SteamProfile",props:{user:{},metadata:{default:null}},setup(s){const u=o=>q[o]||"#90a0a6",i=o=>J[o]||o;return(o,d)=>{const _=W;return s.user?(a(),n("div",te,[e("div",ae,[m(_,{src:s.user.avatar.large,alt:s.user.username,class:"avatar",loading:"lazy"},null,8,["src","alt"]),e("div",oe,[e("div",ne,[e("h2",le,r(s.user.username),1),e("div",ie,[e("div",{class:"status-badge",style:z({"--status-color":u(s.user.status)})},[d[0]||(d[0]=e("span",{class:"status-dot"},null,-1)),N(" "+r(i(s.user.status)),1)],4)])]),s.user.currentGame?(a(),n("p",re," 正在玩 "+r(s.user.currentGame.name),1)):s.user.status==="offline"?(a(),n("p",ce," 用户当前离线 ")):g("",!0),e("a",{href:s.user.profileUrl,target:"_blank",class:"profile-link"}," 访问 Steam 个人资料 → ",8,me)])])])):(a(),n("div",de,[...d[1]||(d[1]=[e("p",null,"无法加载 Steam 数据",-1)])]))}}}),_e=Object.assign(w(ue,[["__scopeId","data-v-512e1ec4"]]),{__name:"SteamProfile"}),ve={class:"stats-overview"},ge={class:"stat-card"},pe={class:"stat-info"},he={class:"stat-value"},fe={class:"stat-card"},ye={class:"stat-info"},$e={class:"stat-value"},ke={key:0,class:"stat-card"},be={class:"stat-info"},Se={class:"stat-value"},we=S({__name:"SteamStatsOverview",props:{games:{},user:{}},setup(s){return(u,i)=>{const o=D;return a(),n("div",ve,[e("div",ge,[m(o,{name:"ph:game-controller-bold",size:"28",class:"stat-icon"}),e("div",pe,[i[0]||(i[0]=e("div",{class:"stat-label"},"游戏总数",-1)),e("div",he,r(s.games?.totalCount??0),1)])]),e("div",fe,[m(o,{name:"ph:hourglass-bold",size:"28",class:"stat-icon"}),e("div",ye,[i[1]||(i[1]=e("div",{class:"stat-label"},"总游玩时长",-1)),e("div",$e,r(s.user?.playtimeStats?.totalForever??0)+" 小时",1)])]),s.user?.playtimeStats?.totalTwoWeeks?(a(),n("div",ke,[m(o,{name:"ph:calendar-bold",size:"28",class:"stat-icon"}),e("div",be,[i[2]||(i[2]=e("div",{class:"stat-label"},"最近两周内时长",-1)),e("div",Se,r(f(K)(s.user.playtimeStats.totalTwoWeeks)),1)])])):g("",!0)])}}}),xe=Object.assign(w(we,[["__scopeId","data-v-19d720e6"]]),{__name:"SteamStatsOverview"}),Ce=["title"],Te={class:"game-header"},Pe={class:"game-content"},Ge={class:"game-name"},Ie={class:"game-meta"},Me={class:"meta-item"},Fe={class:"value"},ze={key:0,class:"meta-item"},De={class:"value"},Le={key:1,class:"meta-item"},Ve={class:"value"},Oe={key:2,class:"meta-item"},We={class:"value"},Ae={key:3,class:"meta-item"},Ee={class:"value"},Ne={key:0,class:"achievements-progress"},je={class:"progress-bar"},Be={class:"progress-text"},He={key:1,class:"game-description"},Re={class:"game-footer"},Ue=["href"],Qe=S({__name:"GameCard",props:{game:{}},setup(s){const u=i=>{window.open(`https://store.steampowered.com/app/${i}`,"_blank")};return(i,o)=>{const d=W;return a(),n("div",{class:"game-card",title:`点击查看 ${s.game.name} 的 Steam 页面`,onClick:o[2]||(o[2]=_=>u(s.game.appid))},[e("div",Te,[m(d,{src:s.game.images.headerImage,alt:s.game.name,class:"header-image",loading:"lazy"},null,8,["src","alt"]),o[3]||(o[3]=e("div",{class:"game-overlay"},null,-1))]),e("div",Pe,[e("h3",Ge,r(s.game.name),1),e("div",Ie,[e("div",Me,[o[4]||(o[4]=e("span",{class:"label"},"总时长:",-1)),e("span",Fe,r(s.game.playtimeForever)+" 小时",1)]),s.game.playtimeTwoWeeks!==void 0?(a(),n("div",ze,[o[5]||(o[5]=e("span",{class:"label"},"最近两周:",-1)),e("span",De,r(s.game.playtimeTwoWeeks)+" 小时",1)])):g("",!0),s.game.achievements?(a(),n("div",Le,[o[6]||(o[6]=e("span",{class:"label"},"成就:",-1)),e("span",Ve,r(s.game.achievements.unlocked)+"/"+r(s.game.achievements.total),1)])):g("",!0),s.game.releaseDate?(a(),n("div",Oe,[o[7]||(o[7]=e("span",{class:"label"},"发布:",-1)),e("span",We,r(s.game.releaseDate),1)])):g("",!0),s.game.price?(a(),n("div",Ae,[o[8]||(o[8]=e("span",{class:"label"},"价格:",-1)),e("span",Ee,r(s.game.price.displayPrice),1)])):g("",!0)]),s.game.achievements?(a(),n("div",Ne,[e("div",je,[e("div",{class:j(["progress-fill",{"progress-complete":s.game.achievements.percentage===100}]),style:z({width:`${s.game.achievements.percentage}%`})},null,6)]),e("span",Be,"成就进度: "+r(s.game.achievements.percentage)+"%",1)])):g("",!0),s.game.shortDescription?(a(),n("p",He,r(s.game.shortDescription),1)):g("",!0),e("div",Re,[e("a",{class:"steam-link",href:`https://store.steampowered.com/app/${s.game.appid}`,target:"_blank",rel:"noopener noreferrer",onClick:o[0]||(o[0]=V(()=>{},["stop"])),onMousedown:o[1]||(o[1]=V(()=>{},["stop"]))}," 在 Steam 中查看 → ",40,Ue)])])],8,Ce)}}}),Ze=Object.assign(w(Qe,[["__scopeId","data-v-e9c6bc99"]]),{__name:"GameCard"}),F=12,qe={class:"tab-content"},Je={key:0},Ke={key:0,class:"games-scroll"},Xe={key:0,class:"scroll-hint"},Ye={key:1,class:"games-grid"},es={key:1,class:"empty-state"},ss={class:"tab-content"},ts={class:"games-toolbar"},as={class:"game-count"},os={key:0},ns={key:0,class:"games-scroll"},ls={key:0,class:"scroll-hint"},is={key:1,class:"games-grid"},rs={key:1,class:"empty-state"},cs={key:0},ms={key:1},ds={key:2,class:"pagination-control"},us=S({__name:"SteamGamesTabs",props:{games:{}},setup(s){const u=s,i=p(""),o=p(1),d=p(!1),_=p(!0),$=p(),k=C(()=>{const l=u.games?.allGames;return l?l.map(t=>({...t,playtimeForever:typeof t.playtimeForever=="number"?Math.round(t.playtimeForever):0,playtimeTwoWeeks:t.playtimeTwoWeeks?Math.round(t.playtimeTwoWeeks):0})):[]}),y=C(()=>{if(!k.value)return[];let l=[...k.value];if(i.value.trim()){const t=i.value.toLowerCase();l=l.filter(h=>h.name.toLowerCase().includes(t))}return l.sort((t,h)=>h.playtimeForever-t.playtimeForever)}),v=C(()=>Math.ceil(y.value.length/F)),L=C(()=>{const l=(o.value-1)*F;return y.value.slice(l,l+F)});return A(()=>{if(d.value=!0,$.value){const l=$.value,t=()=>{l.scrollLeft>10&&(_.value=!1)};l.addEventListener("scroll",t,{once:!0})}setTimeout(()=>{_.value=!1},5e3)}),(l,t)=>{const h=Ze,x=D,I=Y,M=ee;return a(),b(M,{tabs:["最近游戏","游戏库"],center:""},{tab1:T(()=>[e("div",qe,[u.games?.recentGames&&u.games.recentGames.length>0?(a(),n("div",Je,[d.value?(a(),n("div",Ke,[e("div",{class:"games-scroll-container",ref_key:"scrollContainerRef",ref:$},[(a(!0),n(P,null,G(u.games.recentGames,c=>(a(),b(h,{key:c.appid,game:c,class:"games-scroll-item"},null,8,["game"]))),128))],512),m(O,{name:"fade"},{default:T(()=>[_.value?(a(),n("div",Xe,[m(x,{name:"ph:arrow-right-bold",class:"scroll-hint-icon"}),t[2]||(t[2]=e("span",null,"左右滑动查看更多",-1))])):g("",!0)]),_:1})])):(a(),n("div",Ye,[(a(!0),n(P,null,G(u.games.recentGames,c=>(a(),b(h,{key:c.appid,game:c},null,8,["game"]))),128))]))])):(a(),n("div",es,[...t[3]||(t[3]=[e("p",null,"暂无最近游戏数据",-1)])]))])]),tab2:T(()=>[e("div",ss,[e("div",ts,[B(e("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.value=c),type:"text",placeholder:"搜索游戏...",class:"search-input"},null,512),[[H,i.value]]),e("div",as,r(y.value.length)+" / "+r(u.games?.totalCount??0),1)]),y.value.length>0?(a(),n("div",os,[d.value?(a(),n("div",ns,[e("div",{class:"games-scroll-container",ref_key:"scrollContainerRef",ref:$},[(a(!0),n(P,null,G(y.value,c=>(a(),b(h,{key:c.appid,game:c,class:"games-scroll-item"},null,8,["game"]))),128))],512),m(O,{name:"fade"},{default:T(()=>[_.value&&y.value.length>2?(a(),n("div",ls,[m(x,{name:"ph:arrow-right-bold",class:"scroll-hint-icon"}),t[4]||(t[4]=e("span",null,"左右滑动查看更多",-1))])):g("",!0)]),_:1})])):(a(),n("div",is,[(a(!0),n(P,null,G(L.value,c=>(a(),b(h,{key:c.appid,game:c},null,8,["game"]))),128))]))])):(a(),n("div",rs,[i.value?(a(),n("p",cs,"没有找到匹配的游戏")):(a(),n("p",ms,"暂无游戏数据"))])),!d.value&&v.value>1?(a(),n("div",ds,[m(I,{modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=c=>o.value=c),class:"pagination","total-pages":v.value},null,8,["modelValue","total-pages"])])):g("",!0)])]),_:1})}}}),_s=Object.assign(w(us,[["__scopeId","data-v-d8a6ea72"]]),{__name:"SteamGamesTabs"}),vs={class:"steam-page"},gs={class:"mobile-only"},ps={key:0,class:"loading-state"},hs={class:"loading-container"},fs={class:"progress-bar-container"},ys={class:"progress-bar"},$s={class:"progress-info"},ks={class:"progress-text"},bs={key:1,class:"error-state"},Ss={key:2,class:"steam-content"},ws=S({__name:"steam",setup(s){const u=R(),i=U();Q({title:"Steam",meta:[{name:"description",content:`${u.author.name} 的 Steam 个人资料，查看完整的游戏库、游戏时长、成就等信息。`},{property:"og:type",content:"profile"},{name:"keywords",content:"Steam,游戏库,游戏时长,成就"}]}),i.setAside(["blog-tech","comm-group"]);const{fetchSteamData:o}=X(),d=p(!0),_=p(!1),$=p(null),k=p(null),y=p(null),v=p(0);return A(async()=>{try{v.value=5,await new Promise(t=>setTimeout(t,300)),v.value=15;const l=await o();v.value=60,l.success&&l.data?($.value=l.data.user,await new Promise(t=>setTimeout(t,200)),v.value=70,k.value=l.data.games,await new Promise(t=>setTimeout(t,200)),v.value=85,y.value=l.allMetadata,await new Promise(t=>setTimeout(t,150)),v.value=100):_.value=!0}catch(l){console.error("Failed to fetch Steam data:",l),_.value=!0}finally{d.value=!1}}),(l,t)=>{const h=Z,x=D,I=_e,M=xe,c=_s,E=se;return a(),n("div",vs,[e("div",gs,[m(h,{to:"/",suffix:"Steam"})]),f(d)?(a(),n("div",ps,[e("div",hs,[t[1]||(t[1]=e("p",{class:"loading-text"},"加载 Steam 数据中...",-1)),e("div",fs,[e("div",ys,[e("div",{class:"progress-fill",style:z({width:`${f(v)}%`})},null,4)]),e("div",$s,[t[0]||(t[0]=e("p",{class:"loading-detail"},"正在获取用户信息、游戏库和成就数据...",-1)),e("p",ks,r(f(v))+"%",1)])])])])):f(_)?(a(),n("div",bs,[m(x,{name:"ph:warning-bold",size:"36"}),t[2]||(t[2]=e("p",null,"无法加载 Steam 数据",-1)),t[3]||(t[3]=e("p",{class:"error-detail"},"请检查 API 是否可用",-1))])):(a(),n("div",Ss,[m(I,{user:f($),metadata:f(y)},null,8,["user","metadata"]),m(M,{games:f(k),user:f($)},null,8,["games","user"]),m(c,{games:f(k)},null,8,["games"])])),m(E)])}}}),Fs=w(ws,[["__scopeId","data-v-ce0fd647"]]);export{Fs as default};
