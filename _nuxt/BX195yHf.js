import{d as y,r as _,k as r,h as i,j as s,l as g,t as m,u as f,i as p,q as b,n as x,p as P,y as w,z as k,o as z}from"#entry";import{s as B,a as C}from"./Hz-qS8wY.js";import{f as I,u as N}from"./DCfs0kZU.js";const U={key:0,class:"steam-profile"},V={class:"cache-header"},$={key:0,class:"cache-hint"},j=["disabled","title"],M={class:"profile-header"},R={class:"profile-info"},T={class:"username-row"},G={class:"username"},L={class:"status-badge-group"},O={key:0,class:"status-playing"},q={key:1,class:"status-playing"},A=["href"],D={key:1,class:"steam-profile-skeleton"},E={key:2,class:"steam-profile-empty"},F=y({__name:"SteamProfile",props:{user:{},loading:{type:Boolean,default:!1},metadata:{default:null}},emits:["refresh"],setup(e,{emit:h}){const o=h,n=_(!1),d=async()=>{n.value=!0,o("refresh"),await new Promise(t=>setTimeout(t,500)),n.value=!1},c=t=>B[t]||"#90a0a6",u=t=>C[t]||t;return(t,a)=>{const v=b,l=x;return e.user?(i(),r("div",U,[s("div",V,[e.metadata?.user?(i(),r("div",$," 更新于 "+m(f(I)(e.metadata.user?.cachedAt||"")),1)):g("",!0),s("button",{class:"refresh-btn",disabled:f(n),title:f(n)?"刷新中...":"刷新数据",onClick:d},[p(v,{name:f(n)?"ph:spinner-bold":"ph:arrow-clockwise-bold",size:"16"},null,8,["name"])],8,j)]),s("div",M,[p(l,{src:e.user.avatar.large,alt:e.user.username,class:"avatar",loading:"lazy"},null,8,["src","alt"]),s("div",R,[s("div",T,[s("h2",G,m(e.user.username),1),s("div",L,[s("div",{class:"status-badge",style:P({"--status-color":c(e.user.status)})},[a[0]||(a[0]=s("span",{class:"status-dot"},null,-1)),w(" "+m(u(e.user.status)),1)],4)])]),e.user.currentGame?(i(),r("p",O," 正在玩 "+m(e.user.currentGame.name),1)):e.user.status==="offline"?(i(),r("p",q," 用户当前离线 ")):g("",!0),s("a",{href:e.user.profileUrl,target:"_blank",class:"profile-link"}," 访问 Steam 个人资料 → ",8,A)])])])):e.loading?(i(),r("div",D,[...a[1]||(a[1]=[s("div",{class:"skeleton-avatar"},null,-1),s("div",{class:"skeleton-info"},[s("div",{class:"skeleton-text"}),s("div",{class:"skeleton-text short"})],-1)])])):(i(),r("div",E,[...a[2]||(a[2]=[s("p",null,"无法加载 Steam 数据",-1)])]))}}}),H=Object.assign(k(F,[["__scopeId","data-v-a463f02d"]]),{__name:"SteamProfile"}),J={class:"profile-section-inner"},K=y({__name:"SteamProfileSection",props:{user:{},loading:{type:Boolean},metadata:{}},emits:["refresh"],setup(e,{emit:h}){const o=e,n=h,d=_(o.user||null),c=_(!1),u=_(!1),{getUserInfo:t}=N(),a=async()=>{c.value=!0,u.value=!1;try{const l=await t();l?d.value=l:u.value=!0}catch(l){console.error("SteamProfileSection: failed to fetch user",l),u.value=!0}finally{c.value=!1}};z(()=>{o.user||a()});const v=async()=>{n("refresh"),await a()};return(l,Q)=>{const S=H;return i(),r("div",J,[p(S,{user:d.value??o.user??null,loading:c.value||o.loading,metadata:o.metadata,onRefresh:v},null,8,["user","loading","metadata"])])}}}),Z=Object.assign(k(K,[["__scopeId","data-v-f9da450b"]]),{__name:"SteamProfileSection"});export{Z as default};
