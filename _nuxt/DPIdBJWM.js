import{d as k,k as o,h as s,j as e,i as u,n as z,l as p,t as c,p as F,y as N,z as S,q as D,u as h,Q as j,R as M,r as y,c as w,o as V,f as $,w as I,S as A,U as B,F as x,v as C,B as E,C as U,E as q,G as H}from"#entry";import{s as Q,a as R,f as Z,u as J}from"./BSYvoo-r.js";import{_ as K}from"./kslo6gXA.js";import X from"./DdOsxolW.js";import{_ as Y}from"./CiREoWH-.js";import"./B5IlXZ1e.js";const ee={key:0,class:"steam-profile"},te={class:"profile-header"},se={class:"profile-info"},ae={class:"username-row"},oe={class:"username"},ne={class:"status-badge-group"},le={key:0,class:"status-playing"},ie={key:1,class:"status-playing"},ce=["href"],re={key:1,class:"steam-profile-empty"},me=k({__name:"SteamProfile",props:{user:{},metadata:{default:null}},setup(t){const d=a=>Q[a]||"#90a0a6",l=a=>R[a]||a;return(a,m)=>{const v=z;return t.user?(s(),o("div",ee,[e("div",te,[u(v,{src:t.user.avatar.large,alt:t.user.username,class:"avatar",loading:"lazy"},null,8,["src","alt"]),e("div",se,[e("div",ae,[e("h2",oe,c(t.user.username),1),e("div",ne,[e("div",{class:"status-badge",style:F({"--status-color":d(t.user.status)})},[m[0]||(m[0]=e("span",{class:"status-dot"},null,-1)),N(" "+c(l(t.user.status)),1)],4)])]),t.user.currentGame?(s(),o("p",le," 正在玩 "+c(t.user.currentGame.name),1)):t.user.status==="offline"?(s(),o("p",ie," 用户当前离线 ")):p("",!0),e("a",{href:t.user.profileUrl,target:"_blank",class:"profile-link"}," 访问 Steam 个人资料 → ",8,ce)])])])):(s(),o("div",re,[...m[1]||(m[1]=[e("p",null,"无法加载 Steam 数据",-1)])]))}}}),de=Object.assign(S(me,[["__scopeId","data-v-512e1ec4"]]),{__name:"SteamProfile"}),ue={class:"stats-overview"},_e={class:"stat-card"},ve={class:"stat-info"},ge={class:"stat-value"},pe={class:"stat-card"},he={class:"stat-info"},ye={class:"stat-value"},fe={key:0,class:"stat-card"},$e={class:"stat-info"},ke={class:"stat-value"},Se=k({__name:"SteamStatsOverview",props:{games:{},user:{}},setup(t){return(d,l)=>{const a=D;return s(),o("div",ue,[e("div",_e,[u(a,{name:"ph:game-controller-bold",size:"28",class:"stat-icon"}),e("div",ve,[l[0]||(l[0]=e("div",{class:"stat-label"},"游戏总数",-1)),e("div",ge,c(t.games?.totalCount??0),1)])]),e("div",pe,[u(a,{name:"ph:hourglass-bold",size:"28",class:"stat-icon"}),e("div",he,[l[1]||(l[1]=e("div",{class:"stat-label"},"总游玩时长",-1)),e("div",ye,c(t.user?.playtimeStats?.totalForever??0)+" 小时",1)])]),t.user?.playtimeStats?.totalTwoWeeks?(s(),o("div",fe,[u(a,{name:"ph:calendar-bold",size:"28",class:"stat-icon"}),e("div",$e,[l[2]||(l[2]=e("div",{class:"stat-label"},"最近两周内时长",-1)),e("div",ke,c(h(Z)(t.user.playtimeStats.totalTwoWeeks)),1)])])):p("",!0)])}}}),be=Object.assign(S(Se,[["__scopeId","data-v-19d720e6"]]),{__name:"SteamStatsOverview"}),we=["title"],xe={class:"game-header"},Ce={class:"game-content"},Ge={class:"game-name"},Te={class:"game-meta"},Pe={class:"meta-item"},Me={class:"value"},Ie={key:0,class:"meta-item"},ze={class:"value"},Fe={key:1,class:"meta-item"},De={class:"value"},Ve={key:2,class:"meta-item"},Oe={class:"value"},We={key:3,class:"meta-item"},Le={class:"value"},Ne={key:0,class:"achievements-progress"},je={class:"progress-bar"},Ae={class:"progress-text"},Be={key:1,class:"game-description"},Ee={class:"game-footer"},Ue=["href"],qe=k({__name:"GameCard",props:{game:{}},setup(t){const d=l=>{window.open(`https://store.steampowered.com/app/${l}`,"_blank")};return(l,a)=>{const m=z;return s(),o("div",{class:"game-card",title:`点击查看 ${t.game.name} 的 Steam 页面`,onClick:a[2]||(a[2]=v=>d(t.game.appid))},[e("div",xe,[u(m,{src:t.game.images.headerImage,alt:t.game.name,class:"header-image",loading:"lazy"},null,8,["src","alt"]),a[3]||(a[3]=e("div",{class:"game-overlay"},null,-1))]),e("div",Ce,[e("h3",Ge,c(t.game.name),1),e("div",Te,[e("div",Pe,[a[4]||(a[4]=e("span",{class:"label"},"总时长:",-1)),e("span",Me,c(t.game.playtimeForever)+" 小时",1)]),t.game.playtimeTwoWeeks!==void 0?(s(),o("div",Ie,[a[5]||(a[5]=e("span",{class:"label"},"最近两周:",-1)),e("span",ze,c(t.game.playtimeTwoWeeks)+" 小时",1)])):p("",!0),t.game.achievements?(s(),o("div",Fe,[a[6]||(a[6]=e("span",{class:"label"},"成就:",-1)),e("span",De,c(t.game.achievements.unlocked)+"/"+c(t.game.achievements.total),1)])):p("",!0),t.game.releaseDate?(s(),o("div",Ve,[a[7]||(a[7]=e("span",{class:"label"},"发布:",-1)),e("span",Oe,c(t.game.releaseDate),1)])):p("",!0),t.game.price?(s(),o("div",We,[a[8]||(a[8]=e("span",{class:"label"},"价格:",-1)),e("span",Le,c(t.game.price.displayPrice),1)])):p("",!0)]),t.game.achievements?(s(),o("div",Ne,[e("div",je,[e("div",{class:j(["progress-fill",{"progress-complete":t.game.achievements.percentage===100}]),style:F({width:`${t.game.achievements.percentage}%`})},null,6)]),e("span",Ae,"成就进度: "+c(t.game.achievements.percentage)+"%",1)])):p("",!0),t.game.shortDescription?(s(),o("p",Be,c(t.game.shortDescription),1)):p("",!0),e("div",Ee,[e("a",{class:"steam-link",href:`https://store.steampowered.com/app/${t.game.appid}`,target:"_blank",rel:"noopener noreferrer",onClick:a[0]||(a[0]=M(()=>{},["stop"])),onMousedown:a[1]||(a[1]=M(()=>{},["stop"]))}," 在 Steam 中查看 → ",40,Ue)])])],8,we)}}}),He=Object.assign(S(qe,[["__scopeId","data-v-91115e49"]]),{__name:"GameCard"}),P=12,Qe={class:"tab-content"},Re={key:0},Ze={key:0,class:"games-scroll"},Je={class:"games-scroll-container"},Ke={key:1,class:"games-grid"},Xe={key:1,class:"empty-state"},Ye={class:"tab-content"},et={class:"games-toolbar"},tt={class:"game-count"},st={key:0},at={key:0,class:"games-scroll"},ot={class:"games-scroll-container"},nt={key:1,class:"games-grid"},lt={key:1,class:"empty-state"},it={key:0},ct={key:1},rt={key:2,class:"pagination-control"},mt=k({__name:"SteamGamesTabs",props:{games:{}},setup(t){const d=t,l=y(""),a=y(1),m=y(!1),v=w(()=>{const _=d.games?.allGames;return _?_.map(n=>({...n,playtimeForever:typeof n.playtimeForever=="number"?Math.round(n.playtimeForever):0,playtimeTwoWeeks:n.playtimeTwoWeeks?Math.round(n.playtimeTwoWeeks):0})):[]}),g=w(()=>{if(!v.value)return[];let _=[...v.value];if(l.value.trim()){const n=l.value.toLowerCase();_=_.filter(r=>r.name.toLowerCase().includes(n))}return _.sort((n,r)=>r.playtimeForever-n.playtimeForever)}),f=w(()=>Math.ceil(g.value.length/P)),b=w(()=>{const _=(a.value-1)*P;return g.value.slice(_,_+P)});return V(()=>{m.value=!0}),(_,n)=>{const r=He,G=K,T=X;return s(),$(T,{tabs:["最近游戏","游戏库"],center:""},{tab1:I(()=>[e("div",Qe,[d.games?.recentGames&&d.games.recentGames.length>0?(s(),o("div",Re,[m.value?(s(),o("div",Ze,[e("div",Je,[(s(!0),o(x,null,C(d.games.recentGames,i=>(s(),$(r,{key:i.appid,game:i,class:"games-scroll-item"},null,8,["game"]))),128))])])):(s(),o("div",Ke,[(s(!0),o(x,null,C(d.games.recentGames,i=>(s(),$(r,{key:i.appid,game:i},null,8,["game"]))),128))]))])):(s(),o("div",Xe,[...n[2]||(n[2]=[e("p",null,"暂无最近游戏数据",-1)])]))])]),tab2:I(()=>[e("div",Ye,[e("div",et,[A(e("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>l.value=i),type:"text",placeholder:"搜索游戏...",class:"search-input"},null,512),[[B,l.value]]),e("div",tt,c(g.value.length)+" / "+c(d.games?.totalCount??0),1)]),g.value.length>0?(s(),o("div",st,[m.value?(s(),o("div",at,[e("div",ot,[(s(!0),o(x,null,C(g.value,i=>(s(),$(r,{key:i.appid,game:i,class:"games-scroll-item"},null,8,["game"]))),128))])])):(s(),o("div",nt,[(s(!0),o(x,null,C(b.value,i=>(s(),$(r,{key:i.appid,game:i},null,8,["game"]))),128))]))])):(s(),o("div",lt,[l.value?(s(),o("p",it,"没有找到匹配的游戏")):(s(),o("p",ct,"暂无游戏数据"))])),!m.value&&f.value>1?(s(),o("div",rt,[u(G,{modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=i=>a.value=i),class:"pagination","total-pages":f.value},null,8,["modelValue","total-pages"])])):p("",!0)])]),_:1})}}}),dt=Object.assign(S(mt,[["__scopeId","data-v-a6905d37"]]),{__name:"SteamGamesTabs"}),ut={class:"steam-page"},_t={class:"mobile-only"},vt={key:0,class:"loading-state"},gt={key:1,class:"error-state"},pt={key:2,class:"steam-content"},ht=k({__name:"steam",setup(t){const d=E(),l=U();q({title:"Steam",meta:[{name:"description",content:`${d.author.name} 的 Steam 个人资料，查看完整的游戏库、游戏时长、成就等信息。`},{property:"og:type",content:"profile"},{name:"keywords",content:"Steam,游戏库,游戏时长,成就"}]}),l.setAside(["blog-tech","comm-group"]);const{fetchSteamData:a}=J(),m=y(!0),v=y(!1),g=y(null),f=y(null),b=y(null);return V(async()=>{try{const n=await a();n.success&&n.data?(g.value=n.data.user,f.value=n.data.games,b.value=n.allMetadata):v.value=!0}catch(n){console.error("Failed to fetch Steam data:",n),v.value=!0}finally{m.value=!1}}),(n,r)=>{const G=H,T=D,i=de,O=be,W=dt,L=Y;return s(),o("div",ut,[e("div",_t,[u(G,{to:"/",suffix:"Steam"})]),h(m)?(s(),o("div",vt,[...r[0]||(r[0]=[e("div",{class:"spinner"},null,-1),e("p",null,"加载 Steam 数据中...",-1)])])):h(v)?(s(),o("div",gt,[u(T,{name:"ph:warning-bold",size:"36"}),r[1]||(r[1]=e("p",null,"无法加载 Steam 数据",-1)),r[2]||(r[2]=e("p",{class:"error-detail"},"请检查 API 是否可用",-1))])):(s(),o("div",pt,[u(i,{user:h(g),metadata:h(b)},null,8,["user","metadata"]),u(O,{games:h(f),user:h(g)},null,8,["games","user"]),u(W,{games:h(f)},null,8,["games"])])),u(L)])}}}),wt=S(ht,[["__scopeId","data-v-5e00d49f"]]);export{wt as default};
