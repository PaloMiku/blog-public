const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BX195yHf.js","./G_R_oOSr.js","./entry.Bp-4TZiy.css","./Hz-qS8wY.js","./DCfs0kZU.js","./SteamProfileSection.DsnGfMOG.css","./D-tGBb6M.js","./SteamStatsOverview.CkOMBE9G.css","./J-uVG9J9.js","./B-Q7bu-f.js","./0pYs9o80.js","./Pagination.DEKPXboi.css","./CoXVAd0R.js","./Tab.B_z8VZ-t.css","./SteamGamesTabs.DXkaLAYX.css"])))=>i.map(i=>d[i]);
import{d as z,B,C as T,E as M,r as u,c,N,o as O,k as _,h as m,j as t,l as E,i,G as q,u as o,q as H,f,w as l,Q as g,S as y,R as S,z as Q}from"#entry";import $ from"./CoXVAd0R.js";import{_ as j}from"./-_qGLppl.js";import{u as Z}from"./DCfs0kZU.js";const J={class:"steam-page"},K={class:"mobile-only"},U={key:0,class:"loading-state"},W={key:1,class:"error-state"},X={class:"steam-content"},Y={class:"profile-section"},G=12,ee=z({__name:"steam",setup(te){const L=B(),P=T();M({title:"Steam",meta:[{name:"description",content:`${L.author.name} 的 Steam 个人资料，查看完整的游戏库、游戏时长、成就等信息。`},{property:"og:type",content:"profile"},{name:"keywords",content:"Steam,游戏库,游戏时长,成就"}]}),P.setAside(["blog-tech","comm-group"]);const{fetchSteamData:h}=Z(),A=g(()=>S(()=>import("./BX195yHf.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),F=g(()=>S(()=>import("./D-tGBb6M.js"),__vite__mapDeps([6,1,2,4,7]),import.meta.url)),D=g(()=>S(()=>import("./J-uVG9J9.js"),__vite__mapDeps([8,1,2,4,9,10,11,12,13,14]),import.meta.url)),d=u(!0),v=u(!1),s=u(null),n=u(null),k=u(null),b=u(1),p=u(""),C=c(()=>{if(!n.value?.allGames)return[];let a=[...n.value.allGames];if(p.value.trim()){const e=p.value.toLowerCase();a=a.filter(r=>r.name.toLowerCase().includes(e))}return a.sort((e,r)=>r.playtimeForever-e.playtimeForever)});c(()=>Math.ceil(C.value.length/G)),c(()=>{const a=(b.value-1)*G,e=a+G;return C.value.slice(a,e)}),N(p,()=>{b.value=1}),c(()=>s.value?.playtimeStats?.totalForever?s.value.playtimeStats.totalForever:n.value?.allGames?n.value.allGames.reduce((a,e)=>a+e.playtimeForever,0):0),c(()=>{if(!s.value?.currentGame||!n.value?.recentGames)return null;const a=n.value.recentGames.find(e=>e.appid===s.value.currentGame.appid);return a&&s.value.currentGame?{...s.value.currentGame,images:a.images}:s.value.currentGame});const w=async()=>{d.value=!0,v.value=!1,await x()},x=async()=>{try{const a=await h();if(a.success&&a.data){if(s.value=a.data.user,n.value=a.data.games,k.value=a.allMetadata,s.value?.currentGame&&n.value?.recentGames){const e=n.value.recentGames.find(r=>r.appid===s.value.currentGame.appid);e&&(s.value.currentGame={...s.value.currentGame,images:e.images})}}else v.value=!0}catch(a){console.error("Failed to fetch Steam data:",a),v.value=!0}finally{d.value=!1}};return O(x),(a,e)=>{const r=q,I=H,R=$,V=j;return m(),_("div",J,[t("div",K,[i(r,{to:"/",suffix:"Steam"})]),o(d)?(m(),_("div",U,[...e[0]||(e[0]=[t("div",{class:"spinner"},null,-1),t("p",null,"加载 Steam 数据中（正在后台获取更丰富数据）...",-1)])])):E("",!0),o(v)?(m(),_("div",W,[i(I,{name:"ph:warning-bold",size:"36"}),e[1]||(e[1]=t("p",null,"无法加载部分 Steam 数据（某些模块可能离线）",-1)),e[2]||(e[2]=t("p",{class:"error-detail"},"请检查 API 是否可用或稍后重试",-1)),t("button",{onClick:w}," 重试 ")])):E("",!0),t("div",X,[t("div",Y,[(m(),f(y,null,{default:l(()=>[i(o(A),{user:o(s),loading:o(d),metadata:o(k),onRefresh:w},null,8,["user","loading","metadata"])]),fallback:l(()=>[...e[3]||(e[3]=[t("div",{class:"steam-profile-skeleton"},[t("div",{class:"skeleton-avatar"}),t("div",{class:"skeleton-info"},[t("div",{class:"skeleton-text"}),t("div",{class:"skeleton-text short"})])],-1)])]),_:1}))]),(m(),f(y,null,{default:l(()=>[i(o(F),{games:o(n),user:o(s)},null,8,["games","user"])]),fallback:l(()=>[...e[4]||(e[4]=[t("div",{class:"stats-overview"},[t("div",{class:"stat-card"},[t("div",{class:"stat-info"},[t("div",{class:"stat-label"},"加载中"),t("div",{class:"stat-value"},"—")])])],-1)])]),_:1})),(m(),f(y,null,{default:l(()=>[i(o(D),{games:o(n)},null,8,["games"])]),fallback:l(()=>[i(R,{tabs:["最近游戏","游戏库"],center:""},{tab1:l(()=>[...e[5]||(e[5]=[t("div",{class:"tab-content"},[t("div",{class:"empty-state"},[t("p",null,"正在加载最近游戏...")])],-1)])]),tab2:l(()=>[...e[6]||(e[6]=[t("div",{class:"tab-content"},[t("div",{class:"empty-state"},[t("p",null,"正在加载游戏库...")])],-1)])]),_:1})]),_:1}))]),i(V)])}}}),le=Q(ee,[["__scopeId","data-v-aad0e5c0"]]);export{le as default};
