import{_ as d}from"./BNF9Wa2h.js";import{_ as b}from"./9Z4Bl25k.js";import{u as v,q as n}from"#entry";import{J as g,r as u,A as $,bn as h,k as w,M as C,N as x,aM as y,aN as j,aT as B,aR as T}from"./BOu4zRvQ.js";import{u as A}from"./DsPHv7z9.js";import{t as N,g as S}from"./DLB8KaLf.js";import{_ as k}from"./DGULe4rZ.js";const D=g({__name:"BlogStats",async setup(E){let s,m;const i=v(),p=$(),l=u(p.public.buildTime),r=u(i.component.stats.wordCount),c=u(""),{data:t,error:M}=([s,m]=h(()=>A("blog-stats",()=>$fetch("/api/stats").catch(()=>null))),s=await s,m(),s);t&&t.value&&(r.value=n(t.value.total.words),c.value=Object.entries(t.value.annual).reverse().map(([a,e])=>`${a}年：${e.posts}篇，${n(e.words)}字`).join(`
`));const _=[{label:"运营时长",value:N(i.timeEstablished),tip:`博客于${i.timeEstablished}上线`},{label:"上次更新",value:()=>C(k,{datetime:p.public.buildTime,relative:!0}),tip:w(()=>`构建于${l.value}`)},{label:"总字数",value:r,tip:c}];return x(async()=>{if(l.value=S(l.value),!t||!t.value){const a=await $fetch("/api/stats").catch(()=>null);if(!a)return;r.value=n(a.total.words),c.value=Object.entries(a.annual).reverse().map(([e,o])=>`${e}年：${o.posts}篇，${n(o.words)}字`).join(`
`)}}),(a,e)=>{const o=d,f=b;return j(),y(f,{card:"",title:"博客统计"},{default:B(()=>[T(o,{items:_})]),_:1})}}}),L=Object.assign(D,{__name:"WidgetBlogStats"});export{L as default};
