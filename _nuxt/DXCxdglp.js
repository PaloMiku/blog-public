import{u as y,a as N,o as k,n as x}from"#entry";import{u as C}from"./D79ToHUB.js";import{k as f,Z as _,r as I,J as V,bp as M,bq as T,be as $,N as A,aD as E,Q as u,aN as c,aU as m,b7 as h,a_ as S,aZ as v,K as b,aR as P,aV as B,b5 as F,b4 as Z}from"./BOu4zRvQ.js";function Y(i,n){const e=y(),{initialPage:a=1,perPage:o=e.pagination.perPage||10,bindQuery:s=!1}=n??{},r=f(()=>Math.ceil(_(i).length/o)||a);function p(t){const g=Number(t);return g>=1&&g<=r.value?g:a}const l=s?C(s,a.toString(),{transform:p,mode:"push"}):I(a),d=f(()=>{const t=(l.value-1)*o;return _(i).slice(t,t+o)});return{totalPages:r,page:l,listPaged:d}}function w(i,n,e=1){const a=Math.max(2,Math.min(i-e,n-2*e)),o=Math.min(n,a+2*e),s=Array.from({length:o-a+1},(r,p)=>a+p);return a>3&&s.unshift(Number.NEGATIVE_INFINITY),a===3&&s.unshift(2),a>1&&s.unshift(1),o<n-2&&s.push(Number.POSITIVE_INFINITY),o===n-2&&s.push(n-1),o<n&&s.push(n),s}const Q=["aria-label"],R=["aria-label","onClick","textContent"],q={key:1,disabled:"",class:"pagination-num"},z={ref:"pagination-anchor"},D=V({__name:"Pagination",props:M({totalPages:{},expandPages:{},sticky:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const n=i,e=T(i,"modelValue"),a=f(()=>w(e.value,n.totalPages,n.expandPages??2)),o=N(),s=$("pagination-anchor"),r=k(s);return A(()=>{o.setTranslate("pagination","0, -2em"),e.value=Number(e.value)}),E(()=>{o.setTranslate("pagination","")}),(p,l)=>{const d=x;return c(),u(m,null,[h("nav",{class:v(["pagination",{sticky:i.sticky,expand:b(r)}]),"aria-label":`第${e.value}页，共${i.totalPages}页`,style:S({"--collapsed-width":`${b(a).length*2+6}em`})},[P(d,{disabled:e.value<=1,class:"pagination-button rtl-flip",icon:"ph:arrow-fat-left-duotone","aria-label":"上一页",onClick:l[0]||(l[0]=t=>e.value--)},null,8,["disabled"]),(c(!0),u(m,null,B(b(a),t=>(c(),u(m,{key:t},[Number.isFinite(t)?(c(),u("button",{key:0,class:v(["pagination-num",{active:t===e.value}]),"aria-label":`第${t}页`,onClick:g=>e.value=t,textContent:F(t)},null,10,R)):(c(),u("button",q," … "))],64))),128)),P(d,{disabled:e.value>=i.totalPages,class:"pagination-button rtl-flip",icon:"ph:arrow-fat-right-duotone","aria-label":"下一页",onClick:l[1]||(l[1]=t=>e.value++)},null,8,["disabled"])],14,Q),h("div",z,null,512)],64)}}}),j=Object.assign(Z(D,[["__scopeId","data-v-437807fc"]]),{__name:"ZPagination"});export{j as _,Y as u};
