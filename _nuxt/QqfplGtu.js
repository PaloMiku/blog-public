import{d as b,c as l,aq as f,r as u,o as _,aW as k,aX as g,k as i,h as s,l as z,u as a,n as p,y as $}from"./CHo8vIOb.js";const R=["poster","src"],B=["src"],E=b({__name:"VideoEmbed",props:{type:{default:"raw"},id:{},autoplay:{type:Boolean},ratio:{},poster:{},width:{},height:{default:"80vh"},zoom:{}},setup(y){const e=y,m=l(()=>{if(e.ratio)return e.ratio;switch(e.type){case"raw":return;case"douyin":return"27 / 56";case"douyin-wide":return"1198 / 731";default:return"16 / 9"}}),n=l(()=>{switch(e.type){case"bilibili":return`https://player.bilibili.com/player.html?bvid=${e.id}&autoplay=${e.autoplay}`;case"youtube":return`https://www.youtube.com/embed/${e.id}?rel=0&disablekb=1&playsinline=1&autoplay=${e.autoplay}`;case"douyin":return`https://open.douyin.com/player/video?vid=${e.id}`;case"douyin-wide":return`https://open.douyin.com/player/video?vid=${e.id}`;case"tiktok":return`https://www.tiktok.com/embed/v3/${e.id}`;default:return e.id}}),d=f("video-player"),r=u(e.type==="douyin-wide"),c=u(r.value?.1:e.zoom),h={douyin:.0031,"douyin-wide":.00134};return _(()=>{r.value&&k(d,([t])=>{r.value=!t?.isIntersecting}),(e.type==="douyin"||e.type==="douyin-wide")&&g(d,([t])=>{if(!t)return;const{width:w}=t.contentRect,v=Reflect.get(h,e.type);c.value=w*v})}),(o,t)=>(s(),i("div",{ref:"video-player",class:"video",style:p({aspectRatio:a(m),maxWidth:o.width,maxHeight:o.height})},[o.type==="raw"?(s(),i("video",{key:0,poster:o.poster,src:a(n),controls:""},null,8,R)):a(r)?z("",!0):(s(),i("iframe",{key:1,src:a(n),style:p({zoom:a(c)}),scrolling:"no",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,12,B))],4))}}),V=Object.assign($(E,[["__scopeId","data-v-de7811a9"]]),{__name:"VideoEmbed"});export{V as default};
