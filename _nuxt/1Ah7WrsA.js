import{h as u}from"./D8rieOMo.js";import{G as h,ag as r,az as l,aN as k,a6 as U,aO as $}from"./oTbPvoPM.js";function x(n,a,t){const[e={},o]=typeof a=="string"?[{},a]:[a,t],s=h(()=>r(n)),c=h(()=>r(e.key)||"$f"+u([o,typeof s.value=="string"?s.value:"",...q(e)]));if(!e.baseURL&&typeof s.value=="string"&&s.value[0]==="/"&&s.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:p,lazy:y,default:m,transform:d,pick:b,watch:f,immediate:v,getCachedData:w,deep:g,dedupe:O,timeout:D,...F}=e,i=l({...k,...F,cache:typeof e.cache=="boolean"?void 0:e.cache}),_={server:p,lazy:y,default:m,transform:d,pick:b,immediate:v,getCachedData:w,deep:g,dedupe:O,timeout:D,watch:f===!1?[]:[...f||[],i]};return U(f===!1?c.value:c,(E,{signal:j})=>(e.$fetch||globalThis.$fetch)(s.value,{signal:j,...i}),_)}function q(n){const a=[r(n.method)?.toUpperCase()||"GET",r(n.baseURL)];for(const t of[n.query||n.params]){const e=r(t);if(!e)continue;const o={};for(const[s,c]of Object.entries(e))o[r(s)]=r(c);a.push(o)}if(n.body){const t=r(n.body);if(!t)a.push(u(t));else if(t instanceof ArrayBuffer)a.push(u(Object.fromEntries([...new Uint8Array(t).entries()].map(([e,o])=>[e,o.toString()]))));else if(t instanceof FormData){const e={};for(const o of t.entries()){const[s,c]=o;e[s]=c instanceof File?c.name:c}a.push(u(e))}else if($(t))a.push(u(l(t)));else try{a.push(u(t))}catch{console.warn("[useFetch] Failed to hash body",t)}}return a}export{x as u};
