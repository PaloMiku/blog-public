import{d as S,k as o,h as s,j as e,i as m,n as W,l as _,t as c,p as N,y as E,z as w,q as V,u as $,Q as j,R as D,r as h,c as C,o as O,f as b,w as G,S as A,U as B,F as T,v as P,V as L,B as R,C as U,E as H,G as q,W as Q}from"#entry";import{s as Z,a as J,f as K,u as X}from"./D8BxnqMY.js";import{_ as Y}from"./CWaBcNbD.js";import ee from"./DpSQzQO_.js";import{_ as te}from"./CMMiuOSC.js";import"./OJGff-Yi.js";const se={key:0,class:"steam-profile"},ae={class:"profile-header"},oe={class:"profile-info"},ne={class:"username-row"},le={class:"username"},ie={class:"status-badge-group"},re={key:0,class:"status-playing"},ce={key:1,class:"status-playing"},me=["href"],de={key:1,class:"steam-profile-empty"},ue=S({__name:"SteamProfile",props:{user:{},metadata:{default:null}},setup(t){const u=a=>Z[a]||"#90a0a6",i=a=>J[a]||a;return(a,d)=>{const v=W;return t.user?(s(),o("div",se,[e("div",ae,[m(v,{src:t.user.avatar.large,alt:t.user.username,class:"avatar",loading:"lazy"},null,8,["src","alt"]),e("div",oe,[e("div",ne,[e("h2",le,c(t.user.username),1),e("div",ie,[e("div",{class:"status-badge",style:N({"--status-color":u(t.user.status)})},[d[0]||(d[0]=e("span",{class:"status-dot"},null,-1)),E(" "+c(i(t.user.status)),1)],4)])]),t.user.currentGame?(s(),o("p",re," 正在玩 "+c(t.user.currentGame.name),1)):t.user.status==="offline"?(s(),o("p",ce," 用户当前离线 ")):_("",!0),e("a",{href:t.user.profileUrl,target:"_blank",class:"profile-link"}," 访问 Steam 个人资料 → ",8,me)])])])):(s(),o("div",de,[...d[1]||(d[1]=[e("p",null,"无法加载 Steam 数据",-1)])]))}}}),ve=Object.assign(w(ue,[["__scopeId","data-v-512e1ec4"]]),{__name:"SteamProfile"}),_e={class:"stats-overview"},ge={class:"stat-card"},pe={class:"stat-info"},he={class:"stat-value"},fe={class:"stat-card"},ye={class:"stat-info"},$e={class:"stat-value"},ke={key:0,class:"stat-card"},be={class:"stat-info"},Se={class:"stat-value"},we=S({__name:"SteamStatsOverview",props:{games:{},user:{}},setup(t){return(u,i)=>{const a=V;return s(),o("div",_e,[e("div",ge,[m(a,{name:"ph:game-controller-bold",size:"28",class:"stat-icon"}),e("div",pe,[i[0]||(i[0]=e("div",{class:"stat-label"},"游戏总数",-1)),e("div",he,c(t.games?.totalCount??0),1)])]),e("div",fe,[m(a,{name:"ph:hourglass-bold",size:"28",class:"stat-icon"}),e("div",ye,[i[1]||(i[1]=e("div",{class:"stat-label"},"总游玩时长",-1)),e("div",$e,c(t.user?.playtimeStats?.totalForever??0)+" 小时",1)])]),t.user?.playtimeStats?.totalTwoWeeks?(s(),o("div",ke,[m(a,{name:"ph:calendar-bold",size:"28",class:"stat-icon"}),e("div",be,[i[2]||(i[2]=e("div",{class:"stat-label"},"最近两周内时长",-1)),e("div",Se,c($(K)(t.user.playtimeStats.totalTwoWeeks)),1)])])):_("",!0)])}}}),xe=Object.assign(w(we,[["__scopeId","data-v-19d720e6"]]),{__name:"SteamStatsOverview"}),Ce=["title"],Ge={class:"game-header"},Te={class:"game-content"},Pe={class:"game-name"},Ie={class:"game-meta"},Me={class:"meta-item"},ze={class:"value"},Fe={key:0,class:"meta-item"},Ve={class:"value"},De={key:1,class:"meta-item"},Le={class:"value"},We={key:2,class:"meta-item"},Ne={class:"value"},Oe={key:3,class:"meta-item"},Ee={class:"value"},je={key:0,class:"achievements-progress"},Ae={class:"progress-bar"},Be={class:"progress-text"},Re={key:1,class:"game-description"},Ue={class:"game-footer"},He=["href"],qe=S({__name:"GameCard",props:{game:{}},setup(t){const u=i=>{window.open(`https://store.steampowered.com/app/${i}`,"_blank")};return(i,a)=>{const d=W;return s(),o("div",{class:"game-card",title:`点击查看 ${t.game.name} 的 Steam 页面`,onClick:a[2]||(a[2]=v=>u(t.game.appid))},[e("div",Ge,[m(d,{src:t.game.images.headerImage,alt:t.game.name,class:"header-image",loading:"lazy"},null,8,["src","alt"]),a[3]||(a[3]=e("div",{class:"game-overlay"},null,-1))]),e("div",Te,[e("h3",Pe,c(t.game.name),1),e("div",Ie,[e("div",Me,[a[4]||(a[4]=e("span",{class:"label"},"总时长:",-1)),e("span",ze,c(t.game.playtimeForever)+" 小时",1)]),t.game.playtimeTwoWeeks!==void 0?(s(),o("div",Fe,[a[5]||(a[5]=e("span",{class:"label"},"最近两周:",-1)),e("span",Ve,c(t.game.playtimeTwoWeeks)+" 小时",1)])):_("",!0),t.game.achievements?(s(),o("div",De,[a[6]||(a[6]=e("span",{class:"label"},"成就:",-1)),e("span",Le,c(t.game.achievements.unlocked)+"/"+c(t.game.achievements.total),1)])):_("",!0),t.game.releaseDate?(s(),o("div",We,[a[7]||(a[7]=e("span",{class:"label"},"发布:",-1)),e("span",Ne,c(t.game.releaseDate),1)])):_("",!0),t.game.price?(s(),o("div",Oe,[a[8]||(a[8]=e("span",{class:"label"},"价格:",-1)),e("span",Ee,c(t.game.price.displayPrice),1)])):_("",!0)]),t.game.achievements?(s(),o("div",je,[e("div",Ae,[e("div",{class:j(["progress-fill",{"progress-complete":t.game.achievements.percentage===100}]),style:N({width:`${t.game.achievements.percentage}%`})},null,6)]),e("span",Be,"成就进度: "+c(t.game.achievements.percentage)+"%",1)])):_("",!0),t.game.shortDescription?(s(),o("p",Re,c(t.game.shortDescription),1)):_("",!0),e("div",Ue,[e("a",{class:"steam-link",href:`https://store.steampowered.com/app/${t.game.appid}`,target:"_blank",rel:"noopener noreferrer",onClick:a[0]||(a[0]=D(()=>{},["stop"])),onMousedown:a[1]||(a[1]=D(()=>{},["stop"]))}," 在 Steam 中查看 → ",40,He)])])],8,Ce)}}}),Qe=Object.assign(w(qe,[["__scopeId","data-v-e9c6bc99"]]),{__name:"GameCard"}),F=12,Ze={class:"tab-content"},Je={key:0},Ke={key:0,class:"games-scroll"},Xe={key:0,class:"scroll-hint"},Ye={key:1,class:"games-grid"},et={key:1,class:"empty-state"},tt={class:"tab-content"},st={class:"games-toolbar"},at={class:"game-count"},ot={key:0},nt={key:0,class:"games-scroll"},lt={key:0,class:"scroll-hint"},it={key:1,class:"games-grid"},rt={key:1,class:"empty-state"},ct={key:0},mt={key:1},dt={key:2,class:"pagination-control"},ut=S({__name:"SteamGamesTabs",props:{games:{}},setup(t){const u=t,i=h(""),a=h(1),d=h(!1),v=h(!0),y=h(),k=C(()=>{const l=u.games?.allGames;return l?l.map(n=>({...n,playtimeForever:typeof n.playtimeForever=="number"?Math.round(n.playtimeForever):0,playtimeTwoWeeks:n.playtimeTwoWeeks?Math.round(n.playtimeTwoWeeks):0})):[]}),f=C(()=>{if(!k.value)return[];let l=[...k.value];if(i.value.trim()){const n=i.value.toLowerCase();l=l.filter(p=>p.name.toLowerCase().includes(n))}return l.sort((n,p)=>p.playtimeForever-n.playtimeForever)}),I=C(()=>Math.ceil(f.value.length/F)),g=C(()=>{const l=(a.value-1)*F;return f.value.slice(l,l+F)});return O(()=>{if(d.value=!0,y.value){const l=y.value,n=()=>{l.scrollLeft>10&&(v.value=!1)};l.addEventListener("scroll",n,{once:!0})}setTimeout(()=>{v.value=!1},5e3)}),(l,n)=>{const p=Qe,x=V,M=Y,z=ee;return s(),b(z,{tabs:["最近游戏","游戏库"],center:""},{tab1:G(()=>[e("div",Ze,[u.games?.recentGames&&u.games.recentGames.length>0?(s(),o("div",Je,[d.value?(s(),o("div",Ke,[e("div",{class:"games-scroll-container",ref_key:"scrollContainerRef",ref:y},[(s(!0),o(T,null,P(u.games.recentGames,r=>(s(),b(p,{key:r.appid,game:r,class:"games-scroll-item"},null,8,["game"]))),128))],512),m(L,{name:"fade"},{default:G(()=>[v.value?(s(),o("div",Xe,[m(x,{name:"ph:arrow-right-bold",class:"scroll-hint-icon"}),n[2]||(n[2]=e("span",null,"左右滑动查看更多",-1))])):_("",!0)]),_:1})])):(s(),o("div",Ye,[(s(!0),o(T,null,P(u.games.recentGames,r=>(s(),b(p,{key:r.appid,game:r},null,8,["game"]))),128))]))])):(s(),o("div",et,[...n[3]||(n[3]=[e("p",null,"暂无最近游戏数据",-1)])]))])]),tab2:G(()=>[e("div",tt,[e("div",st,[A(e("input",{"onUpdate:modelValue":n[0]||(n[0]=r=>i.value=r),type:"text",placeholder:"搜索游戏...",class:"search-input"},null,512),[[B,i.value]]),e("div",at,c(f.value.length)+" / "+c(u.games?.totalCount??0),1)]),f.value.length>0?(s(),o("div",ot,[d.value?(s(),o("div",nt,[e("div",{class:"games-scroll-container",ref_key:"scrollContainerRef",ref:y},[(s(!0),o(T,null,P(f.value,r=>(s(),b(p,{key:r.appid,game:r,class:"games-scroll-item"},null,8,["game"]))),128))],512),m(L,{name:"fade"},{default:G(()=>[v.value&&f.value.length>2?(s(),o("div",lt,[m(x,{name:"ph:arrow-right-bold",class:"scroll-hint-icon"}),n[4]||(n[4]=e("span",null,"左右滑动查看更多",-1))])):_("",!0)]),_:1})])):(s(),o("div",it,[(s(!0),o(T,null,P(g.value,r=>(s(),b(p,{key:r.appid,game:r},null,8,["game"]))),128))]))])):(s(),o("div",rt,[i.value?(s(),o("p",ct,"没有找到匹配的游戏")):(s(),o("p",mt,"暂无游戏数据"))])),!d.value&&I.value>1?(s(),o("div",dt,[m(M,{modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=r=>a.value=r),class:"pagination","total-pages":I.value},null,8,["modelValue","total-pages"])])):_("",!0)])]),_:1})}}}),vt=Object.assign(w(ut,[["__scopeId","data-v-d8a6ea72"]]),{__name:"SteamGamesTabs"}),_t={class:"steam-page"},gt={class:"mobile-only"},pt={key:0,class:"loading-state"},ht={key:1,class:"error-state"},ft={key:2,class:"steam-content"},yt=S({__name:"steam",setup(t){const u=R(),i=U();H({title:"Steam",meta:[{name:"description",content:`${u.author.name} 的 Steam 个人资料，查看完整的游戏库、游戏时长、成就等信息。`},{property:"og:type",content:"profile"},{name:"keywords",content:"Steam,游戏库,游戏时长,成就"}]}),i.setAside(["blog-tech","comm-group"]);const{fetchSteamData:a}=X(),d=h(!0),v=h(!1),y=h(null),k=h(null),f=h(null);return O(async()=>{try{const g=await a();g.success&&g.data?(y.value=g.data.user,k.value=g.data.games,f.value=g.allMetadata):v.value=!0}catch(g){console.error("Failed to fetch Steam data:",g),v.value=!0}finally{d.value=!1}}),(g,l)=>{const n=q,p=V,x=ve,M=xe,z=vt,r=te;return s(),o("div",_t,[e("div",gt,[m(n,{to:"/",suffix:"Steam"})]),$(d)?(s(),o("div",pt,[...l[0]||(l[0]=[Q('<div class="loading-container" data-v-99077abd><p class="loading-text" data-v-99077abd>加载 Steam 数据中...</p><div class="progress-bar-container" data-v-99077abd><div class="progress-bar" data-v-99077abd><div class="progress-fill" data-v-99077abd></div></div><p class="loading-detail" data-v-99077abd>正在获取用户信息、游戏库和成就数据...</p></div></div>',1)])])):$(v)?(s(),o("div",ht,[m(p,{name:"ph:warning-bold",size:"36"}),l[1]||(l[1]=e("p",null,"无法加载 Steam 数据",-1)),l[2]||(l[2]=e("p",{class:"error-detail"},"请检查 API 是否可用",-1))])):(s(),o("div",ft,[m(x,{user:$(y),metadata:$(f)},null,8,["user","metadata"]),m(M,{games:$(k),user:$(y)},null,8,["games","user"]),m(z,{games:$(k)},null,8,["games"])])),m(r)])}}}),Ct=w(yt,[["__scopeId","data-v-99077abd"]]);export{Ct as default};
