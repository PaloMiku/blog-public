const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PQvpTQwN.js","./DRHFzPja.js","./entry.BOXdRGuP.css","./Alert.CtchqJiG.css","./DtcbhWdV.js","./CJ6W8aET.js","./Badge.Djnkb4xK.css","./Z1N662xS.js","./Blur.B-jU4pb_.css","./DdY3Eub_.js","./CardList.BNBIpnkI.css","./Cgm572Qo.js","./Chat.Cc32BfL7.css","./PihOl8DM.js","./Copy.DERT5sBC.css","./-XX9Ql7H.js","./BBRatb_y.js","./Folding.C6fCrgQd.css","./CgGvdYq8.js","./Key.D-CsJ-tB.css","./B_ywtala.js","./qmmD9nFm.js","./LinkBanner.B451pqZ3.css","./CyUlZ2ag.js","./LinkCard.CKSSmepd.css","./BRLPeqIv.js","./Pic.BzJZ6rrE.css","./Cx1WjAyK.js","./Poetry.ywBKvOeN.css","./6NpPd5Zh.js","./ProseA.DhJIX4mV.css","./2fogaW-r.js","./ProseCode.a2_W97gt.css","./B8JYJQml.js","./ProseTable.BU7pZ16K.css","./DRPQ3Ny_.js","./Quote.JA7pZPsL.css","./CgJ0bEVO.js","./Tab.D58UhhF5.css","./BQiudxLQ.js","./Timeline.CYXYskMG.css","./DJTa4uGN.js","./Tip.BDWNios4.css","./Cq5_M0-g.js","./VideoEmbed.CdAyS1Kh.css"])))=>i.map(i=>d[i]);
import{d as B,a2 as w,a3 as Y,c as P,a4 as k,a5 as tt,M as et,e as $,a6 as T,a7 as j,a8 as A,a9 as rt,aa as M,ab as nt,ac as l,ad as ot,f as st,V as it,h as F,S as at,u as S,A as ut,o as pt,k as ct,j as I,y as lt}from"#entry";import{f as mt,h as ft}from"./rJCbAzvX.js";import{t as dt}from"./DahzMM98.js";const C=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],_t=["p","h1","h2","h3","h4","h5","h6","li"];function O(t,r){return t.type===r||typeof t.type=="object"&&t.type.tag===r||t.tag===r}function x(t){return O(t,"text")||O(t,Symbol.for("v-txt"))}function N(t){return Array.isArray(t.children)||typeof t.children=="string"?t.children:typeof t.children?.default=="function"?t.children.default():[]}function R(t){if(!t)return"";if(Array.isArray(t))return t.map(R).join("");if(x(t))return t.value||t.children||"";const r=N(t);return Array.isArray(r)?r.map(R).filter(Boolean).join(""):""}function H(t,r=[]){if(Array.isArray(t))return t.flatMap(n=>H(n,r));let e=t;return r.some(n=>n==="*"||O(t,n))&&(e=N(t)||t,!Array.isArray(e)&&_t.some(n=>O(t,n))&&(e=[e])),e}function q(t,r=[]){return t=Array.isArray(t)?t:[t],r.length?t.flatMap(e=>q(H(e,[r[0]]),r.slice(1))).filter(e=>!(x(e)&&R(e).trim()==="")):t}function U(t,r=[]){return typeof r=="string"&&(r=r.split(/[,\s]/).map(e=>e.trim()).filter(Boolean)),r.length?q(t,r).reduce((e,n)=>(x(n)?typeof e[e.length-1]=="string"?e[e.length-1]+=n.children:e.push(n.children):e.push(n),e),[]):t}function gt(t,r){return r.reduce((e,n)=>{const o=yt(t,n);return o!==void 0&&(e[n]=o),e},{})}function yt(t,r){return r.split(".").reduce((e,n)=>e&&e[n],t)}const L="default",K=/^@|^v-on:/,z=/^:|^v-bind:/,ht=/^v-model/,vt=["select","textarea","input"],bt=["math","svg"],Pt=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(t=>[t,`prose-${t}`])),Tt=B({name:"MDCRenderer",props:{body:{type:Object,required:!0},data:{type:Object,default:()=>({})},class:{type:[String,Object],default:void 0},tag:{type:[String,Boolean],default:void 0},prose:{type:Boolean,default:void 0},components:{type:Object,default:()=>({})},unwrap:{type:[Boolean,String],default:!1}},async setup(t){const e=Y()?.appContext?.app?.$nuxt,n=e?.$route||e?._route,{mdc:o}=e?.$config?.public||{},i=P(()=>({...o?.components?.prose&&t.prose!==!1?Pt:{},...o?.components?.map||{},...k(t.data?.mdc?.components||{}),...t.components})),c=P(()=>{const a=(t.body?.children||[]).map(u=>u.tag||u.type).filter(u=>!C.includes(u));return Array.from(new Set(a)).sort().join(".")}),p=tt({...t.data});et(()=>t.data,a=>{Object.assign(p,a)}),await xt(t.body,{tags:i.value});function m(a,u){const _=a.split(".").length-1;return a.split(".").reduce((g,y,E)=>E==_&&g?(g[y]=u,g[y]):typeof g=="object"?g[y]:void 0,p)}return{tags:i,contentKey:c,route:n,runtimeData:p,updateRuntimeData:m}},render(t){const{tags:r,tag:e,body:n,data:o,contentKey:i,route:c,unwrap:p,runtimeData:m,updateRuntimeData:a}=t;if(!n)return null;const u={...o,tags:r,$route:c,runtimeData:m,updateRuntimeData:a},_=e!==!1?V(e||u.component?.name||u.component||"div"):void 0;return _?w(_,{...u.component?.props,class:t.class,...this.$attrs,key:i},{default:g}):g?.();function g(){const y=W(n,w,{documentMeta:u,parentScope:u,resolveComponent:V});return y?.default?p?U(y.default(),typeof p=="string"?p.split(" "):["*"]):y.default():null}}});function Et(t,r,e,n){const{documentMeta:o,parentScope:i,resolveComponent:c}=e;if(t.type==="text")return r(A,t.value);if(t.type==="comment")return r(rt,null,t.value);const p=t.tag,m=Z(t,o.tags);if(t.tag==="binding")return Ct(t,r,o,i);const a=Q(m)?g=>g:c;if(m==="script")return r("pre",{class:"script-to-pre"},`<script>
`+R(t)+`
<\/script>`);const u=a(m);typeof u=="object"&&(u.tag=p);const _=At(t,o);return n&&(_.key=n),r(u,_,W(t,r,{documentMeta:o,parentScope:{...i,..._},resolveComponent:a}))}function W(t,r,e){const{documentMeta:n,parentScope:o,resolveComponent:i}=e,p=(t.children||[]).reduce((a,u)=>{if(!Lt(u))return a[L].children.push(u),a;const _=jt(u);return a[_]=a[_]||{props:{},children:[]},u.type==="element"&&(a[_].props=u.props,a[_].children.push(...u.children||[])),a},{[L]:{props:{},children:[]}});return Object.entries(p).reduce((a,[u,{props:_,children:g}])=>(g.length&&(a[u]=(y={})=>{const E=gt(y,Object.keys(_||{}));let s=g.map((f,d)=>Et(f,r,{documentMeta:n,parentScope:{...o,...E},resolveComponent:i},String(f.props?.key||d)));return _?.unwrap&&(s=U(s,_.unwrap)),Vt(s)}),a),{})}function Ct(t,r,e,n={}){const o={...e.runtimeData,...n,$document:e,$doc:e},i=/\.|\[(\d+)\]/,p=(t.props?.value.trim().split(i).filter(Boolean)).reduce((a,u)=>{if(a&&u in a)return typeof a[u]=="function"?a[u]():a[u]},o),m=t.props?.defaultValue;return r(A,p??m??"")}function At(t,r){const{tag:e="",props:n={}}=t;return Object.keys(n).reduce(function(o,i){if(i==="__ignoreMap")return o;const c=n[i];if(ht.test(i))return Ot(i,c,o,r,{native:vt.includes(e)});if(i==="v-bind")return Rt(i,c,o,r);if(K.test(i))return Dt(i,c,o,r);if(z.test(i))return It(i,c,o,r);const{attribute:p}=mt(ft,i);return Array.isArray(c)&&c.every(m=>typeof m=="string")?(o[p]=c.join(" "),o):(o[p]=c,o)},{})}function Ot(t,r,e,n,{native:o}){const i=t.match(/^v-model:([^=]+)/)?.[1]||"modelValue",c=o?"value":i,p=o?"onInput":`onUpdate:${i}`;return e[c]=D(r,n.runtimeData),e[p]=m=>{n.updateRuntimeData(r,o?m.target?.value:m)},e}function Rt(t,r,e,n){const o=D(r,n);return e=Object.assign(e,o),e}function Dt(t,r,e,n){return t=t.replace(K,""),e.on=e.on||{},e.on[t]=()=>D(r,n),e}function It(t,r,e,n){return t=t.replace(z,""),e[t]=D(r,n),e}const V=t=>{if(typeof t=="string"){if(C.includes(t))return t;const r=$(T(t),!1);return!t||r?.name==="AsyncComponentWrapper"||typeof r=="string"?r:"setup"in r?j(()=>new Promise(e=>e(r))):r}return t};function D(t,r){const e=t.split(".").reduce((n,o)=>typeof n=="object"?n[o]:void 0,r);return typeof e>"u"?nt(t):e}function jt(t){let r="";for(const e of Object.keys(t.props||{}))if(!(!e.startsWith("#")&&!e.startsWith("v-slot:"))){r=e.split(/[:#]/,2)[1];break}return r||L}function Lt(t){return t.tag==="template"}function Q(t){return bt.includes(t)}function Vt(t){const r=[];for(const e of t){const n=r[r.length-1];e.type===A&&n?.type===A?n.children=n.children+e.children:r.push(e)}return r}async function xt(t,r){if(!t)return;const e=Array.from(new Set(n(t,r)));await Promise.all(e.map(async o=>{if(o?.render||o?.ssrRender||o?.__ssrInlineRender)return;const i=V(o);i?.__asyncLoader&&!i.__asyncResolved&&await i.__asyncLoader()}));function n(o,i){const c=o.tag;if(o.type==="text"||c==="binding"||o.type==="comment")return[];const p=Z(o,i.tags);if(Q(p))return[];const m=[];o.type!=="root"&&!C.includes(p)&&m.push(p);for(const a of o.children||[])m.push(...n(a,i));return m}}function Z(t,r){const e=t.tag;return!e||typeof t.props?.__ignoreMap<"u"?e:r[e]||r[T(e)]||r[M(t.tag)]||e}const wt=Object.assign(Tt,{__name:"MDCRenderer"}),St=()=>l(()=>import("./PQvpTQwN.js"),__vite__mapDeps([0,1,2,3]),import.meta.url),Bt=()=>l(()=>import("./DtcbhWdV.js"),__vite__mapDeps([4,1,2,5,6]),import.meta.url),kt=()=>l(()=>import("./Z1N662xS.js"),__vite__mapDeps([7,1,2,8]),import.meta.url),$t=()=>l(()=>import("./DdY3Eub_.js"),__vite__mapDeps([9,1,2,10]),import.meta.url),Mt=()=>l(()=>import("./Cgm572Qo.js"),__vite__mapDeps([11,1,2,12]),import.meta.url),Ft=()=>l(()=>import("./PihOl8DM.js"),__vite__mapDeps([13,1,2,14]),import.meta.url),Nt=()=>l(()=>import("./-XX9Ql7H.js"),__vite__mapDeps([15,1,2]),import.meta.url),Ht=()=>l(()=>import("./BBRatb_y.js"),__vite__mapDeps([16,1,2,17]),import.meta.url),qt=()=>l(()=>import("./CgGvdYq8.js"),__vite__mapDeps([18,1,2,19]),import.meta.url),Ut=()=>l(()=>import("./B_ywtala.js"),__vite__mapDeps([20,21,1,2,5,22]),import.meta.url),Kt=()=>l(()=>import("./CyUlZ2ag.js"),__vite__mapDeps([23,21,1,2,5,24]),import.meta.url),zt=()=>l(()=>import("./BRLPeqIv.js"),__vite__mapDeps([25,21,1,2,5,26]),import.meta.url),Wt=()=>l(()=>import("./Cx1WjAyK.js"),__vite__mapDeps([27,1,2,28]),import.meta.url),Qt=()=>l(()=>import("./6NpPd5Zh.js"),__vite__mapDeps([29,1,2,30]),import.meta.url),Zt=()=>l(()=>import("./2fogaW-r.js"),__vite__mapDeps([31,1,2,32]),import.meta.url),Gt=()=>l(()=>import("#entry").then(t=>t.aZ),[],import.meta.url),Xt=()=>l(()=>import("./B8JYJQml.js"),__vite__mapDeps([33,1,2,34]),import.meta.url),Jt=()=>l(()=>import("./DRPQ3Ny_.js"),__vite__mapDeps([35,1,2,36]),import.meta.url),Yt=()=>l(()=>import("./CgJ0bEVO.js"),__vite__mapDeps([37,1,2,38]),import.meta.url),te=()=>l(()=>import("./BQiudxLQ.js"),__vite__mapDeps([39,1,2,40]),import.meta.url),ee=()=>l(()=>import("./DJTa4uGN.js"),__vite__mapDeps([41,1,2,42]),import.meta.url),re=()=>l(()=>import("./Cq5_M0-g.js"),__vite__mapDeps([43,1,2,44]),import.meta.url),G=["ZhiluHeader","ProseBlockquote","ProseEm","ProseH1","ProseH2","ProseH3","ProseH4","ProseH5","ProseH6","ProseHr","ProseImg","ProseLi","ProseOl","ProseP","ProseScript","ProseStrong","ProseTbody","ProseTd","ProseTh","ProseThead","ProseTr","ProseUl","Icon"],X=["Alert","Badge","Blur","CardList","Chat","Copy","EmojiClock","Folding","Key","LinkBanner","LinkCard","Pic","Poetry","ProseA","ProseCode","ProsePre","ProseTable","Quote","Tab","Timeline","Tip","VideoEmbed"],ne=Object.freeze(Object.defineProperty({__proto__:null,Alert:St,Badge:Bt,Blur:kt,CardList:$t,Chat:Mt,Copy:Ft,EmojiClock:Nt,Folding:Ht,Key:qt,LinkBanner:Ut,LinkCard:Kt,Pic:zt,Poetry:Wt,ProseA:Qt,ProseCode:Zt,ProsePre:Gt,ProseTable:Xt,Quote:Jt,Tab:Yt,Timeline:te,Tip:ee,VideoEmbed:re,globalComponents:G,localComponents:X},Symbol.toStringTag,{value:"Module"})),pe={__name:"ContentRenderer",props:{value:{type:Object,required:!0},excerpt:{type:Boolean,default:!1},tag:{type:String,default:"div"},components:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},prose:{type:Boolean,default:void 0},class:{type:[String,Object],default:void 0},unwrap:{type:[Boolean,String],default:!1}},setup(t){const r=["render","ssrRender","__ssrInlineRender"],e=t,n=!1,o=P(()=>{let s=e.value.body||e.value;return e.excerpt&&e.value.excerpt&&(s=e.value.excerpt),s.type==="minimal"||s.type==="minimark"?dt({value:s.value}):s}),i=P(()=>!o.value?.children?.length),c=P(()=>{const{body:s,excerpt:f,...d}=e.value;return{...d,...e.data}}),p=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(s=>[s,`prose-${s}`])),{mdc:m}=ot().public||{},a=P(()=>({...m?.components?.prose&&e.prose!==!1?p:{},...m?.components?.map||{},...k(e.data?.mdc?.components||{}),...e.components})),u=P(()=>o.value?g(o.value,{tags:a.value}):{});function _(s){let f=s;if(typeof s=="string"){if(C.includes(s))return s;if(G.includes(T(s))?f=$(s,!1):X.includes(T(s))&&(f=j(()=>l(()=>Promise.resolve().then(()=>ne),void 0,import.meta.url).then(h=>{const v=h[T(s)];return v?v():void 0}))),typeof f=="string")return f}if(!f)return f;const d=f;return"__asyncLoader"in d?d:"setup"in d?j(()=>Promise.resolve(d)):d}function g(s,f){if(!s)return;const d=Array.from(new Set(y(s,f))),b={};for(const[h,v]of d)if(!b[h]){if(typeof v=="object"&&r.some(J=>Object.hasOwnProperty.call(v,J))){b[h]=v;continue}b[h]=_(v)}return b}function y(s,f){const d=s.tag;if(s.type==="text"||d==="binding"||s.type==="comment")return[];const b=E(s,f.tags),h=[];s.type!=="root"&&!C.includes(b)&&h.push([d,b]);for(const v of s.children||[])h.push(...y(v,f));return h}function E(s,f){const d=s.tag;return!d||typeof s.props?.__ignoreMap<"u"?d:f[d]||f[T(d)]||f[M(s.tag)]||d}return(s,f)=>i.value?it(s.$slots,"empty",{key:1,body:o.value,data:c.value,dataContentId:S(n)?t.value.id:void 0}):(F(),st(wt,{key:0,body:o.value,data:c.value,class:at(e.class),tag:e.tag,prose:e.prose,unwrap:e.unwrap,components:u.value,"data-content-id":S(n)?t.value.id:void 0},null,8,["body","data","class","tag","prose","unwrap","components","data-content-id"]))}},oe={class:"z-comment"},se=B({__name:"Comment",setup(t){const r=ut();return pt(()=>{window.twikoo?.init({envId:r.twikoo?.envId,el:"#twikoo"})}),(e,n)=>(F(),ct("section",oe,[...n[0]||(n[0]=[I("h3",{class:"text-creative"}," 评论区 ",-1),I("div",{id:"twikoo"},[I("p",null,"评论加载中...")],-1)])]))}}),ce=Object.assign(lt(se,[["__scopeId","data-v-4f1b64e7"]]),{__name:"PostComment"});export{pe as _,ce as a};
