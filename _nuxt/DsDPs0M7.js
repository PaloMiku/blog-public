import{G as x,r as u,o as k,W as m,e as n,w as d,d as r,f as h,Q as t,h as s,g as b,S as _,O as w,b4 as B,n as C,t as l,U as N,_ as z}from"./Cwrz0elI.js";import{_ as G}from"./32hnxJ11.js";import{u as I,s as V,a as L}from"./CvY4Iuzs.js";const M={key:0,class:"steam-loading-center"},W={key:1,style:{"text-align":"center",color:"var(--c-text-2)"}},A=["src","alt"],D={class:"user-info"},O={class:"user-row"},P={class:"username"},j=["title"],E={key:1,class:"game-name"},F=x({__name:"SteamStats",setup(Q){const{fetchSteamData:p}=I(),e=u(null),c=u(!0),i=u(!1);function f(a){return V[a]||"#90a0a6"}function g(a){return L[a]||a}return k(async()=>{try{const a=await p();a.success&&a.data?.user?e.value=a.data.user:i.value=!0}catch(a){console.error("Failed to load Steam user info:",a),i.value=!0}finally{c.value=!1}}),(a,o)=>{const v=w,S=B,y=G;return n(),m(y,{card:"",title:"Steam"},{default:d(()=>[t(c)?(n(),r("div",M,[...o[0]||(o[0]=[s("div",{class:"steam-loading-spinner"},null,-1),s("div",{class:"steam-loading-text"}," Steam API 通讯中... ",-1)])])):t(i)?(n(),r("p",W,[b(v,{name:"ph:warning-circle-bold"}),o[1]||(o[1]=_(" Steam API 连接失败 ",-1))])):t(e)?(n(),m(S,{key:2,to:"/steam",class:C(["steam-card-content",[{loaded:!t(c)}]])},{default:d(()=>[s("img",{src:t(e).avatar.medium,alt:t(e).username,class:"user-avatar",loading:"lazy"},null,8,A),s("div",D,[s("div",O,[s("div",P,l(t(e).username),1),s("div",{class:"status-badge",style:N({"--status-color":f(t(e).status)})},[o[2]||(o[2]=s("span",{class:"status-dot"},null,-1)),_(" "+l(g(t(e).status)),1)],4)]),t(e).currentGame?(n(),r("div",{key:0,class:"game-name",title:t(e).currentGame.name}," 正在玩 "+l(t(e).currentGame.name),9,j)):(n(),r("div",E,l(t(e).status==="offline"?"不在线呢，过会儿再看看？":"虽然在线，但是什么都没在玩？"),1))])]),_:1},8,["class"])):h("",!0)]),_:1})}}}),q=Object.assign(z(F,[["__scopeId","data-v-8783db1f"]]),{__name:"WidgetSteamStats"});export{q as default};
