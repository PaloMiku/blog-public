import{f}from"./CckykMIv.js";const h={offline:"离线",online:"在线",away:"离开",snooze:"打盹",busy:"忙碌",trading:"交易中",playing:"游戏中"},p={offline:"#90a0a6",online:"#4fc951",away:"#ffc72c",snooze:"#ffc72c",busy:"#ff6554",trading:"#6495ed",playing:"#26d07c"},n=f.steam?.apiBase||"https://steam-api-profile-palomiku.netlify.app/api",m=`${n}/steam-user`,i=`${n}/steam-games`,u=`${n}/steam-achievements`;async function o(s){try{const e=await fetch(s,{method:"GET",headers:{Accept:"application/json"},cache:"no-cache"});if(!e.ok)throw new Error(`HTTP ${e.status}: ${e.statusText}`);return await e.json()}catch(e){const a=e instanceof Error?e.message:String(e);return console.error("[Steam] Fetch error:",a),null}}function l(s){return s<1?"< 1 小时":`${Math.round(s)} 小时`}const g=()=>({fetchSteamData:async e=>{try{const a=e&&e>0&&e<=100?`${i}?limit=${e}`:i,[t,r,c]=await Promise.all([o(m),o(a),o(u)]);return!t?.success||!r?.success?{success:!1,error:"Failed to fetch required Steam data",code:"FETCH_ERROR"}:{success:!0,data:{user:t.data?.user,games:r.data?.games,achievements:c?.data?.achievements},allMetadata:{user:t.metadata,games:r.metadata,achievements:c?.metadata}}}catch(a){const t=a instanceof Error?a.message:String(a);return console.error("[Steam] Fetch error:",t),{success:!1,error:`Fetch failed: ${t}`,code:"FETCH_ERROR"}}},formatPlaytime:l});export{h as a,l as f,p as s,g as u};
