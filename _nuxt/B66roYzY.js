import{b7 as S,b8 as v,b9 as w,ba as y,bb as C,ad as E,ag as B,z as H,au as I,av as V,aw as N,Q as g,e as l,w as m,g as p,L as a,h as d,d as b,F as W,P as z,n as A,f as D,t as F,an as P,J as R,_ as $}from"./wC-D7y6G.js";import q from"./CSZy3WJI.js";function O(T){const{height:h}=S(document?.body);function r(t,e=[]){return t.forEach(o=>{const _=document.getElementById(o.id);_&&e.push({id:o.id,offsetTop:_.offsetTop}),o.children&&r(o.children,e)}),e}const u=v(w(h),()=>r(B(T)?.links||[]).reverse()),{y:s}=y();function f(){const t=Number.parseFloat(getComputedStyle(document.documentElement).getPropertyValue("scroll-margin-top")),e=s.value+(t||64);return u.value.find(o=>o.offsetTop<=e)?.id}const c=v(C(s,void 0,!0),()=>document&&f());function i(){const t=document.querySelector("#blog-aside"),e=document.querySelector(`#blog-aside a[href="#${c.value}"]`);t?.scroll({top:e?.offsetTop||0})}return E(c,i),{tocOffsets:u,activeHeadingId:c}}const j={href:"#main-content","aria-label":"返回开头"},J={href:"#artalk","aria-label":"评论区"},M=["href","title"],Q={key:1,class:"no-toc"},U=H({__name:"Toc",setup(T){const[h,r]=I({inheritAttrs:!1}),u=V(),{toc:s}=N(u),{activeHeadingId:f}=O(s);function c(i,t){return i.id===t||!!i.children?.some(e=>c(e,t))}return(i,t)=>{const e=R,o=P,_=q;return l(),g(_,null,{title:m(()=>[t[0]||(t[0]=d("span",{class:"title"},"文章目录",-1)),d("a",j,[p(e,{name:"ph:arrow-circle-up-bold"})]),d("a",J,[p(e,{name:"ph:chat-circle-text-bold"})])]),default:m(()=>[p(a(h),null,{default:m(({tocTree:k})=>[d("ol",null,[(l(!0),b(W,null,z(k,(n,x)=>(l(),b("li",{key:x,class:A({"has-active":c(n,a(f)),active:n.id===a(f)})},[d("a",{href:`#${n?.id}`,title:n.text},F(n.text),9,M),n.children?(l(),g(a(r),{key:0,"toc-tree":n.children},null,8,["toc-tree"])):D("",!0)],2))),128))])]),_:1}),p(o,null,{default:m(()=>[a(s)?.links.length?(l(),g(a(r),{key:0,"toc-tree":a(s).links},null,8,["toc-tree"])):(l(),b("p",Q," 暂无目录信息 "))]),_:1})]),_:1})}}}),K=Object.assign($(U,[["__scopeId","data-v-2a173515"]]),{__name:"WidgetToc"});export{K as default};
