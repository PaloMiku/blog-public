import{_ as f}from"./R0zW_PpF.js";import{_ as v}from"./BQm2S0f2.js";import{d as b,B as g,r as u,aj as $,D as h,$ as n,c as w,a8 as C,o as j,f as x,h as y,w as B,i as D}from"#entry";import{u as S}from"./c6kmvzf5.js";import{t as T,_ as A,g as E}from"./CLMI6HXJ.js";const O=b({__name:"BlogStats",async setup(W){let s,m;const l=g(),p=$(),i=u(p.public.buildTime),r=u(l.component.stats.wordCount),c=u(""),{data:t,error:k}=([s,m]=h(()=>S("blog-stats",()=>$fetch("/api/stats").catch(()=>null))),s=await s,m(),s);t&&t.value&&(r.value=n(t.value.total.words),c.value=Object.entries(t.value.annual).reverse().map(([a,e])=>`${a}年：${e.posts}篇，${n(e.words)}字`).join(`
`));const _=[{label:"运营时长",value:T(l.timeEstablished),tip:`博客于${l.timeEstablished}上线`},{label:"上次更新",value:()=>C(A,{datetime:p.public.buildTime,relative:!0}),tip:w(()=>`构建于${i.value}`)},{label:"总字数",value:r,tip:c}];return j(async()=>{if(i.value=E(i.value),!t||!t.value){const a=await $fetch("/api/stats").catch(()=>null);if(!a)return;r.value=n(a.total.words),c.value=Object.entries(a.annual).reverse().map(([e,o])=>`${e}年：${o.posts}篇，${n(o.words)}字`).join(`
`)}}),(a,e)=>{const o=f,d=v;return y(),x(d,{card:"",title:"博客统计"},{default:B(()=>[D(o,{items:_,size:"small"})]),_:1})}}}),M=Object.assign(O,{__name:"WidgetBlogStats"});export{M as default};
