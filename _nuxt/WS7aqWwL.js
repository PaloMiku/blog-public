import{_ as f}from"./DOF2BMHn.js";import{_ as v}from"./BSH8avIx.js";import{d as b,u as g,e as u,ap as $,w as h,a7 as n,c as w,B as C,o as x,J as y,k as B,K as j,n as S}from"#entry";import{u as T}from"./2ppfPTvR.js";import{t as k,_ as A,g as D}from"./BhrRz0DP.js";const E=b({__name:"BlogStats",async setup(O){let s,p;const l=g(),m=$(),i=u(m.public.buildTime),r=u(l.component.stats.wordCount),c=u(""),{data:t,error:W}=([s,p]=h(()=>T("blog-stats",()=>$fetch("/api/stats").catch(()=>null))),s=await s,p(),s);t&&t.value&&(r.value=n(t.value.total.words),c.value=Object.entries(t.value.annual).reverse().map(([e,a])=>`${e}年：${a.posts}篇，${n(a.words)}字`).join(`
`));const _=[{label:"运营时长",value:k(l.timeEstablished),tip:`博客于${l.timeEstablished}上线`},{label:"上次更新",value:()=>C(A,{datetime:m.public.buildTime,relative:!0}),tip:w(()=>`构建于${i.value}`)},{label:"总字数",value:r,tip:c}];return x(async()=>{if(i.value=D(i.value),!t||!t.value){const e=await $fetch("/api/stats").catch(()=>null);if(!e)return;r.value=n(e.total.words),c.value=Object.entries(e.annual).reverse().map(([a,o])=>`${a}年：${o.posts}篇，${n(o.words)}字`).join(`
`)}}),(e,a)=>{const o=f,d=v;return B(),y(d,{card:"",title:"博客统计"},{default:j(()=>[S(o,{items:_,size:"small"})]),_:1})}}}),K=Object.assign(E,{__name:"WidgetBlogStats"});export{K as default};
