import{z as b,C as A,D as $,E as z,u as q}from"./BEFc8N7m.js";import{u as E}from"./Cp11Gdl2.js";import{q as I}from"./aQ0t27QR.js";import{aE as O,Z as f,s as Q,q as R,r as m,k as g}from"./LivvtlNw.js";function j(e,t,r){const[o,n]=b(r?.in,e,t);return o.getFullYear()===n.getFullYear()}const G=(e,t)=>e.reduce((r,o)=>{const n=t(o);return r[n]||(r[n]=[]),r[n].push(o),r},{}),K=(e,t,r=!1)=>{if(!e)return[];const o=(a,s)=>t(a)-t(s),n=(a,s)=>t(s)-t(a);return e.slice().sort(r===!0?n:o)},k=(e,t,r="asc")=>{if(!e)return[];const o=(a,s)=>`${t(a)}`.localeCompare(t(s)),n=(a,s)=>`${t(s)}`.localeCompare(t(a));return e.slice().sort(r==="desc"?n:o)},d=new WeakMap;function T(e,t,r={}){const{mode:o="replace",route:n=A(),router:a=$(),transform:s}=r;let l=i=>i,y=i=>i;typeof s=="function"?l=s:s&&(s.get&&(l=s.get),s.set&&(y=s.set)),d.has(a)||d.set(a,new Map);const p=d.get(a);let u=n.query[e];z(()=>{u=void 0});let C;const x=O((i,h)=>(C=h,{get(){return i(),l(u!==void 0?u:f(t))},set(c){c=y(c),u!==c&&(u=c===f(t)?void 0:c,p.set(e,c===f(t)?void 0:c),h(),Q(()=>{if(p.size===0)return;const w=Object.fromEntries(p.entries());p.clear();const{params:D,query:S,hash:_}=n;a[f(o)]({params:D,query:{...S,...w},hash:_})}))}}));return R(()=>n.query[e],i=>{u!==l(i)&&(u=i,C())},{flush:"sync"}),x}function L(e="posts/%"){return E(`index_${e}`,()=>I("content").where("stem","LIKE",e).select("categories","date","description","image","path","readingTime","recommend","title","type","updated").all(),{default:()=>[]})}function N(e,t){const{bindQuery:r}=t??{},o=r?T(r,void 0,{transform:s=>s,mode:"push"}):m(),n=g(()=>[...new Set(f(e).map(s=>s.categories?.[0]))]),a=g(()=>f(e).filter(s=>!o.value||s.categories?.[0]===o.value));return{category:o,categories:n,listCategorized:a}}function P(e){const t=q(),r=m(t.pagination.sortOrder||"date"),o=m(),n=g(()=>k(f(e),a=>a[r.value]||"",o.value?"asc":"desc"));return{sortOrder:r,isAscending:o,listSorted:n}}function W(e){return q().article.categories[e]?.icon??"ph:folder-bold"}function Z(e="tech",t={prefix:"text"}){const{prefix:r="text"}=t;return`${r}-${e}`}export{L as a,P as b,N as c,W as d,Z as e,G as g,j as i,K as s,T as u};
