import{d as w,u as R,c as A,a9 as J,aa as W,h as f,o as i,q as C,J as k,k as h,j as a,I as Q,l as d,$ as X,n as e,K as P,z as x,m as z,_ as F,y,a7 as Y,B as S,e as N,G as ee,ab as te,F as B,x as oe,ac as H,w as K,ad as ne,L as ae,a as se,ae as ie,b as ce,S as j,U as q,af as re}from"#entry";import{_ as O}from"./CmoqfBV5.js";import{g as Z,i as le}from"./BiOZ_-Cs.js";import{c as de,d as E}from"./DI6NghzA.js";import{_ as ue}from"./xMlMiPqe.js";import pe from"./BK0rtYTK.js";import{u as V}from"./CBZn_wPm.js";import{a as me,q as _e}from"./EwO0ulXL.js";import{_ as fe}from"./s7ppGI1B.js";import{u as ge}from"./Dcrp91FT.js";import"./G7RNiGtP.js";import"./rJCbAzvX.js";import"./DLesPaFG.js";const ve={class:"post-nav"},he={class:"operations"},ye={key:0,class:"post-info"},be={key:2},xe=w({inheritAttrs:!1,__name:"PostHeader",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{}},setup(t){const s=t,p=R(),o=A(()=>s.categories?.[0]),m=A(()=>de(o.value)),c=`【${p.title}】${s.title}

${s.description?`${s.description}

`:""}${new URL(s.path,p.url).href}`,{copy:l,copied:n}=J(c);return(r,_)=>{const g=Q,b=X,$=O,u=F,v=W("tip");return i(),f("div",{class:C(["post-header",{"has-cover":t.image,"text-revert":t.meta?.coverRevert}])},[t.image?(i(),k(g,{key:0,class:"post-cover",src:t.image,alt:t.title},null,8,["src","alt"])):h("",!0),a("div",ve,[a("div",he,[d(b,{icon:e(n)?"ph:check-bold":"ph:share-bold",onClick:_[0]||(_[0]=T=>e(l)())},{default:P(()=>[..._[1]||(_[1]=[x(" 文字分享 ",-1)])]),_:1},8,["icon"])]),t.meta?.hideInfo?h("",!0):(i(),f("div",ye,[t.date?z((i(),k($,{key:0,date:t.date,icon:"ph:calendar-dots-bold"},null,8,["date"])),[[v,`创建于 ${("getLocaleDatetime"in r?r.getLocaleDatetime:e(Z))(t.date)}`]]):h("",!0),t.updated&&("isTimeDiffSignificant"in r?r.isTimeDiffSignificant:e(le))(t.date,t.updated,.999)?z((i(),k($,{key:1,date:t.updated,icon:"ph:calendar-plus-bold"},null,8,["date"])),[[v,`修改于 ${("getLocaleDatetime"in r?r.getLocaleDatetime:e(Z))(t.updated)}`]]):h("",!0),e(o)?(i(),f("span",be,[d(u,{name:e(m)},null,8,["name"]),x(" "+y(e(o)),1)])):h("",!0),a("span",null,[d(u,{name:"ph:paragraph-bold"}),x(" "+y(("formatNumber"in r?r.formatNumber:e(Y))(t.readingTime?.words))+" 字 ",1)])]))]),a("h1",{class:C(["post-title",("getPostTypeClassName"in r?r.getPostTypeClassName:e(E))(t.type)])},y(t.title),3)],2)}}}),$e=Object.assign(S(xe,[["__scopeId","data-v-55ada320"]]),{__name:"PostHeader"}),ke={class:"md-excerpt ai-excerpt"},Ce={class:"ai-excerpt-header"},Pe={class:"ai-excerpt-title"},we={class:"ai-icon-gpt"},Te={key:0,class:"ai-excerpt-toggle-outer hide-on-wide"},Ne={class:"ai-excerpt-toggle-wrap"},Se=900,De=w({__name:"Excerpt",props:{excerpt:{}},setup(t){const s=t,p=R(),o=N(s.excerpt),m=N(""),c=N(!1),l=N(!1);function n(){window.innerWidth<Se?(l.value=!0,c.value=!0):(l.value=!1,c.value=!1)}n(),window.addEventListener("resize",n);function r(){l.value&&(c.value=!c.value)}return p.component.excerpt?.animation!==!1&&(o.value="",ee(async()=>{m.value=p.component.excerpt?.caret??"_";for(const _ of s.excerpt)o.value+=_,await te(50);m.value=""})),(_,g)=>{const b=F;return i(),f("div",ke,[a("div",Ce,[a("div",Pe,[a("span",we,[d(b,{name:"simple-icons:openai",class:"ai-gpt-icon"})]),g[0]||(g[0]=a("span",{class:"ai-label"},"智能摘要",-1))]),g[1]||(g[1]=a("span",{class:"ai-badge"},"Kimi·K2-Turbo",-1))]),a("div",{class:C(["ai-excerpt-content",{"is-folded":e(c)&&e(l)}])},y(e(o))+y(e(m)),3),g[2]||(g[2]=a("noscript",null,null,-1)),e(o).length>80&&e(l)?(i(),f("div",Te,[a("div",Ne,[a("button",{class:"ai-excerpt-toggle",onClick:r},y(e(c)?"展开全部":"收起"),1)])])):h("",!0)])}}}),Ie=Object.assign(S(De,[["__scopeId","data-v-bac70b0b"]]),{__name:"PostExcerpt"}),Le={class:"post-footer"},Ae={key:0,class:"reference"},Re={class:"content"},Fe={class:"license"},Be={class:"content"},Ee=w({inheritAttrs:!1,__name:"PostFooter",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{}},setup(t){const s=R();return(p,o)=>{const m=pe;return i(),f("div",Le,[t.references?(i(),f("section",Ae,[o[0]||(o[0]=a("div",{id:"references",class:"title text-creative"}," 参考链接 ",-1)),a("div",Re,[a("ul",null,[(i(!0),f(B,null,oe(t.references,({title:c,link:l},n)=>(i(),f("li",{key:n},[d(m,{href:l||""},{default:P(()=>[x(y(c??l),1)]),_:2},1032,["href"])]))),128))])])])):h("",!0),a("section",Fe,[o[3]||(o[3]=a("div",{class:"title text-creative"}," 许可协议 ",-1)),a("div",Be,[a("p",null,[o[1]||(o[1]=x(" 本文采用 ",-1)),d(m,{href:e(s).copyright.url},{default:P(()=>[x(y(e(s).copyright.name),1)]),_:1},8,["href"]),o[2]||(o[2]=x(" 许可协议，转载请注明出处。 ",-1))])])])])}}}),ze=Object.assign(S(Ee,[["__scopeId","data-v-cdb923bb"]]),{__name:"PostFooter"}),je={class:"surround-text"},qe={key:0,class:"surround-post",dir:"ltr"},Ze=w({__name:"PostSurround",async setup(t){let s,p;const o=H(),{data:m}=([s,p]=K(()=>V(`surround-${o.path}`,()=>me("content",o.path,{fields:["date","title","type"]}).order("date","ASC").where("stem","LIKE","posts/%"))),s=await s,p(),s),[c=null,l=null]=m.value??[],[n,r]=ne({inheritAttrs:!1});return(_,g)=>{const b=F,$=O,u=ae;return i(),f(B,null,[d(e(n),null,{default:P(({post:v,icon:T,fallbackIcon:D,fallbackText:I,alignEnd:L})=>[d(u,{to:v?.path,class:"surround-link","align-end":L},{default:P(()=>[d(b,{class:C({"rtl-flip":v}),name:v?T:D},null,8,["class","name"]),a("div",je,[a("strong",{class:C(["title",("getPostTypeClassName"in _?_.getPostTypeClassName:e(E))(v?.type)])},y(v?.title||I),3),v?.date?(i(),k($,{key:0,class:"date",date:v.date},null,8,["date"])):h("",!0)])]),_:2},1032,["to","align-end"])]),_:1}),e(c)||e(l)?(i(),f("div",qe,[d(e(r),{post:e(l),icon:"solar:rewind-back-bold-duotone","fallback-icon":"solar:document-add-bold-duotone","fallback-text":"新故事即将发生"},null,8,["post"]),d(e(r),{post:e(c),icon:"solar:rewind-forward-bold-duotone","fallback-icon":"solar:reel-bold-duotone","fallback-text":"已抵达博客尽头","align-end":""},null,8,["post"])])):h("",!0)],64)}}}),He=Object.assign(S(Ze,[["__scopeId","data-v-5bbacfc0"]]),{__name:"PostSurround"}),ot=w({__name:"[...slug]",async setup(t){let s,p;const o=H();function m(u){return!u||u==="/"?u:u.replace(/\/$/,"")}const c=se();c.setAside(["toc"]);const l=m(o.path),{data:n}=([s,p]=K(()=>V(()=>l,()=>_e("content").path(l).first(),"$BPopkF1nvN")),s=await s,p(),s),r=ge(),{toc:_,meta:g}=ie(r),b=A(()=>n.value?.description||"");function $(){_.value=n.value?.body.toc,g.value=n.value?.meta}return $(),n.value?(ce({title:n.value.title,meta:[{property:"og:type",content:"article"},{property:"og:image",content:n.value.image},{name:"description",content:n.value.description}]}),c.setAside(n.value.meta?.aside)):(o.meta.title="404",c.setAside(["blog-log"])),(u,v)=>{const T=$e,D=Ie,I=ue,L=ze,M=He,U=fe,G=re;return e(n)?(i(),f(B,{key:0},[d(T,j(q(e(n))),null,16),e(b)?(i(),k(D,{key:0,excerpt:e(b)},null,8,["excerpt"])):h("",!0),d(I,{class:C(["article",("getPostTypeClassName"in u?u.getPostTypeClassName:e(E))(e(n)?.type,{prefix:"md"})]),value:e(n),tag:"article"},null,8,["class","value"]),d(L,j(q(e(n))),null,16),d(M),d(U)],64)):(i(),k(G,{key:1,icon:"solar:confounded-square-bold-duotone",title:"内容为空或页面不存在"}))}}});export{ot as default};
