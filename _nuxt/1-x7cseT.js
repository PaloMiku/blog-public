import{_ as d}from"./5v0cp7IZ.js";import{_ as b}from"./Cpy84ETu.js";import{_ as v}from"./VQ9UhDMB.js";import{c as g,r as n}from"./CQvtSiZB.js";import{J as $,r as u,A as h,bq as w,x as C,M as x,N as y,aM as j,aN as B,aT as T,aR as A}from"./BxKQXmcp.js";import{u as D}from"./DO3rIgGO.js";import{b as N,g as O}from"./COAylGOi.js";const S=$({__name:"BlogStats",async setup(M){let s,m;const r=g(),p=h(),i=u(p.public.buildTime),l=u(r.component.stats.wordCount),c=u(""),{data:t,error:W}=([s,m]=w(()=>D("blog-stats",()=>$fetch("/api/stats").catch(()=>null))),s=await s,m(),s);t&&t.value&&(l.value=n(t.value.total.words),c.value=Object.entries(t.value.annual).reverse().map(([a,e])=>`${a}年：${e.posts}篇，${n(e.words)}字`).join(`
`));const _=[{label:"运营时长",value:N(r.timeEstablished),tip:`博客于${r.timeEstablished}上线`},{label:"上次更新",value:()=>x(d,{datetime:p.public.buildTime,relative:!0}),tip:C(()=>`构建于${i.value}`)},{label:"总字数",value:l,tip:c}];return y(async()=>{if(i.value=O(i.value),!t||!t.value){const a=await $fetch("/api/stats").catch(()=>null);if(!a)return;l.value=n(a.total.words),c.value=Object.entries(a.annual).reverse().map(([e,o])=>`${e}年：${o.posts}篇，${n(o.words)}字`).join(`
`)}}),(a,e)=>{const o=b,f=v;return B(),j(f,{card:"",title:"博客统计"},{default:T(()=>[A(o,{items:_})]),_:1})}}}),L=Object.assign(S,{__name:"WidgetBlogStats"});export{L as default};
