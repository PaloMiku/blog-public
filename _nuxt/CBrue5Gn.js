import{d as N,R as S,ak as G,ag as O,f as p,o as n,a as T,P as h,C as m,L as Q,V as i,i as k,Q as g,u as e,ai as X,af as V,a0 as R,n as _,a3 as Y,a1 as L,_ as w,k as E,U as J,aS as K,F as Z,j as W,D as x,Y as M,aI as ee,$ as te,X as oe,c as ae,G as se,ay as F,az as H,aT as ne}from"./CPDc-gQD.js";import{g as B,a as z,b as A,i as re}from"./BS-gx3_k.js";import{g as ie,b as q}from"./DadMTmqm.js";import{_ as ce}from"./CclBAIso.js";import le from"./6v_DbzL6.js";import{u as U}from"./CVG3kxEI.js";import{q as j}from"./LoBL0A3d.js";import{_ as pe}from"./C_Pprnxz.js";import de from"./BBTLeJP5.js";import"./DIomjtHU.js";import"./hbOoBq-x.js";import"./D-3Z3Hvr.js";import"./C_gm745W.js";const me={class:"post-nav"},ue={class:"operations"},_e={key:0,class:"post-info"},fe=["datetime"],ge=["datetime"],he={key:2,class:"article-category"},ye={class:"wordcount"},ve=N({inheritAttrs:!1,__name:"PostHeader",props:{_path:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},cover_revert:{type:Boolean},hideInfo:{type:Boolean},recommend:{type:[Number,Boolean]},references:{},readingTime:{}},setup(C){var I;const a=C,c=S(),s=B(a.date),l=B(a.updated),o=(I=a.categories)==null?void 0:I[0],d=ie(o),u=`【${c.title}】${a.title}

${a.description?`${a.description}

`:""}${new URL(a._path,c.url).href}`,{copy:b,copied:f}=G(u);return(t,y)=>{var $;const r=Q,P=X,v=R,D=O("tip");return n(),p("div",{class:L(["post-header",{"has-cover":t.image,"text-revert":t.cover_revert}])},[t.image?(n(),T(r,{key:0,class:"post-cover",src:t.image,alt:t.title},null,8,["src","alt"])):h("",!0),m("div",me,[m("div",ue,[i(P,{icon:e(f)?"ph:check-bold":"ph:share-bold",onClick:y[0]||(y[0]=Fe=>e(b)())},{default:k(()=>y[1]||(y[1]=[g(" 文字分享 ")])),_:1},8,["icon"])]),t.hideInfo?h("",!0):(n(),p("div",_e,[t.date?V((n(),p("time",{key:0,datetime:("getIsoDatetime"in t?t.getIsoDatetime:e(A))(t.date)},[i(v,{name:"ph:calendar-dots-bold"}),g(" "+_(e(s)),1)],8,fe)),[[D,`创建于 ${("getLocaleDatetime"in t?t.getLocaleDatetime:e(z))(a.date)}`]]):h("",!0),("isTimeDiffSignificant"in t?t.isTimeDiffSignificant:e(re))(t.date,t.updated,.999)?V((n(),p("time",{key:1,datetime:("getIsoDatetime"in t?t.getIsoDatetime:e(A))(t.updated)},[i(v,{name:"ph:calendar-plus-bold"}),g(" "+_(e(l)),1)],8,ge)),[[D,`修改于 ${("getLocaleDatetime"in t?t.getLocaleDatetime:e(z))(a.updated)}`]]):h("",!0),e(o)?(n(),p("span",he,[i(v,{name:e(d)},null,8,["name"]),g(" "+_(e(o)),1)])):h("",!0),m("span",ye,[i(v,{name:"ph:paragraph-bold"}),g(" "+_(("formatNumber"in t?t.formatNumber:e(Y))(($=t.readingTime)==null?void 0:$.words))+" 字 ",1)])]))]),m("h1",{class:L(["post-title",("getPostTypeClassName"in t?t.getPostTypeClassName:e(q))(t.type)])},_(t.title),3)],2)}}}),be=w(ve,[["__scopeId","data-v-81cc9a8e"]]),$e={class:"md-excerpt gradient-card"},ke=N({__name:"Excerpt",props:{excerpt:{}},setup(C){var o;const a=C,c=S(),s=E(a.excerpt),l=E("");return((o=c.content.excerpt)==null?void 0:o.animation)!==!1&&(s.value="",J(async()=>{var d;l.value=((d=c.content.excerpt)==null?void 0:d.caret)??"_";for(const u of a.excerpt)s.value+=u,await K(50);l.value=""})),(d,u)=>{const b=R;return n(),p("div",$e,[i(b,{name:"ph:highlighter-bold"}),g(_(e(s))+_(e(l)),1)])}}}),Ce=w(ke,[["__scopeId","data-v-1ee9f7a1"]]),De={class:"post-footer"},Ie={key:0,class:"reference"},Pe={class:"content"},Te={key:0},Ne={class:"license"},we={class:"content"},Le=N({inheritAttrs:!1,__name:"PostFooter",props:{_path:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},cover_revert:{type:Boolean},hideInfo:{type:Boolean},recommend:{type:[Number,Boolean]},references:{},readingTime:{}},setup(C){const a=S();return(c,s)=>{const l=le;return n(),p("div",De,[c.references?(n(),p("section",Ie,[s[0]||(s[0]=m("div",{id:"references",class:"title"}," 参考链接 ",-1)),m("div",Pe,[m("ul",null,[(n(!0),p(Z,null,W(c.references,(o,d)=>(n(),p("li",{key:d},[typeof o=="string"?(n(),p("p",Te,_(o),1)):(n(),T(l,{key:1,href:o.link},{default:k(()=>[g(_((o==null?void 0:o.title)??o.link),1)]),_:2},1032,["href"]))]))),128))])])])):h("",!0),m("section",Ne,[s[3]||(s[3]=m("div",{class:"title"}," 许可协议 ",-1)),m("div",we,[m("p",null,[s[1]||(s[1]=g(" 本文采用 ")),i(l,{href:e(a).copyright.url},{default:k(()=>[g(_(e(a).copyright.name),1)]),_:1},8,["href"]),s[2]||(s[2]=g(" 许可协议，转载请注明出处。 "))])])])])}}}),Be=w(Le,[["__scopeId","data-v-7f040ea6"]]),Ae={class:"surround-text"},Se=["datetime"],Re={key:0,class:"surround-post"},qe=N({__name:"PostSurround",async setup(C){let a,c;const s=x(),{data:l}=([a,c]=M(()=>U(`surround-${s.path}`,()=>j().only(["_path","date","title","type"]).sort({date:1}).where({_original_dir:{$eq:"/posts"}}).findSurround(s.path))),a=await a,c(),a),[o=null,d=null]=l.value??[],[u,b]=ee({inheritAttrs:!1});return(f,I)=>{const t=R,y=te;return n(),p(Z,null,[i(e(u),null,{default:k(({post:r,icon:P,fallbackIcon:v,fallbackText:D,alignRight:$})=>[i(y,{to:r==null?void 0:r._path,class:"surround-link","align-right":$},{default:k(()=>[i(t,{name:r?P:v},null,8,["name"]),m("div",Ae,[m("strong",{class:L(["title",("getPostTypeClassName"in f?f.getPostTypeClassName:e(q))(r==null?void 0:r.type)])},_((r==null?void 0:r.title)||D),3),r?(n(),p("time",{key:0,datetime:("getIsoDatetime"in f?f.getIsoDatetime:e(A))(r.date)},_(("getPostDate"in f?f.getPostDate:e(B))(r.date)),9,Se)):h("",!0)])]),_:2},1032,["to","align-right"])]),_:1}),e(o)||e(d)?(n(),p("div",Re,[i(e(b),{post:e(d),icon:"solar:rewind-back-bold-duotone","fallback-icon":"solar:document-add-bold-duotone","fallback-text":"新故事即将发生"},null,8,["post"]),i(e(b),{post:e(o),class:"align-right",icon:"solar:rewind-forward-bold-duotone","fallback-icon":"solar:reel-bold-duotone","fallback-text":"已抵达博客尽头","align-right":""},null,8,["post"])])):h("",!0)],64)}}}),Ve=w(qe,[["__scopeId","data-v-34f0cb97"]]),Ee=N({__name:"[...slug]",async setup(C){let a,c;const s=x(),l=oe();l.setAside(["toc"]);const{data:o}=([a,c]=M(()=>U(s.path,()=>j(s.path).findOne(),"$vHqkxevve1")),a=await a,c(),a),d=ae(()=>{var u;return((u=o.value)==null?void 0:u.description)||""});return o.value?(se({title:o.value.title,meta:[{property:"og:type",content:"article"},{property:"og:image",content:o.value.image},{name:"description",content:o.value.description}]}),l.setAside(o.value.aside)):(s.meta.title="404",l.setAside(["blog-log"])),(u,b)=>{const f=be,I=Ce,t=ce,y=ne,r=Be,P=Ve,v=pe,D=de;return n(),T(D,{value:e(o)},{empty:k(()=>[i(y,{icon:"solar:confounded-square-bold-duotone",title:"内容为空或页面不存在"})]),default:k(()=>{var $;return[i(f,F(H(e(o))),null,16),e(d)?(n(),T(I,{key:0,excerpt:e(d)},null,8,["excerpt"])):h("",!0),i(t,{class:L(["article",("getPostTypeClassName"in u?u.getPostTypeClassName:e(q))(($=e(o))==null?void 0:$.type,{prefix:"md"})]),value:e(o)??{},tag:"article"},null,8,["class","value"]),i(r,F(H(e(o))),null,16),i(P),(n(),T(v,{key:e(s).path}))]}),_:1},8,["value"])}}}),Ke=w(Ee,[["__scopeId","data-v-6fe7825b"]]);export{Ke as default};
