const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./By-KnIoE.js","./CyAqJ3nm.js","./entry.BiVjzasw.css","./vhikiTxS.js"])))=>i.map(i=>d[i]);
import{aT as _,aU as U,aV as B,aW as F,b as R}from"./CyAqJ3nm.js";import{t as k,b as P}from"./vhikiTxS.js";const I=(e,r)=>{const t=e._conditions;return t.length>0?`(${t.join(` ${r} `)})`:""},v=e=>{const r=[],t={_conditions:r,where(n,s,i){let o;switch(s.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(i)){const l=i.map(c=>y(c)).join(", ");o=`"${String(n)}" ${s.toUpperCase()} (${l})`}else throw new TypeError(`Value for ${s} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(i)&&i.length===2)o=`"${String(n)}" ${s.toUpperCase()} ${y(i[0])} AND ${y(i[1])}`;else throw new Error(`Value for ${s} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":o=`"${String(n)}" ${s.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":o=`"${String(n)}" ${s.toUpperCase()} ${y(i)}`;break;default:o=`"${String(n)}" ${s} ${y(typeof i=="boolean"?Number(i):i)}`}return r.push(`${o}`),t},andWhere(n){const s=n(v());return r.push(I(s,"AND")),t},orWhere(n){const s=n(v());return r.push(I(s,"OR")),t}};return t},q=(e,r)=>{const t={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},n={__params:t,andWhere(i){const o=i(v());return t.conditions.push(I(o,"AND")),n},orWhere(i){const o=i(v());return t.conditions.push(I(o,"OR")),n},path(i){return n.where("path","=",_(i))},skip(i){return t.offset=i,n},where(i,o,l){return n.andWhere(c=>c.where(String(i),o,l)),n},limit(i){return t.limit=i,n},select(...i){return i.length&&t.selectedFields.push(...i),n},order(i,o){return t.orderBy.push(`"${String(i)}" ${o}`),n},async all(){return r(e,s()).then(i=>i||[])},async first(){return r(e,s({limit:1})).then(i=>i[0]||null)},async count(i="*",o=!1){return r(e,s({count:{field:String(i),distinct:o}})).then(l=>l[0].count)}};function s(i={}){let o="SELECT ";if(i?.count)o+=`COUNT(${i.count.distinct?"DISTINCT ":""}${i.count.field}) as count`;else{const c=Array.from(new Set(t.selectedFields));o+=c.length>0?c.map(a=>`"${String(a)}"`).join(", "):"*"}o+=` FROM ${k[String(e)]}`,t.conditions.length>0&&(o+=` WHERE ${t.conditions.join(" AND ")}`),t.orderBy.length>0?o+=` ORDER BY ${t.orderBy.join(", ")}`:o+=" ORDER BY stem ASC";const l=i?.limit||t.limit;return l>0&&(t.offset>0?o+=` LIMIT ${l} OFFSET ${t.offset}`:o+=` LIMIT ${l}`),o}return n};function y(e){return`'${String(e).replace(/'/g,"''")}'`}function T(e){return r=>(r=r||{},(e||[]).filter(t=>typeof r[t]<"u").reduce((t,n)=>Object.assign(t,{[n]:r[n]}),{}))}async function H(e,r=[]){e.__params?.orderBy?.length||(e=e.order("stem","ASC"));const n=await e.orWhere(a=>a.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...r||[]).all(),{contents:s,configs:i}=n.reduce((a,u)=>{if(String(u.stem).split("/").pop()===".navigation"){u.title=u.title?.toLowerCase()==="navigation"?"":u.title;const f=u.path.split("/").slice(0,-1).join("/")||"/";a.configs[f]={...u,...u.body}}else a.contents.push(u);return a},{configs:{},contents:[]}),o=a=>({...T(["title",...r])(a),...a.meta,...L(a?.navigation)?a.navigation:{}}),l=a=>({...T(["title",...r])(a),...L(a?.navigation)?a.navigation:{}}),c=s.reduce((a,u)=>{const f=u.path.substring(1).split("/"),g=u.stem.split("/"),$=!!g[g.length-1]?.match(/([1-9]\d*\.)?index/g),p=h=>({title:h.title,path:h.path,stem:h.stem,children:[],...l(h)}),d=p(u);if($){const h=i[d.path];if(typeof h?.navigation<"u"&&h?.navigation===!1)return a;if(u.path!=="/"){const m=p(u);d.children.push(m)}h&&Object.assign(d,o(h))}if(f.length===1){const h=a.find(m=>m.path===d.path&&m.page===!1);return $&&h?Object.assign(h,{page:void 0,children:[...d.children||[],...h.children||[]]}):a.push(d),a}const O=f.slice(0,-1).reduce((h,m,x)=>{const C="/"+f.slice(0,x+1).join("/"),b=i[C];if(typeof b?.navigation<"u"&&b.navigation===!1)return[];let S=h.find(w=>w.path===C);if(!S){const w=b?o(b):{};S={...w,title:w.title||Q(m),path:C,stem:g.slice(0,x+1).join("/"),children:[],page:!1},h.push(S)}return S.children},a),N=O.find(h=>h.path===d.path&&h.page===!1);return N?Object.assign(N,{...d,page:void 0,children:[...d.children||[],...N.children||[]]}):O.push(d),a},[]);return W(c)}function W(e){const r=e;for(const t of r)t.children?.length?W(t.children):delete t.children;return e}function L(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}const Q=e=>e.split(/[\s-]/g).map(U).join(" ");async function M(e,r,t){const{before:n=1,after:s=1,fields:i=[]}=t||{},o=await H(e,i),l=D(o),c=l.findIndex(f=>f.path===r),a=c===-1?[]:l.slice(c-n,c),u=c===-1?[]:l.slice(c+1,c+s+1);return[...Array.from({length:n}).fill(null).concat(a).slice(a.length),...u.concat(Array.from({length:s}).fill(null)).slice(0,s)]}function D(e){return e.flatMap(t=>{const n=t.children?D(t.children):[];return t.page===!1||n.length&&n.find(s=>s.path===t.path)?n:[{...t,children:void 0},...n]})}const V=/^h([1-6])$/,A=e=>Number(e.match(V)?.[1]??0);async function G(e,r){const{ignoredTags:t=[],extraFields:n=[],minHeading:s="h1",maxHeading:i="h6"}=r||{},o=A(s),l=A(i);return(await e.where("extension","=","md").select("path","body","description","title",...n||[]).all()).flatMap(a=>K(a,{ignoredTags:t,extraFields:n,minLevel:o,maxLevel:l}))}function K(e,{ignoredTags:r,extraFields:t,minLevel:n,maxLevel:s}){const i=!e.body||e.body?.type==="root"?e.body:B(e.body),o=e.path??"",l=T(t)(e),c=[{...l,id:o,title:e.title||"",titles:[],content:(e.description||"").trim(),level:1}];if(!i?.children)return c;let a=1,u=0;const f=[e.title??""];for(const g of i.children){const $=g.tag||"",p=A($);if(p>=n&&p<=s){const d=E(g).trim();p===1?f.splice(0,f.length):p<u?f.splice(p-1,f.length-1):p===u&&f.pop(),c.push({...l,id:`${o}#${g.props?.id}`,title:d,titles:[...f],content:"",level:p}),f.push(d),u=p,a+=1}else{const d=E(g,r).trim();if(a===1&&c[a-1]?.content===d)continue;c[a-1].content=`${c[a-1].content} ${d}`.trim()}}return c}function E(e,r=[]){let t="";return e.type==="text"&&(t+=e.value||""),r.includes(e.tag??"")?"":(e.children?.length&&(t+=e.children.map(n=>E(n,r)).filter(Boolean).join("")),t)}const Y=e=>{const r=F()?.ssrContext?.event;return q(e,(t,n)=>z(r,t,n))};function tt(e,r,t){return j(e,n=>M(n,r,t))}function et(e,r){return j(e,t=>G(t,r))}async function z(e,r,t){return window.WebAssembly?J(r,t):P(e,String(r),t)}async function J(e,r){return await R(()=>import("./By-KnIoE.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(n=>n.loadDatabaseAdapter(e)).then(n=>n.all(r))}function j(e,r){const t=Y(e),n={where(s,i,o){return t.where(String(s),i,o),n},andWhere(s){return t.andWhere(s),n},orWhere(s){return t.orWhere(s),n},order(s,i){return t.order(String(s),i),n},then(s,i){return r(t).then(s,i)},catch(s){return this.then(void 0,s)},finally(s){return this.then(void 0,void 0).finally(s)},get[Symbol.toStringTag](){return"Promise"}};return n}export{tt as a,et as b,Y as q};
