import{q as A}from"./DJYGofPM.js";import{aH as I,aI as $,aJ as R,aK as T,A as d,aL as z,ah as _,y as q,r as m,z as C}from"./gfVstfgO.js";const E=(e,t)=>e.reduce((s,i)=>{const n=t(i);return s[n]||(s[n]=[]),s[n].push(i),s},{}),K=(e,t,s=!1)=>{if(!e)return[];const i=(o,r)=>t(o)-t(r),n=(o,r)=>t(r)-t(o);return e.slice().sort(s===!0?n:i)},k=(e,t,s="asc")=>{if(!e)return[];const i=(o,r)=>`${t(o)}`.localeCompare(t(r)),n=(o,r)=>`${t(r)}`.localeCompare(t(o));return e.slice().sort(s==="desc"?n:i)},y=new WeakMap;function h(e,t,s={}){const{mode:i="replace",route:n=I(),router:o=$(),transform:r}=s;let f=u=>u,g=u=>u;typeof r=="function"?f=r:r&&(r.get&&(f=r.get),r.set&&(g=r.set)),y.has(o)||y.set(o,new Map);const p=y.get(o);let a=n.query[e];R(()=>{a=void 0});let c;const O=T((u,b)=>(c=b,{get(){return u(),f(a!==void 0?a:d(t))},set(l){l=g(l),a!==l&&(a=l===d(t)?void 0:l,p.set(e,l===d(t)?void 0:l),b(),z(()=>{if(p.size===0)return;const Q=Object.fromEntries(p.entries());p.clear();const{params:S,query:w,hash:x}=n;o[d(i)]({params:S,query:{...w,...Q},hash:x})}))}}));return _(()=>n.query[e],u=>{a!==f(u)&&(a=u,c())},{flush:"sync"}),O}function L(e="posts/%"){return A("content").where("stem","LIKE",e).select("categories","date","description","image","path","readingTime","recommend","title","type","updated").all()}function M(e,t){const{bindQuery:s}=t||{},i=s?h(s,void 0):m(),n=C(()=>[...new Set(d(e).map(r=>r.categories?.[0]))]),o=C(()=>d(e).filter(r=>!i.value||r.categories?.[0]===i.value));return{category:i,categories:n,listCategorized:o}}function j(e,t){const s=q(),{bindDirectionQuery:i,bindOrderQuery:n,initialAscend:o=!1,initialOrder:r=s.pagination.sortOrder||"date"}=t||{},f=n?h(n,r):m(r),g={get:c=>c==="true",set:c=>c.toString()},p=i?h(i,o.toString(),{transform:g}):m(o),a=C(()=>k(d(e),c=>c[f.value]||"",p.value?"asc":"desc"));return{sortOrder:f,isAscending:p,listSorted:a}}function G(e){return q().article.categories[e]?.icon??"ph:folder-bold"}function H(e){return q().article.categories[e]?.color??"#888"}function J(e="tech",t){const{prefix:s="text"}=t||{};return`${s}-${e}`}export{j as a,M as b,G as c,H as d,J as e,L as f,E as g,K as s,h as u};
