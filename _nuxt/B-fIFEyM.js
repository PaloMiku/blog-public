const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./D3bBSSOt.js","./DYGa-EZj.js","./entry.Bp-4TZiy.css","./Hz-qS8wY.js","./0Iju0TH6.js","./SteamProfileSection.DsnGfMOG.css","./2VLHBdQv.js","./SteamStatsOverview.CkOMBE9G.css","./DM379Yim.js","./B-Q7bu-f.js","./0pYs9o80.js","./Pagination.DEKPXboi.css","./CoXVAd0R.js","./Tab.B_z8VZ-t.css","./SteamGamesTabs.BY98IZpZ.css"])))=>i.map(i=>d[i]);
import{d as V,B as z,C as B,E as T,r as u,c,N as M,o as N,k as x,h as i,j as t,l as O,i as m,G as q,u as n,q as H,f as _,w as l,Q as f,S as g,R as y,z as Q}from"#entry";import $ from"./CoXVAd0R.js";import{_ as j}from"./-_qGLppl.js";import{u as Z}from"./0Iju0TH6.js";const J={class:"steam-page"},K={class:"mobile-only"},U={key:0,class:"error-state"},W={class:"steam-content"},X={class:"profile-section"},G=12,Y=V({__name:"steam",setup(ee){const E=z(),h=B();T({title:"Steam",meta:[{name:"description",content:`${E.author.name} 的 Steam 个人资料，查看完整的游戏库、游戏时长、成就等信息。`},{property:"og:type",content:"profile"},{name:"keywords",content:"Steam,游戏库,游戏时长,成就"}]}),h.setAside(["blog-tech","comm-group"]);const{fetchSteamData:L}=Z(),P=f(()=>y(()=>import("./D3bBSSOt.js"),__vite__mapDeps([0,1,2,3,4,5]),import.meta.url)),A=f(()=>y(()=>import("./2VLHBdQv.js"),__vite__mapDeps([6,1,2,4,7]),import.meta.url)),F=f(()=>y(()=>import("./DM379Yim.js"),__vite__mapDeps([8,1,2,4,9,10,11,12,13,14]),import.meta.url)),v=u(!0),d=u(!1),s=u(null),o=u(null),S=u(null),b=u(1),p=u(""),k=c(()=>{if(!o.value?.allGames)return[];let a=[...o.value.allGames];if(p.value.trim()){const e=p.value.toLowerCase();a=a.filter(r=>r.name.toLowerCase().includes(e))}return a.sort((e,r)=>r.playtimeForever-e.playtimeForever)});c(()=>Math.ceil(k.value.length/G)),c(()=>{const a=(b.value-1)*G,e=a+G;return k.value.slice(a,e)}),M(p,()=>{b.value=1}),c(()=>s.value?.playtimeStats?.totalForever?s.value.playtimeStats.totalForever:o.value?.allGames?o.value.allGames.reduce((a,e)=>a+e.playtimeForever,0):0),c(()=>{if(!s.value?.currentGame||!o.value?.recentGames)return null;const a=o.value.recentGames.find(e=>e.appid===s.value.currentGame.appid);return a&&s.value.currentGame?{...s.value.currentGame,images:a.images}:s.value.currentGame});const C=async()=>{v.value=!0,d.value=!1,await w()},w=async()=>{try{const a=await L();if(a.success&&a.data){if(s.value=a.data.user,o.value=a.data.games,S.value=a.allMetadata,s.value?.currentGame&&o.value?.recentGames){const e=o.value.recentGames.find(r=>r.appid===s.value.currentGame.appid);e&&(s.value.currentGame={...s.value.currentGame,images:e.images})}}else d.value=!0}catch(a){console.error("Failed to fetch Steam data:",a),d.value=!0}finally{v.value=!1}};return N(w),(a,e)=>{const r=q,D=H,I=$,R=j;return i(),x("div",J,[t("div",K,[m(r,{to:"/",suffix:"Steam"})]),n(d)?(i(),x("div",U,[m(D,{name:"ph:warning-bold",size:"36"}),e[0]||(e[0]=t("p",null,"无法加载部分 Steam 数据（某些模块可能离线）",-1)),e[1]||(e[1]=t("p",{class:"error-detail"},"请检查 API 是否可用或稍后重试",-1)),t("button",{onClick:C}," 重试 ")])):O("",!0),t("div",W,[t("div",X,[(i(),_(g,null,{default:l(()=>[m(n(P),{user:n(s),loading:n(v),metadata:n(S),onRefresh:C},null,8,["user","loading","metadata"])]),fallback:l(()=>[...e[2]||(e[2]=[t("div",{class:"steam-profile-skeleton"},[t("div",{class:"skeleton-avatar"}),t("div",{class:"skeleton-info"},[t("div",{class:"skeleton-text"}),t("div",{class:"skeleton-text short"})])],-1)])]),_:1}))]),(i(),_(g,null,{default:l(()=>[m(n(A),{games:n(o),user:n(s)},null,8,["games","user"])]),fallback:l(()=>[...e[3]||(e[3]=[t("div",{class:"stats-overview"},[t("div",{class:"stat-card"},[t("div",{class:"stat-info"},[t("div",{class:"stat-label"},"加载中"),t("div",{class:"stat-value"},"—")])])],-1)])]),_:1})),(i(),_(g,null,{default:l(()=>[m(n(F),{games:n(o)},null,8,["games"])]),fallback:l(()=>[m(I,{tabs:["最近游戏","游戏库"],center:""},{tab1:l(()=>[...e[4]||(e[4]=[t("div",{class:"tab-content"},[t("div",{class:"empty-state"},[t("p",null,"正在加载最近游戏...")])],-1)])]),tab2:l(()=>[...e[5]||(e[5]=[t("div",{class:"tab-content"},[t("div",{class:"empty-state"},[t("p",null,"正在加载游戏库...")])],-1)])]),_:1})]),_:1}))]),m(R)])}}}),ne=Q(Y,[["__scopeId","data-v-7578cf2a"]]);export{ne as default};
