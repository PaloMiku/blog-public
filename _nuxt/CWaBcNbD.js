import{B as y,c as b,X as h,r as k,d as N,Y as C,Z as x,C as I,$ as V,a0 as M,o as $,a1 as T,k as u,h as c,F as m,j as _,p as A,Q as v,u as f,i as P,P as B,v as E,t as S,z as F}from"#entry";import{u as w}from"./OJGff-Yi.js";function q(i,n){const e=y(),{initialPage:a=1,perPage:o=e.pagination.perPage||10,bindQuery:s=!1}=n??{},r=b(()=>Math.ceil(h(i).length/o)||a);function p(t){const g=Number(t);return g>=1&&g<=r.value?g:a}const l=s?w(s,a.toString(),{transform:p,mode:"push"}):k(a),d=b(()=>{const t=(l.value-1)*o;return h(i).slice(t,t+o)});return{totalPages:r,page:l,listPaged:d}}function z(i,n,e=1){const a=Math.max(2,Math.min(i-e,n-2*e)),o=Math.min(n,a+2*e),s=Array.from({length:o-a+1},(r,p)=>a+p);return a>3&&s.unshift(Number.NEGATIVE_INFINITY),a===3&&s.unshift(2),a>1&&s.unshift(1),o<n-2&&s.push(Number.POSITIVE_INFINITY),o===n-2&&s.push(n-1),o<n&&s.push(n),s}const Q=["aria-label"],Y=["aria-label","onClick","textContent"],Z={key:1,disabled:"",class:"pagination-num"},j={ref:"pagination-anchor"},L=N({__name:"Pagination",props:C({totalPages:{},expandPages:{},sticky:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(i){const n=i,e=x(i,"modelValue"),a=b(()=>z(e.value,n.totalPages,n.expandPages??2)),o=I(),s=V("pagination-anchor"),r=M(s);return $(()=>{o.setTranslate("pagination","0, -2em"),e.value=Number(e.value)}),T(()=>{o.setTranslate("pagination","")}),(p,l)=>{const d=B;return c(),u(m,null,[_("nav",{class:v(["pagination",{sticky:i.sticky,expand:f(r)}]),"aria-label":`第${e.value}页，共${i.totalPages}页`,style:A({"--collapsed-width":`${f(a).length*2+6}em`})},[P(d,{disabled:e.value<=1,class:"pagination-button rtl-flip",icon:"ph:arrow-fat-left-duotone","aria-label":"上一页",onClick:l[0]||(l[0]=t=>e.value--)},null,8,["disabled"]),(c(!0),u(m,null,E(f(a),t=>(c(),u(m,{key:t},[Number.isFinite(t)?(c(),u("button",{key:0,class:v(["pagination-num",{active:t===e.value}]),"aria-label":`第${t}页`,onClick:g=>e.value=t,textContent:S(t)},null,10,Y)):(c(),u("button",Z," … "))],64))),128)),P(d,{disabled:e.value>=i.totalPages,class:"pagination-button rtl-flip",icon:"ph:arrow-fat-right-duotone","aria-label":"下一页",onClick:l[1]||(l[1]=t=>e.value++)},null,8,["disabled"])],14,Q),_("div",j,null,512)],64)}}}),D=Object.assign(F(L,[["__scopeId","data-v-437807fc"]]),{__name:"ZPagination"});export{D as _,q as u};
