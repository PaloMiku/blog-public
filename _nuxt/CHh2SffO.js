import{d as x,R as S,ak as U,ag as G,n as d,p as r,v as w,P as g,C as _,O as Q,V as i,x as b,Q as f,j as e,ai as X,ah as F,Z as R,B as u,a3 as Y,a1 as L,_ as B,r as O,U as J,aS as K,F as q,y as W,D as H,Y as Z,aI as ee,$ as te,X as oe,l as ne,G as ae,ay as j,az as E,aT as se}from"./Vzir-G6h.js";import{g as T,a as V,b as N,i as re}from"./prolpYss.js";import{g as ie}from"./CTmFwr78.js";import ce from"./DmA0xcsq.js";import le from"./CV6wvvPL.js";import{u as z}from"./DVIsC-j3.js";import{q as M}from"./CupuFMHi.js";import{_ as de}from"./JB7G4a9P.js";import pe from"./DTDNqcbx.js";import"./CeFnUgZz.js";import"./hbOoBq-x.js";import"./COOslDe0.js";import"./wSbNHcIL.js";import"./B3uheAhd.js";const _e={class:"post-nav"},ue={class:"operations"},me={key:0,class:"post-info"},fe=["datetime"],ge=["datetime"],he={key:2,class:"article-category"},ye={class:"wordcount"},ve=x({inheritAttrs:!1,__name:"PostHeader",props:{_path:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},cover_revert:{type:Boolean},hideInfo:{type:Boolean},recommend:{type:[Number,Boolean]},references:{},readingTime:{}},setup($){var D,k;const n=$,c=S(),a=T(n.date),l=T(n.updated),o=(D=n.categories)==null?void 0:D[0],p=ie((k=n.categories)==null?void 0:k[0]),m=`【${c.title}】${n.title}

${n.description?`${n.description}

`:""}${new URL(n._path,c.url).href}`,{copy:v,copied:h}=U(m);return(t,s)=>{var A;const I=Q,P=X,y=R,C=G("tip");return r(),d("div",{class:L(["post-header",{"has-cover":t.image,"text-revert":t.cover_revert}])},[t.image?(r(),w(I,{key:0,class:"post-cover",src:t.image,alt:t.title},null,8,["src","alt"])):g("",!0),_("div",_e,[_("div",ue,[i(P,{icon:e(h)?"ph:check-bold":"ph:share-bold",onClick:s[0]||(s[0]=Oe=>e(v)())},{default:b(()=>s[1]||(s[1]=[f(" 文字分享 ")])),_:1},8,["icon"])]),t.hideInfo?g("",!0):(r(),d("div",me,[t.date?F((r(),d("time",{key:0,datetime:("getIsoDatetime"in t?t.getIsoDatetime:e(N))(t.date)},[i(y,{name:"ph:calendar-dots-bold"}),f(" "+u(e(a)),1)],8,fe)),[[C,`创建于 ${("getLocaleDatetime"in t?t.getLocaleDatetime:e(V))(n.date)}`]]):g("",!0),("isTimeDiffSignificant"in t?t.isTimeDiffSignificant:e(re))(t.date,t.updated,.999)?F((r(),d("time",{key:1,datetime:("getIsoDatetime"in t?t.getIsoDatetime:e(N))(t.updated)},[i(y,{name:"ph:calendar-plus-bold"}),f(" "+u(e(l)),1)],8,ge)),[[C,`修改于 ${("getLocaleDatetime"in t?t.getLocaleDatetime:e(V))(n.updated)}`]]):g("",!0),e(o)?(r(),d("span",he,[i(y,{name:e(p)},null,8,["name"]),f(" "+u(e(o)),1)])):g("",!0),_("span",ye,[i(y,{name:"ph:paragraph-bold"}),f(" "+u(("formatNumber"in t?t.formatNumber:e(Y))((A=t.readingTime)==null?void 0:A.words))+" 字 ",1)])]))]),_("h1",{class:L(["post-title",{"text-story text-center":t.type==="story"}])},u(t.title),3)],2)}}}),be=Object.assign(B(ve,[["__scopeId","data-v-09a7741c"]]),{__name:"PostHeader"}),$e={class:"md-excerpt gradient-card"},ke=x({__name:"Excerpt",props:{excerpt:{}},setup($){var o;const n=$,c=S(),a=O(n.excerpt),l=O("");return((o=c.content.excerpt)==null?void 0:o.animation)!==!1&&(a.value="",J(async()=>{var p;l.value=((p=c.content.excerpt)==null?void 0:p.caret)??"_";for(const m of n.excerpt)a.value+=m,await K(50);l.value=""})),(p,m)=>{const v=R;return r(),d("div",$e,[i(v,{name:"ph:highlighter-bold"}),f(u(e(a))+u(e(l)),1)])}}}),De=Object.assign(B(ke,[["__scopeId","data-v-1ee9f7a1"]]),{__name:"PostExcerpt"}),Ie={class:"post-footer"},Pe={key:0,class:"reference"},Ce={class:"content"},we={key:0},xe={class:"license"},Be={class:"content"},Le=x({inheritAttrs:!1,__name:"PostFooter",props:{_path:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},cover_revert:{type:Boolean},hideInfo:{type:Boolean},recommend:{type:[Number,Boolean]},references:{},readingTime:{}},setup($){const n=S();return(c,a)=>{const l=le;return r(),d("div",Ie,[c.references?(r(),d("section",Pe,[a[0]||(a[0]=_("div",{id:"references",class:"title"}," 参考链接 ",-1)),_("div",Ce,[_("ul",null,[(r(!0),d(q,null,W(c.references,(o,p)=>(r(),d("li",{key:p},[typeof o=="string"?(r(),d("p",we,u(o),1)):(r(),w(l,{key:1,href:o.link},{default:b(()=>[f(u((o==null?void 0:o.title)??o.link),1)]),_:2},1032,["href"]))]))),128))])])])):g("",!0),_("section",xe,[a[3]||(a[3]=_("div",{class:"title"}," 许可协议 ",-1)),_("div",Be,[_("p",null,[a[1]||(a[1]=f(" 本文采用 ")),i(l,{href:e(n).copyright.url},{default:b(()=>[f(u(e(n).copyright.name),1)]),_:1},8,["href"]),a[2]||(a[2]=f(" 许可协议，转载请注明出处。 "))])])])])}}}),Te=Object.assign(B(Le,[["__scopeId","data-v-7f040ea6"]]),{__name:"PostFooter"}),Ne=["datetime"],Se={key:0,class:"surround-post"},Re=x({__name:"PostSurround",async setup($){let n,c;const a=H(),{data:l}=([n,c]=Z(()=>z(`surround-${a.path}`,()=>M().only(["_path","date","title","type"]).sort({date:1}).where({_original_dir:{$eq:"/posts"}}).findSurround(a.path))),n=await n,c(),n),[o=null,p=null]=l.value??[],[m,v]=ee();return(h,D)=>{const k=R,t=te;return r(),d(q,null,[i(e(m),null,{default:b(({post:s,icon:I,fallbackIcon:P,fallbackText:y})=>[i(t,{to:s==null?void 0:s._path,class:"surround-link"},{default:b(()=>[i(k,{name:s?I:P},null,8,["name"]),_("div",null,[_("strong",{class:L(["title",{"text-story":(s==null?void 0:s.type)==="story"}])},u((s==null?void 0:s.title)||y),3),s?(r(),d("time",{key:0,datetime:("getIsoDatetime"in h?h.getIsoDatetime:e(N))(s.date)},u(("getPostDate"in h?h.getPostDate:e(T))(s.date)),9,Ne)):g("",!0)])]),_:2},1032,["to"])]),_:1}),e(o)||e(p)?(r(),d("div",Se,[i(e(v),{post:e(p),icon:"solar:rewind-back-bold-duotone","fallback-icon":"solar:document-add-bold-duotone","fallback-text":"新故事即将发生"},null,8,["post"]),i(e(v),{post:e(o),class:"align-right",icon:"solar:rewind-forward-bold-duotone","fallback-icon":"solar:reel-bold-duotone","fallback-text":"已抵达博客尽头"},null,8,["post"])])):g("",!0)],64)}}}),Ae=Object.assign(B(Re,[["__scopeId","data-v-46d40c31"]]),{__name:"PostSurround"}),Fe=x({__name:"[...slug]",async setup($){let n,c;const a=H(),l=oe();l.setAside(["toc"]);const{data:o}=([n,c]=Z(()=>z(a.path,()=>M(a.path).findOne(),"$BPopkF1nvN")),n=await n,c(),n),p=ne(()=>{var m;return((m=o.value)==null?void 0:m.description)||""});return o.value?(ae({title:o.value.title,meta:[{property:"og:type",content:"article"},{property:"og:image",content:o.value.image},{name:"description",content:o.value.description}]}),l.setAside(o.value.aside)):(a.meta.title="404",l.setAside(["blog-log"])),(m,v)=>{const h=be,D=De,k=ce,t=se,s=Te,I=Ae,P=de,y=pe;return r(),w(y,{value:e(o)},{empty:b(()=>[i(t,{icon:"solar:confounded-square-bold-duotone",title:"内容为空或页面不存在"})]),default:b(()=>{var C;return[i(h,j(E(e(o))),null,16),e(p)?(r(),w(D,{key:0,excerpt:e(p)},null,8,["excerpt"])):g("",!0),i(k,{class:L(["article",{"md-story":((C=e(o))==null?void 0:C.type)==="story"}]),value:e(o)??{},tag:"article"},null,8,["class","value"]),i(s,j(E(e(o))),null,16),i(I),(r(),w(P,{key:e(a).path}))]}),_:1},8,["value"])}}}),Ke=B(Fe,[["__scopeId","data-v-4f044f14"]]);export{Ke as default};
