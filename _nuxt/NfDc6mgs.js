import{q as A}from"./BKVI6smy.js";import{aD as $,aE as I,aF as R,aG as T,z as d,aH as z,af as D,x as b,r as y,y as h}from"./D4rvfVLF.js";const v=(e,t)=>e.reduce((r,i)=>{const n=t(i);return r[n]||(r[n]=[]),r[n].push(i),r},{}),G=(e,t,r=!1)=>{if(!e)return[];const i=(o,s)=>t(o)-t(s),n=(o,s)=>t(s)-t(o);return e.slice().sort(r===!0?n:i)},E=(e,t,r="asc")=>{if(!e)return[];const i=(o,s)=>`${t(o)}`.localeCompare(t(s)),n=(o,s)=>`${t(s)}`.localeCompare(t(o));return e.slice().sort(r==="desc"?n:i)},m=new WeakMap;function C(e,t,r={}){const{mode:i="replace",route:n=$(),router:o=I(),transform:s}=r;let f=u=>u,g=u=>u;typeof s=="function"?f=s:s&&(s.get&&(f=s.get),s.set&&(g=s.set)),m.has(o)||m.set(o,new Map);const p=m.get(o);let a=n.query[e];R(()=>{a=void 0});let c;const x=T((u,q)=>(c=q,{get(){return u(),f(a!==void 0?a:d(t))},set(l){l=g(l),a!==l&&(a=l===d(t)?void 0:l,p.set(e,l===d(t)?void 0:l),q(),z(()=>{if(p.size===0)return;const O=Object.fromEntries(p.entries());p.clear();const{params:Q,query:S,hash:w}=n;o[d(i)]({params:Q,query:{...S,...O},hash:w})}))}}));return D(()=>n.query[e],u=>{a!==f(u)&&(a=u,c())},{flush:"sync"}),x}function M(e="posts/%"){return A("content").where("stem","LIKE",e).select("categories","date","description","image","path","readingTime","recommend","title","type","updated").all()}function j(e,t){const{bindQuery:r}=t||{},i=r?C(r,void 0):y(),n=h(()=>[...new Set(d(e).map(s=>s.categories?.[0]))]),o=h(()=>d(e).filter(s=>!i.value||s.categories?.[0]===i.value));return{category:i,categories:n,listCategorized:o}}function F(e,t){const r=b(),{bindDirectionQuery:i,bindOrderQuery:n,initialAscend:o=!1,initialOrder:s=r.pagination.sortOrder||"date"}=t||{},f=n?C(n,s):y(s),g={get:c=>c==="true",set:c=>c.toString()},p=i?C(i,o.toString(),{transform:g}):y(o),a=h(()=>E(d(e),c=>c[f.value]||"",p.value?"asc":"desc"));return{sortOrder:f,isAscending:p,listSorted:a}}function H(e){return b().article.categories[e]?.icon??"ph:folder-bold"}function K(e="tech",t){const{prefix:r="text"}=t||{};return`${r}-${e}`}export{F as a,j as b,H as c,K as d,M as e,v as g,G as s,C as u};
