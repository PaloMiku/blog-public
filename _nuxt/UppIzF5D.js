import{_ as Z}from"./DaGoko1i.js";import{_ as j,i as W}from"./Sbd6x6VZ.js";import{J as U,x as C,Q as g,aO as o,aN as T,aR as D,aS as h,K as t,aU as B,b6 as i,b9 as p,aV as w,b8 as z,bs as F,b5 as I,ah as q,bq as E,l as A,aW as L,aY as G,bd as H}from"./C30-xQm5.js";import{j as J,c as K,d as P,t as Q}from"./Cc1liqSW.js";import{g as $,i as M}from"./cgQ6B8yX.js";import{a as X,b as ee,c as te,g as ae}from"./CmOexqIo.js";import"./D-deoX8n.js";import"./CTm1wevL.js";const se={class:"article-item"},ne={class:"article-title"},ie=U({__name:"Archive",props:{to:{},useUpdated:{type:Boolean},path:{},readingTime:{},title:{},subtitle:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{},"hide-info":{type:Boolean}},setup(e){const r=e,d=C(()=>r.useUpdated?r.updated:r.date);return(n,f)=>{const _=j,b=F,k=J;return o(),g("li",se,[t(d)?(o(),T(_,{key:0,datetime:t(d),title:("getLocaleDatetime"in n?n.getLocaleDatetime:t($))(t(d)),month:"2-digit",day:"2-digit"},null,8,["datetime","title"])):D("",!0),h(k,{class:"article-link gradient-card",to:e.to,title:e.description},{default:B(()=>[i("span",ne,p(e.title),1),e.date&&e.useUpdated&&("isTimeDiffSignificant"in n?n.isTimeDiffSignificant:t(M))(e.date,e.updated)?(o(),g(w,{key:0},[f[0]||(f[0]=z("   ",-1)),h(_,{class:"aux-date",datetime:e.date,title:("getLocaleDatetime"in n?n.getLocaleDatetime:t($))(e.date),year:t(W)(e.date,e.updated??0)?void 0:"numeric",month:"2-digit",day:"2-digit"},null,8,["datetime","title","year"])],64)):D("",!0),e.image?(o(),T(b,{key:1,class:"article-cover",src:e.image,alt:e.title,loading:"lazy"},null,8,["src","alt"])):D("",!0)]),_:1},8,["to","title"])])}}}),oe=Object.assign(I(ie,[["__scopeId","data-v-41660236"]]),{__name:"ZArchive"}),re={class:"archive proper-height"},le={class:"archive-title"},de={class:"archive-year"},ce={class:"archive-age"},ue={class:"archive-info"},me=U({__name:"archive",async setup(e){let r,d;const n=K();q({title:"归档",meta:[{property:"og:type",content:"website"},{name:"description",content:`${n.title}的所有文章归档，按时间年份分类展示所有已发布的文章。`},{name:"keywords",content:"归档,文章分类,时间线,文章列表"}]});const f=n.component.stats.birthYear;P().setAside(["blog-stats","blog-log"]);const{data:b}=([r,d]=E(()=>X()),r=await r,d(),r),{listSorted:k,isAscending:v,sortOrder:c}=ee(b),{category:N,categories:O,listCategorized:V}=te(k),x=C(()=>{const u=Object.entries(ae(V.value,a=>{try{const l=a[c.value];if(!l)return 0;const m=new Date(l);return Number.isNaN(m.getTime())?0:m.getFullYear()}catch(l){return console.error(`Invalid date: ${a[c.value]}`,l),0}}));return v.value?u:u.reverse()}),Y=C(()=>x.value.reduce((u,[a,l])=>{const m=l?.reduce((s,y)=>s+y.readingTime.words,0)||0;return u[a]=Q(m),u},{}));return(u,a)=>{const l=Z,m=oe;return o(),g("div",re,[h(l,{"is-ascending":t(v),"onUpdate:isAscending":a[0]||(a[0]=s=>A(v)?v.value=s:null),"sort-order":t(c),"onUpdate:sortOrder":a[1]||(a[1]=s=>A(c)?c.value=s:null),category:t(N),"onUpdate:category":a[2]||(a[2]=s=>A(N)?N.value=s:null),categories:t(O)},null,8,["is-ascending","sort-order","category","categories"]),(o(!0),g(w,null,L(t(x),([s,y])=>(o(),g("section",{key:s,class:"archive-group"},[i("div",le,[i("h2",de,p(s),1),i("div",ce,[i("span",null,p(Number(s)-t(f)),1),a[3]||(a[3]=i("span",{class:"age-label"},"岁",-1))]),i("div",ue,[i("span",null,p(t(Y)[s])+"字",1),i("span",null,p(y?.length)+"篇",1)])]),h(H,{tag:"menu",class:"archive-list",name:"float-in"},{default:B(()=>[(o(!0),g(w,null,L(y,(S,R)=>(o(),T(m,G({key:S.path},{ref_for:!0},S,{to:S.path,"use-updated":t(c)==="updated",style:{"--delay":`${R*.03}s`}}),null,16,["to","use-updated","style"]))),128))]),_:2},1024)]))),128))])}}}),ke=I(me,[["__scopeId","data-v-3d060643"]]);export{ke as default};
