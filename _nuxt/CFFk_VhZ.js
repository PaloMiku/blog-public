import{d as P,B as L,c as A,$ as Y,a0 as G,k as f,h as s,X as k,f as $,l as v,j as d,n as J,i as c,P as Q,u as e,w as C,y as h,a1 as F,q as R,t as y,Y as W,z as N,r as j,o as ee,a2 as te,F as B,v as oe,a3 as Z,D as O,a4 as ne,_ as ae,C as se,a5 as ce,E as re,H as q,I as z,a6 as ie}from"#entry";import{_ as V}from"./_va1mDQG.js";import{g as H,i as le}from"./DjWPuc-B.js";import{d as de,e as E}from"./CaK2fdVU.js";import{_ as ue,a as me}from"./CMYZWM0p.js";import pe from"./lC7elAEK.js";import{u as M,a as _e,q as fe}from"./CVKEoqRs.js";import{u as ge}from"./B1mPrnRu.js";import"./rJCbAzvX.js";const ve={class:"post-nav"},he={class:"operations"},ye={key:0,class:"post-info"},be={key:2},xe=P({inheritAttrs:!1,__name:"PostHeader",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{}},setup(t){const n=t,u=L(),o=A(()=>n.categories?.[0]),m=A(()=>de(o.value)),i=`【${u.title}】${n.title}

${n.description?`${n.description}

`:""}${new URL(n.path,u.url).href}`,{copy:p,copied:a}=Y(i);return(r,g)=>{const T=J,b=Q,x=V,l=R,_=G("tip");return s(),f("div",{class:k(["post-header",{"has-cover":t.image,"text-revert":t.meta?.coverRevert}])},[t.image?(s(),$(T,{key:0,class:"post-cover",src:t.image,alt:t.title},null,8,["src","alt"])):v("",!0),d("div",ve,[d("div",he,[c(b,{icon:e(a)?"ph:check-bold":"ph:share-bold",onClick:g[0]||(g[0]=D=>e(p)())},{default:C(()=>[...g[1]||(g[1]=[h(" 文字分享 ",-1)])]),_:1},8,["icon"])]),t.meta?.hideInfo?v("",!0):(s(),f("div",ye,[t.date?F((s(),$(x,{key:0,date:t.date,icon:"ph:calendar-dots-bold"},null,8,["date"])),[[_,`创建于 ${("getLocaleDatetime"in r?r.getLocaleDatetime:e(H))(t.date)}`]]):v("",!0),t.updated&&("isTimeDiffSignificant"in r?r.isTimeDiffSignificant:e(le))(t.date,t.updated,.999)?F((s(),$(x,{key:1,date:t.updated,icon:"ph:calendar-plus-bold"},null,8,["date"])),[[_,`修改于 ${("getLocaleDatetime"in r?r.getLocaleDatetime:e(H))(t.updated)}`]]):v("",!0),e(o)?(s(),f("span",be,[c(l,{name:e(m)},null,8,["name"]),h(" "+y(e(o)),1)])):v("",!0),d("span",null,[c(l,{name:"ph:paragraph-bold"}),h(" "+y(("formatNumber"in r?r.formatNumber:e(W))(t.readingTime?.words))+" 字 ",1)])]))]),d("h1",{class:k(["post-title",("getPostTypeClassName"in r?r.getPostTypeClassName:e(E))(t.type)])},y(t.title),3)],2)}}}),$e=Object.assign(N(xe,[["__scopeId","data-v-55ada320"]]),{__name:"PostHeader"}),ke={class:"md-excerpt gradient-card"},Ce=P({__name:"Excerpt",props:{excerpt:{}},setup(t){const n=t,u=L(),o=j(n.excerpt),m=j("");return u.component.excerpt?.animation!==!1&&(o.value="",ee(async()=>{m.value=u.component.excerpt?.caret??"_";for(const i of n.excerpt)o.value+=i,await te(50);m.value=""})),(i,p)=>{const a=R;return s(),f("div",ke,[c(a,{name:"ph:highlighter-bold"}),h(y(e(o))+y(e(m)),1)])}}}),Pe=Object.assign(N(Ce,[["__scopeId","data-v-186a6ec2"]]),{__name:"PostExcerpt"}),Te={class:"post-footer"},De={key:0,class:"reference"},Ne={class:"content"},we={class:"license"},Ie={class:"content"},Se=P({inheritAttrs:!1,__name:"PostFooter",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{}},setup(t){const n=L();return(u,o)=>{const m=pe;return s(),f("div",Te,[t.references?(s(),f("section",De,[o[0]||(o[0]=d("div",{id:"references",class:"title text-creative"}," 参考链接 ",-1)),d("div",Ne,[d("ul",null,[(s(!0),f(B,null,oe(t.references,({title:i,link:p},a)=>(s(),f("li",{key:a},[c(m,{href:p||""},{default:C(()=>[h(y(i??p),1)]),_:2},1032,["href"])]))),128))])])])):v("",!0),d("section",we,[o[3]||(o[3]=d("div",{class:"title text-creative"}," 许可协议 ",-1)),d("div",Ie,[d("p",null,[o[1]||(o[1]=h(" 本文采用 ",-1)),c(m,{href:e(n).copyright.url},{default:C(()=>[h(y(e(n).copyright.name),1)]),_:1},8,["href"]),o[2]||(o[2]=h(" 许可协议，转载请注明出处。 ",-1))])])])])}}}),Ae=Object.assign(N(Se,[["__scopeId","data-v-cdb923bb"]]),{__name:"PostFooter"}),Le={class:"surround-text"},Re={key:0,class:"surround-post",dir:"ltr"},Be=P({__name:"PostSurround",async setup(t){let n,u;const o=Z(),{data:m}=([n,u]=O(()=>M(`surround-${o.path}`,()=>_e("content",o.path,{fields:["date","title","type"]}).order("date","ASC").where("stem","LIKE","posts/%"))),n=await n,u(),n),[i=null,p=null]=m.value??[],[a,r]=ne({inheritAttrs:!1});return(g,T)=>{const b=R,x=V,l=ae;return s(),f(B,null,[c(e(a),null,{default:C(({post:_,icon:D,fallbackIcon:w,fallbackText:I,alignEnd:S})=>[c(l,{to:_?.path,class:"surround-link","align-end":S},{default:C(()=>[c(b,{class:k({"rtl-flip":_}),name:_?D:w},null,8,["class","name"]),d("div",Le,[d("strong",{class:k(["title",("getPostTypeClassName"in g?g.getPostTypeClassName:e(E))(_?.type)])},y(_?.title||I),3),_?.date?(s(),$(x,{key:0,class:"date",date:_.date},null,8,["date"])):v("",!0)])]),_:2},1032,["to","align-end"])]),_:1}),e(i)||e(p)?(s(),f("div",Re,[c(e(r),{post:e(p),icon:"solar:rewind-back-bold-duotone","fallback-icon":"solar:document-add-bold-duotone","fallback-text":"新故事即将发生"},null,8,["post"]),c(e(r),{post:e(i),icon:"solar:rewind-forward-bold-duotone","fallback-icon":"solar:reel-bold-duotone","fallback-text":"已抵达博客尽头","align-end":""},null,8,["post"])])):v("",!0)],64)}}}),Ee=Object.assign(N(Be,[["__scopeId","data-v-5bbacfc0"]]),{__name:"PostSurround"}),Ke=P({__name:"[...slug]",async setup(t){let n,u;const o=Z();function m(l){return!l||l==="/"?l:l.replace(/\/$/,"")}const i=se();i.setAside(["toc"]);const p=m(o.path),{data:a}=([n,u]=O(()=>M(()=>p,()=>fe("content").path(p).first(),"$BPopkF1nvN")),n=await n,u(),n),r=ge(),{toc:g,meta:T}=ce(r),b=A(()=>a.value?.description||"");function x(){g.value=a.value?.body.toc,T.value=a.value?.meta}return x(),a.value?(re({title:a.value.title,meta:[{property:"og:type",content:"article"},{property:"og:image",content:a.value.image},{name:"description",content:a.value.description}]}),i.setAside(a.value.meta?.aside)):(o.meta.title="404",i.setAside(["blog-log"])),(l,_)=>{const D=$e,w=Pe,I=ue,S=Ae,K=Ee,U=me,X=ie;return e(a)?(s(),f(B,{key:0},[c(D,q(z(e(a))),null,16),e(b)?(s(),$(w,{key:0,excerpt:e(b)},null,8,["excerpt"])):v("",!0),c(I,{class:k(["article",("getPostTypeClassName"in l?l.getPostTypeClassName:e(E))(e(a)?.type,{prefix:"md"})]),value:e(a),tag:"article"},null,8,["class","value"]),c(S,q(z(e(a))),null,16),c(K),c(U)],64)):(s(),$(X,{key:1,icon:"solar:confounded-square-bold-duotone",title:"内容为空或页面不存在"}))}}});export{Ke as default};
