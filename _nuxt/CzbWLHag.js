import{D as b,F as A,G as R,H as $,c as C}from"./Bg25sFHQ.js";import{u as I}from"./BYsEZS4B.js";import{q as O}from"./aSZOqcLk.js";import{R as Q,_ as f,s as k,q as z,r as m,k as g}from"./CDBNL-Sb.js";function M(e,t,r){const[o,n]=b(r?.in,e,t);return o.getFullYear()===n.getFullYear()}const j=(e,t)=>e.reduce((r,o)=>{const n=t(o);return r[n]||(r[n]=[]),r[n].push(o),r},{}),H=(e,t,r=!1)=>{if(!e)return[];const o=(a,s)=>t(a)-t(s),n=(a,s)=>t(s)-t(a);return e.slice().sort(r===!0?n:o)},F=(e,t,r="asc")=>{if(!e)return[];const o=(a,s)=>`${t(a)}`.localeCompare(t(s)),n=(a,s)=>`${t(s)}`.localeCompare(t(a));return e.slice().sort(r==="desc"?n:o)},d=new WeakMap;function T(e,t,r={}){const{mode:o="replace",route:n=A(),router:a=R(),transform:s}=r;let l=i=>i,y=i=>i;typeof s=="function"?l=s:s&&(s.get&&(l=s.get),s.set&&(y=s.set)),d.has(a)||d.set(a,new Map);const p=d.get(a);let c=n.query[e];$(()=>{c=void 0});let h;const x=Q((i,q)=>(h=q,{get(){return i(),l(c!==void 0?c:f(t))},set(u){u=y(u),c!==u&&(c=u===f(t)?void 0:u,p.set(e,u===f(t)?void 0:u),q(),k(()=>{if(p.size===0)return;const _=Object.fromEntries(p.entries());p.clear();const{params:w,query:D,hash:S}=n;a[f(o)]({params:w,query:{...D,..._},hash:S})}))}}));return z(()=>n.query[e],i=>{c!==l(i)&&(c=i,h())},{flush:"sync"}),x}function K(e="posts/%"){return I(`index_${e}`,()=>O("content").where("stem","LIKE",e).select("categories","date","description","image","path","readingTime","recommend","title","type","updated").all(),{default:()=>[]})}function L(e,t){const{bindQuery:r}=t??{},o=r?T(r,void 0,{transform:s=>s,mode:"push"}):m(),n=g(()=>[...new Set(f(e).map(s=>s.categories?.[0]))]),a=g(()=>f(e).filter(s=>!o.value||s.categories?.[0]===o.value));return{category:o,categories:n,listCategorized:a}}function N(e){const t=C(),r=m(t.pagination.sortOrder||"date"),o=m(),n=g(()=>F(f(e),a=>a[r.value]||"",o.value?"asc":"desc"));return{sortOrder:r,isAscending:o,listSorted:n}}function P(e){return C().article.categories[e]?.icon??"ph:folder-bold"}function W(e="tech",t={prefix:"text"}){const{prefix:r="text"}=t;return`${r}-${e}`}export{K as a,N as b,L as c,P as d,W as e,j as g,M as i,H as s,T as u};
