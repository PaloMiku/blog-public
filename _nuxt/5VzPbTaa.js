const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./CrdrBHGA.js","./CqUo3a93.js","./entry.ChgSspaf.css","./I8QcS36K.js"])))=>i.map(i=>d[i]);
import{aR as _,aA as R,aS as U,b as B}from"./CqUo3a93.js";import{t as F,b as k}from"./I8QcS36K.js";import{t as P}from"./CK5gOxmq.js";const w=(e,r)=>{const t=e._conditions;return t.length>0?`(${t.join(` ${r} `)})`:""},I=e=>{const r=[],t={_conditions:r,where(n,s,i){let o;switch(s.toUpperCase()){case"IN":case"NOT IN":if(Array.isArray(i)){const c=i.map(u=>y(u)).join(", ");o=`"${String(n)}" ${s.toUpperCase()} (${c})`}else throw new TypeError(`Value for ${s} must be an array`);break;case"BETWEEN":case"NOT BETWEEN":if(Array.isArray(i)&&i.length===2)o=`"${String(n)}" ${s.toUpperCase()} ${y(i[0])} AND ${y(i[1])}`;else throw new Error(`Value for ${s} must be an array with two elements`);break;case"IS NULL":case"IS NOT NULL":o=`"${String(n)}" ${s.toUpperCase()}`;break;case"LIKE":case"NOT LIKE":o=`"${String(n)}" ${s.toUpperCase()} ${y(i)}`;break;default:o=`"${String(n)}" ${s} ${y(typeof i=="boolean"?Number(i):i)}`}return r.push(`${o}`),t},andWhere(n){const s=n(I());return r.push(w(s,"AND")),t},orWhere(n){const s=n(I());return r.push(w(s,"OR")),t}};return t},q=(e,r)=>{const t={conditions:[],selectedFields:[],offset:0,limit:0,orderBy:[],count:{field:"",distinct:!1}},n={__params:t,andWhere(i){const o=i(I());return t.conditions.push(w(o,"AND")),n},orWhere(i){const o=i(I());return t.conditions.push(w(o,"OR")),n},path(i){return n.where("path","=",_(i))},skip(i){return t.offset=i,n},where(i,o,c){return n.andWhere(u=>u.where(String(i),o,c)),n},limit(i){return t.limit=i,n},select(...i){return i.length&&t.selectedFields.push(...i),n},order(i,o){return t.orderBy.push(`"${String(i)}" ${o}`),n},async all(){return r(e,s()).then(i=>i||[])},async first(){return r(e,s({limit:1})).then(i=>i[0]||null)},async count(i="*",o=!1){return r(e,s({count:{field:String(i),distinct:o}})).then(c=>c[0].count)}};function s(i={}){let o="SELECT ";if(i?.count)o+=`COUNT(${i.count.distinct?"DISTINCT ":""}${i.count.field}) as count`;else{const u=Array.from(new Set(t.selectedFields));o+=u.length>0?u.map(a=>`"${String(a)}"`).join(", "):"*"}o+=` FROM ${F[String(e)]}`,t.conditions.length>0&&(o+=` WHERE ${t.conditions.join(" AND ")}`),t.orderBy.length>0?o+=` ORDER BY ${t.orderBy.join(", ")}`:o+=" ORDER BY stem ASC";const c=i?.limit||t.limit;return c>0&&(t.offset>0?o+=` LIMIT ${c} OFFSET ${t.offset}`:o+=` LIMIT ${c}`),o}return n};function y(e){return`'${String(e).replace(/'/g,"''")}'`}function C(e){return r=>(r=r||{},(e||[]).filter(t=>typeof r[t]<"u").reduce((t,n)=>Object.assign(t,{[n]:r[n]}),{}))}async function H(e,r=[]){e.__params?.orderBy?.length||(e=e.order("stem","ASC"));const n=await e.orWhere(a=>a.where("navigation","<>","false").where("navigation","IS NULL")).select("navigation","stem","path","title","meta",...r||[]).all(),{contents:s,configs:i}=n.reduce((a,l)=>{if(String(l.stem).split("/").pop()===".navigation"){l.title=l.title?.toLowerCase()==="navigation"?"":l.title;const f=l.path.split("/").slice(0,-1).join("/")||"/";a.configs[f]={...l,...l.body}}else a.contents.push(l);return a},{configs:{},contents:[]}),o=a=>({...C(["title",...r])(a),...a.meta,...x(a?.navigation)?a.navigation:{}}),c=a=>({...C(["title",...r])(a),...x(a?.navigation)?a.navigation:{}}),u=s.reduce((a,l)=>{const f=l.path.substring(1).split("/"),d=l.stem.split("/"),m=!!d[d.length-1]?.match(/([1-9]\d*\.)?index/g),E=h=>({title:h.title,path:h.path,stem:h.stem,children:[],...c(h)}),p=E(l);if(m){const h=i[p.path];if(typeof h?.navigation<"u"&&h?.navigation===!1)return a;if(l.path!=="/"){const g=E(l);p.children.push(g)}h&&Object.assign(p,o(h))}if(f.length===1){const h=a.find(g=>g.path===p.path&&g.page===!1);return m&&h?Object.assign(h,{page:void 0,children:[...p.children||[],...h.children||[]]}):a.push(p),a}const T=f.slice(0,-1).reduce((h,g,O)=>{const v="/"+f.slice(0,O+1).join("/"),S=i[v];if(typeof S?.navigation<"u"&&S.navigation===!1)return[];let $=h.find(b=>b.path===v);if(!$){const b=S?o(S):{};$={...b,title:b.title||Q(g),path:v,stem:d.slice(0,O+1).join("/"),children:[],page:!1},h.push($)}return $.children},a),N=T.find(h=>h.path===p.path&&h.page===!1);return N?Object.assign(N,{...p,page:void 0,children:[...p.children||[],...N.children||[]]}):T.push(p),a},[]);return D(u)}function D(e){const r=e;for(const t of r)t.children?.length?D(t.children):delete t.children;return e}function x(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}const Q=e=>e.split(/[\s-]/g).map(R).join(" ");async function M(e,r,t){const{before:n=1,after:s=1,fields:i=[]}=t||{},o=await H(e,i),c=L(o),u=c.findIndex(f=>f.path===r),a=u===-1?[]:c.slice(u-n,u),l=u===-1?[]:c.slice(u+1,u+s+1);return[...Array.from({length:n}).fill(null).concat(a).slice(a.length),...l.concat(Array.from({length:s}).fill(null)).slice(0,s)]}function L(e){return e.flatMap(t=>{const n=t.children?L(t.children):[];return t.page===!1||n.length&&n.find(s=>s.path===t.path)?n:[{...t,children:void 0},...n]})}const W=/^h([1-6])$/,G=e=>W.test(e);async function V(e,r){const{ignoredTags:t=[],extraFields:n=[]}=r||{};return(await e.where("extension","=","md").select("path","body","description","title",...n||[]).all()).flatMap(i=>K(i,{ignoredTags:t,extraFields:n}))}function K(e,{ignoredTags:r,extraFields:t}){const n=!e.body||e.body?.type==="root"?e.body:P(e.body),s=e.path??"",i=C(t)(e),o=[{...i,id:s,title:e.title||"",titles:[],content:(e.description||"").trim(),level:1}];if(!n?.children)return o;let c=1,u=0;const a=[e.title??""];for(const l of n.children){const f=l.tag||"";if(G(f)){const d=Number(f.match(W)?.[1]??0),m=A(l).trim();d===1?a.splice(0,a.length):d<u?a.splice(d-1,a.length-1):d===u&&a.pop(),o.push({...i,id:`${s}#${l.props?.id}`,title:m,titles:[...a],content:"",level:d}),a.push(m),u=d,c+=1}else{const d=A(l,r).trim();if(c===1&&o[c-1]?.content===d)continue;o[c-1].content=`${o[c-1].content} ${d}`.trim()}}return o}function A(e,r=[]){let t="";return e.type==="text"&&(t+=e.value||""),r.includes(e.tag??"")?"":(e.children?.length&&(t+=e.children.map(n=>A(n,r)).filter(Boolean).join("")),t)}const Y=e=>{const r=U()?.ssrContext?.event;return q(e,(t,n)=>z(r,t,n))};function et(e,r,t){return j(e,n=>M(n,r,t))}function nt(e,r){return j(e,t=>V(t,r))}async function z(e,r,t){return window.WebAssembly?J(r,t):k(e,String(r),t)}async function J(e,r){return await B(()=>import("./CrdrBHGA.js"),__vite__mapDeps([0,1,2,3]),import.meta.url).then(n=>n.loadDatabaseAdapter(e)).then(n=>n.all(r))}function j(e,r){const t=Y(e),n={where(s,i,o){return t.where(String(s),i,o),n},andWhere(s){return t.andWhere(s),n},orWhere(s){return t.orWhere(s),n},order(s,i){return t.order(String(s),i),n},then(s,i){return r(t).then(s,i)},catch(s){return this.then(void 0,s)},finally(s){return this.then(void 0,void 0).finally(s)},get[Symbol.toStringTag](){return"Promise"}};return n}export{et as a,nt as b,Y as q};
