import{_ as D,u as A,a as E}from"#entry";import{J as S,Q as n,aN as a,b7 as e,aR as m,b6 as O,aQ as g,b5 as r,a_ as F,b9 as R,b4 as w,K as f,aZ as j,b8 as L,r as p,k as C,N as W,aM as b,aT as T,aP as B,bo as U,aU as P,aV as G,T as N,ag as Q}from"./uh8YQMIa.js";import{s as H,a as Z,f as q,u as J}from"./DBvcK_k2.js";import{_ as K}from"./FmQmi0Et.js";import X from"./DTo-ouEH.js";import{_ as Y}from"./BkLzoHpg.js";import"./B_70Ohbf.js";import"./BYMG2p3O.js";const ee={key:0,class:"steam-profile"},se={class:"profile-header"},te={class:"profile-info"},ae={class:"username-row"},oe={class:"username"},ne={class:"status-badge-group"},le={key:0,class:"status-playing"},ie={key:1,class:"status-playing"},re=["href"],ce={key:1,class:"steam-profile-empty"},me=S({__name:"SteamProfile",props:{user:{},metadata:{default:null}},setup(s){const u=o=>H[o]||"#90a0a6",i=o=>Z[o]||o;return(o,d)=>{const v=O;return s.user?(a(),n("div",ee,[e("div",se,[m(v,{src:s.user.avatar.large,alt:s.user.username,class:"avatar",loading:"lazy"},null,8,["src","alt"]),e("div",te,[e("div",ae,[e("h2",oe,r(s.user.username),1),e("div",ne,[e("div",{class:"status-badge",style:F({"--status-color":u(s.user.status)})},[d[0]||(d[0]=e("span",{class:"status-dot"},null,-1)),R(" "+r(i(s.user.status)),1)],4)])]),s.user.currentGame?(a(),n("p",le," 正在玩 "+r(s.user.currentGame.name),1)):s.user.status==="offline"?(a(),n("p",ie," 用户当前离线 ")):g("",!0),e("a",{href:s.user.profileUrl,target:"_blank",class:"profile-link"}," 访问 Steam 个人资料 → ",8,re)])])])):(a(),n("div",ce,[...d[1]||(d[1]=[e("p",null,"无法加载 Steam 数据",-1)])]))}}}),de=Object.assign(w(me,[["__scopeId","data-v-512e1ec4"]]),{__name:"SteamProfile"}),ue={class:"stats-overview"},ve={class:"stat-card"},_e={class:"stat-info"},ge={class:"stat-value"},pe={class:"stat-card"},he={class:"stat-info"},fe={class:"stat-value"},ye={key:0,class:"stat-card"},$e={class:"stat-info"},ke={class:"stat-value"},be=S({__name:"SteamStatsOverview",props:{games:{},user:{}},setup(s){return(u,i)=>{const o=D;return a(),n("div",ue,[e("div",ve,[m(o,{name:"ph:game-controller-bold",size:"28",class:"stat-icon"}),e("div",_e,[i[0]||(i[0]=e("div",{class:"stat-label"},"游戏总数",-1)),e("div",ge,r(s.games?.totalCount??0),1)])]),e("div",pe,[m(o,{name:"ph:hourglass-bold",size:"28",class:"stat-icon"}),e("div",he,[i[1]||(i[1]=e("div",{class:"stat-label"},"总游玩时长",-1)),e("div",fe,r(s.user?.playtimeStats?.totalForever??0)+" 小时",1)])]),s.user?.playtimeStats?.totalTwoWeeks?(a(),n("div",ye,[m(o,{name:"ph:calendar-bold",size:"28",class:"stat-icon"}),e("div",$e,[i[2]||(i[2]=e("div",{class:"stat-label"},"最近两周内时长",-1)),e("div",ke,r(f(q)(s.user.playtimeStats.totalTwoWeeks)),1)])])):g("",!0)])}}}),Se=Object.assign(w(be,[["__scopeId","data-v-19d720e6"]]),{__name:"SteamStatsOverview"}),we=["title"],xe={class:"game-header"},Ce={class:"game-content"},Te={class:"game-name"},Pe={class:"game-meta"},Ge={class:"meta-item"},Ie={class:"value"},Me={key:0,class:"meta-item"},ze={class:"value"},De={key:1,class:"meta-item"},Fe={class:"value"},Ve={key:2,class:"meta-item"},Le={class:"value"},Ne={key:3,class:"meta-item"},Oe={class:"value"},We={key:0,class:"achievements-progress"},Ae={class:"progress-bar"},Ee={class:"progress-text"},Re={key:1,class:"game-description"},je={class:"game-footer"},Be=["href"],Ue=S({__name:"GameCard",props:{game:{}},setup(s){const u=i=>{window.open(`https://store.steampowered.com/app/${i}`,"_blank")};return(i,o)=>{const d=O;return a(),n("div",{class:"game-card",title:`点击查看 ${s.game.name} 的 Steam 页面`,onClick:o[2]||(o[2]=v=>u(s.game.appid))},[e("div",xe,[m(d,{src:s.game.images.headerImage,alt:s.game.name,class:"header-image",loading:"lazy"},null,8,["src","alt"]),o[3]||(o[3]=e("div",{class:"game-overlay"},null,-1))]),e("div",Ce,[e("h3",Te,r(s.game.name),1),e("div",Pe,[e("div",Ge,[o[4]||(o[4]=e("span",{class:"label"},"总时长:",-1)),e("span",Ie,r(s.game.playtimeForever)+" 小时",1)]),s.game.playtimeTwoWeeks!==void 0?(a(),n("div",Me,[o[5]||(o[5]=e("span",{class:"label"},"最近两周:",-1)),e("span",ze,r(s.game.playtimeTwoWeeks)+" 小时",1)])):g("",!0),s.game.achievements?(a(),n("div",De,[o[6]||(o[6]=e("span",{class:"label"},"成就:",-1)),e("span",Fe,r(s.game.achievements.unlocked)+"/"+r(s.game.achievements.total),1)])):g("",!0),s.game.releaseDate?(a(),n("div",Ve,[o[7]||(o[7]=e("span",{class:"label"},"发布:",-1)),e("span",Le,r(s.game.releaseDate),1)])):g("",!0),s.game.price?(a(),n("div",Ne,[o[8]||(o[8]=e("span",{class:"label"},"价格:",-1)),e("span",Oe,r(s.game.price.displayPrice),1)])):g("",!0)]),s.game.achievements?(a(),n("div",We,[e("div",Ae,[e("div",{class:j(["progress-fill",{"progress-complete":s.game.achievements.percentage===100}]),style:F({width:`${s.game.achievements.percentage}%`})},null,6)]),e("span",Ee,"成就进度: "+r(s.game.achievements.percentage)+"%",1)])):g("",!0),s.game.shortDescription?(a(),n("p",Re,r(s.game.shortDescription),1)):g("",!0),e("div",je,[e("a",{class:"steam-link",href:`https://store.steampowered.com/app/${s.game.appid}`,target:"_blank",rel:"noopener noreferrer",onClick:o[0]||(o[0]=L(()=>{},["stop"])),onMousedown:o[1]||(o[1]=L(()=>{},["stop"]))}," 在 Steam 中查看 → ",40,Be)])])],8,we)}}}),Qe=Object.assign(w(Ue,[["__scopeId","data-v-e9c6bc99"]]),{__name:"GameCard"}),z=12,He={class:"tab-content"},Ze={key:0},qe={key:0,class:"games-scroll"},Je={key:0,class:"scroll-hint"},Ke={key:1,class:"games-grid"},Xe={key:1,class:"empty-state"},Ye={class:"tab-content"},es={class:"games-toolbar"},ss={class:"game-count"},ts={key:0},as={key:0,class:"games-scroll"},os={key:0,class:"scroll-hint"},ns={key:1,class:"games-grid"},ls={key:1,class:"empty-state"},is={key:0},rs={key:1},cs={key:2,class:"pagination-control"},ms=S({__name:"SteamGamesTabs",props:{games:{}},setup(s){const u=s,i=p(""),o=p(1),d=p(!1),v=p(!0),$=p(),k=C(()=>{const l=u.games?.allGames;return l?l.map(t=>({...t,playtimeForever:typeof t.playtimeForever=="number"?Math.round(t.playtimeForever):0,playtimeTwoWeeks:t.playtimeTwoWeeks?Math.round(t.playtimeTwoWeeks):0})):[]}),y=C(()=>{if(!k.value)return[];let l=[...k.value];if(i.value.trim()){const t=i.value.toLowerCase();l=l.filter(h=>h.name.toLowerCase().includes(t))}return l.sort((t,h)=>h.playtimeForever-t.playtimeForever)}),_=C(()=>Math.ceil(y.value.length/z)),V=C(()=>{const l=(o.value-1)*z;return y.value.slice(l,l+z)});return W(()=>{if(d.value=!0,$.value){const l=$.value,t=()=>{l.scrollLeft>10&&(v.value=!1)};l.addEventListener("scroll",t,{once:!0})}setTimeout(()=>{v.value=!1},5e3)}),(l,t)=>{const h=Qe,x=D,I=K,M=X;return a(),b(M,{tabs:["最近游戏","游戏库"],center:""},{tab1:T(()=>[e("div",He,[u.games?.recentGames&&u.games.recentGames.length>0?(a(),n("div",Ze,[d.value?(a(),n("div",qe,[e("div",{class:"games-scroll-container",ref_key:"scrollContainerRef",ref:$},[(a(!0),n(P,null,G(u.games.recentGames,c=>(a(),b(h,{key:c.appid,game:c,class:"games-scroll-item"},null,8,["game"]))),128))],512),m(N,{name:"fade"},{default:T(()=>[v.value?(a(),n("div",Je,[m(x,{name:"ph:arrow-right-bold",class:"scroll-hint-icon"}),t[2]||(t[2]=e("span",null,"左右滑动查看更多",-1))])):g("",!0)]),_:1})])):(a(),n("div",Ke,[(a(!0),n(P,null,G(u.games.recentGames,c=>(a(),b(h,{key:c.appid,game:c},null,8,["game"]))),128))]))])):(a(),n("div",Xe,[...t[3]||(t[3]=[e("p",null,"暂无最近游戏数据",-1)])]))])]),tab2:T(()=>[e("div",Ye,[e("div",es,[B(e("input",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.value=c),type:"text",placeholder:"搜索游戏...",class:"search-input"},null,512),[[U,i.value]]),e("div",ss,r(y.value.length)+" / "+r(u.games?.totalCount??0),1)]),y.value.length>0?(a(),n("div",ts,[d.value?(a(),n("div",as,[e("div",{class:"games-scroll-container",ref_key:"scrollContainerRef",ref:$},[(a(!0),n(P,null,G(y.value,c=>(a(),b(h,{key:c.appid,game:c,class:"games-scroll-item"},null,8,["game"]))),128))],512),m(N,{name:"fade"},{default:T(()=>[v.value&&y.value.length>2?(a(),n("div",os,[m(x,{name:"ph:arrow-right-bold",class:"scroll-hint-icon"}),t[4]||(t[4]=e("span",null,"左右滑动查看更多",-1))])):g("",!0)]),_:1})])):(a(),n("div",ns,[(a(!0),n(P,null,G(V.value,c=>(a(),b(h,{key:c.appid,game:c},null,8,["game"]))),128))]))])):(a(),n("div",ls,[i.value?(a(),n("p",is,"没有找到匹配的游戏")):(a(),n("p",rs,"暂无游戏数据"))])),!d.value&&_.value>1?(a(),n("div",cs,[m(I,{modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=c=>o.value=c),class:"pagination","total-pages":_.value},null,8,["modelValue","total-pages"])])):g("",!0)])]),_:1})}}}),ds=Object.assign(w(ms,[["__scopeId","data-v-d8a6ea72"]]),{__name:"SteamGamesTabs"}),us={class:"steam-page"},vs={key:0,class:"loading-state"},_s={class:"loading-container"},gs={class:"progress-bar-container"},ps={class:"progress-bar"},hs={class:"progress-info"},fs={class:"progress-text"},ys={key:1,class:"error-state"},$s={key:2,class:"steam-content"},ks=S({__name:"steam",setup(s){const u=A(),i=E();Q({meta:[{name:"description",content:`${u.author.name} 的 Steam 个人资料，查看完整的游戏库、游戏时长、成就等信息。`},{property:"og:type",content:"profile"},{name:"keywords",content:"Steam,游戏库,游戏时长,成就"}]}),i.setAside(["blog-tech","comm-group"]);const{fetchSteamData:o}=J(),d=p(!0),v=p(!1),$=p(null),k=p(null),y=p(null),_=p(0);return W(async()=>{try{_.value=5,await new Promise(t=>setTimeout(t,300)),_.value=15;const l=await o();_.value=60,l.success&&l.data?($.value=l.data.user,await new Promise(t=>setTimeout(t,200)),_.value=70,k.value=l.data.games,await new Promise(t=>setTimeout(t,200)),_.value=85,y.value=l.allMetadata,await new Promise(t=>setTimeout(t,150)),_.value=100):v.value=!0}catch(l){console.error("Failed to fetch Steam data:",l),v.value=!0}finally{d.value=!1}}),(l,t)=>{const h=D,x=de,I=Se,M=ds,c=Y;return a(),n("div",us,[f(d)?(a(),n("div",vs,[e("div",_s,[t[1]||(t[1]=e("p",{class:"loading-text"},"加载 Steam 数据中...",-1)),e("div",gs,[e("div",ps,[e("div",{class:"progress-fill",style:F({width:`${f(_)}%`})},null,4)]),e("div",hs,[t[0]||(t[0]=e("p",{class:"loading-detail"},"正在获取用户信息、游戏库和成就数据...",-1)),e("p",fs,r(f(_))+"%",1)])])])])):f(v)?(a(),n("div",ys,[m(h,{name:"ph:warning-bold",size:"36"}),t[2]||(t[2]=e("p",null,"无法加载 Steam 数据",-1)),t[3]||(t[3]=e("p",{class:"error-detail"},"请检查 API 是否可用",-1))])):(a(),n("div",$s,[m(x,{user:f($),metadata:f(y)},null,8,["user","metadata"]),m(I,{games:f(k),user:f($)},null,8,["games","user"]),m(M,{games:f(k)},null,8,["games"])])),m(c)])}}}),Is=w(ks,[["__scopeId","data-v-6aada890"]]);export{Is as default};
