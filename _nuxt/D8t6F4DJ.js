import{d as $,y as L,c as N,X as U,Y as K,k as l,o as r,R as I,b as w,h as f,f as d,i as X,e as a,M as Y,u as t,w as P,q as g,Z as F,j as S,t as m,U as G,s as k,O as j,I as J,$ as Q,F as R,n as W,a0 as V,A as Z,a1 as ee,_ as te,z as oe,B as se,C as q,D as O,a2 as ne}from"./ibnZCTbx.js";import{a as H,c as A,g as B,b as ae}from"./ByvmVI07.js";import{d as re,e as E}from"./CjA3zGWC.js";import{_ as ie,a as ce}from"./BcUYe5zY.js";import le from"./BjsESL04.js";import{u as z,a as pe,q as de}from"./49jHesp4.js";import"./rJCbAzvX.js";const ue={class:"post-nav"},me={class:"operations"},_e={key:0,class:"post-info"},ge=["datetime"],fe=["datetime"],he={key:2,class:"article-category"},ve={class:"wordcount"},ye=$({inheritAttrs:!1,__name:"PostHeader",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},cover_revert:{type:Boolean},hideInfo:{type:Boolean},recommend:{},references:{}},setup(y){const o=y,i=L(),s=N(()=>o.categories?.[0]),c=N(()=>re(s.value)),n=`【${i.title}】${o.title}

${o.description?`${o.description}

`:""}${new URL(o.path,i.url).href}`,{copy:_,copied:h}=U(n);return(e,p)=>{const D=X,b=Y,v=S,u=K("tip");return r(),l("div",{class:I(["post-header",{"has-cover":e.image,"text-revert":e.cover_revert}])},[e.image?(r(),w(D,{key:0,class:"post-cover",src:e.image,alt:e.title},null,8,["src","alt"])):f("",!0),d("div",ue,[d("div",me,[a(b,{icon:t(h)?"ph:check-bold":"ph:share-bold",onClick:p[0]||(p[0]=C=>t(_)())},{default:P(()=>p[1]||(p[1]=[g(" 文字分享 ",-1)])),_:1,__:[1]},8,["icon"])]),e.hideInfo?f("",!0):(r(),l("div",_e,[e.date?F((r(),l("time",{key:0,datetime:("getIsoDatetime"in e?e.getIsoDatetime:t(A))(e.date)},[a(v,{name:"ph:calendar-dots-bold"}),g(" "+m(("getPostDate"in e?e.getPostDate:t(B))(o.date)),1)],8,ge)),[[u,`创建于 ${("getLocaleDatetime"in e?e.getLocaleDatetime:t(H))(o.date)}`]]):f("",!0),("isTimeDiffSignificant"in e?e.isTimeDiffSignificant:t(ae))(e.date,e.updated,.999)?F((r(),l("time",{key:1,datetime:("getIsoDatetime"in e?e.getIsoDatetime:t(A))(e.updated)},[a(v,{name:"ph:calendar-plus-bold"}),g(" "+m(("getPostDate"in e?e.getPostDate:t(B))(o.updated)),1)],8,fe)),[[u,`修改于 ${("getLocaleDatetime"in e?e.getLocaleDatetime:t(H))(o.updated)}`]]):f("",!0),t(s)?(r(),l("span",he,[a(v,{name:t(c)},null,8,["name"]),g(" "+m(t(s)),1)])):f("",!0),d("span",ve,[a(v,{name:"ph:paragraph-bold"}),g(" "+m(("formatNumber"in e?e.formatNumber:t(G))(e.readingTime?.words))+" 字 ",1)])]))]),d("h1",{class:I(["post-title",("getPostTypeClassName"in e?e.getPostTypeClassName:t(E))(e.type)])},m(e.title),3)],2)}}}),be=Object.assign(k(ye,[["__scopeId","data-v-67d0fc08"]]),{__name:"PostHeader"}),Pe={class:"md-excerpt gradient-card"},$e=$({__name:"Excerpt",props:{excerpt:{}},setup(y){const o=y,i=L(),s=j(o.excerpt),c=j("");return i.content.excerpt?.animation!==!1&&(s.value="",J(async()=>{c.value=i.content.excerpt?.caret??"_";for(const n of o.excerpt)s.value+=n,await Q(50);c.value=""})),(n,_)=>{const h=S;return r(),l("div",Pe,[a(h,{name:"ph:highlighter-bold"}),g(m(t(s))+m(t(c)),1)])}}}),ke=Object.assign(k($e,[["__scopeId","data-v-bf7538b0"]]),{__name:"PostExcerpt"}),De={class:"post-footer"},Ce={key:0,class:"reference"},Ie={class:"content"},Te={class:"license"},Ne={class:"content"},we=$({inheritAttrs:!1,__name:"PostFooter",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},cover_revert:{type:Boolean},hideInfo:{type:Boolean},recommend:{},references:{}},setup(y){const o=L();return(i,s)=>{const c=le;return r(),l("div",De,[i.references?(r(),l("section",Ce,[s[0]||(s[0]=d("div",{id:"references",class:"title text-creative"}," 参考链接 ",-1)),d("div",Ie,[d("ul",null,[(r(!0),l(R,null,W(i.references,(n,_)=>(r(),l("li",{key:_},[a(c,{href:n.link||""},{default:P(()=>[g(m(n.title??n.link),1)]),_:2},1032,["href"])]))),128))])])])):f("",!0),d("section",Te,[s[3]||(s[3]=d("div",{class:"title text-creative"}," 许可协议 ",-1)),d("div",Ne,[d("p",null,[s[1]||(s[1]=g(" 本文采用 ",-1)),a(c,{href:t(o).copyright.url},{default:P(()=>[g(m(t(o).copyright.name),1)]),_:1},8,["href"]),s[2]||(s[2]=g(" 许可协议，转载请注明出处。 ",-1))])])])])}}}),Ae=Object.assign(k(we,[["__scopeId","data-v-8990bdfb"]]),{__name:"PostFooter"}),Be={class:"surround-text"},Le=["datetime"],Se={key:0,class:"surround-post"},Re=$({__name:"PostSurround",async setup(y){let o,i;const s=V(),{data:c}=([o,i]=Z(()=>z(`surround-${s.path}`,()=>pe("content",s.path,{fields:["date","title","type"]}).order("date","ASC").where("stem","LIKE","posts/%"))),o=await o,i(),o),[n=null,_=null]=c.value??[],[h,e]=ee({inheritAttrs:!1});return(p,D)=>{const b=S,v=te;return r(),l(R,null,[a(t(h),null,{default:P(({post:u,icon:C,fallbackIcon:T,fallbackText:x,alignRight:M})=>[a(v,{to:u?.path,class:"surround-link","align-right":M},{default:P(()=>[a(b,{name:u?C:T},null,8,["name"]),d("div",Be,[d("strong",{class:I(["title",("getPostTypeClassName"in p?p.getPostTypeClassName:t(E))(u?.type)])},m(u?.title||x),3),u?(r(),l("time",{key:0,datetime:("getIsoDatetime"in p?p.getIsoDatetime:t(A))(u.date)},m(("getPostDate"in p?p.getPostDate:t(B))(u.date)),9,Le)):f("",!0)])]),_:2},1032,["to","align-right"])]),_:1}),t(n)||t(_)?(r(),l("div",Se,[a(t(e),{post:t(_),icon:"solar:rewind-back-bold-duotone","fallback-icon":"solar:document-add-bold-duotone","fallback-text":"新故事即将发生"},null,8,["post"]),a(t(e),{post:t(n),icon:"solar:rewind-forward-bold-duotone","fallback-icon":"solar:reel-bold-duotone","fallback-text":"已抵达博客尽头","align-right":""},null,8,["post"])])):f("",!0)],64)}}}),Ee=Object.assign(k(Re,[["__scopeId","data-v-f181f773"]]),{__name:"PostSurround"}),Fe=$({__name:"[...slug]",async setup(y){let o,i;const s=V(),c=oe();c.setAside(["toc"]);const{data:n}=([o,i]=Z(()=>z(()=>s.path,()=>de("content").path(s.path).first(),"$BPopkF1nvN")),o=await o,i(),o),_=N(()=>n.value?.description||"");return n.value?(se({title:n.value.title,meta:[{property:"og:type",content:"article"},{property:"og:image",content:n.value.image},{name:"description",content:n.value.description}]}),c.setAside(n.value.meta?.aside)):(s.meta.title="404",c.setAside(["blog-log"])),(h,e)=>{const p=be,D=ke,b=ie,v=Ae,u=Ee,C=ce,T=ne;return t(n)?(r(),l(R,{key:0},[a(p,q(O(t(n))),null,16),t(_)?(r(),w(D,{key:0,excerpt:t(_)},null,8,["excerpt"])):f("",!0),a(b,{class:I(["article",("getPostTypeClassName"in h?h.getPostTypeClassName:t(E))(t(n)?.type,{prefix:"md"})]),value:t(n),tag:"article"},null,8,["class","value"]),a(v,q(O(t(n))),null,16),a(u),a(C)],64)):(r(),w(T,{key:1,icon:"solar:confounded-square-bold-duotone",title:"内容为空或页面不存在"}))}}}),xe=k(Fe,[["__scopeId","data-v-87b84342"]]);export{xe as default};
