import{G as f,y as v,r as c,p as g,K as b,D as w,b as h,ar as n,o as $,z as x,Z as C,W as y,e as B,w as D,g as j,a_ as O}from"./BuiCdPlE.js";import{_ as T}from"./F77CpJrB.js";import{_ as A}from"./C08-0f9e.js";import{g as E,a as S}from"./DejKoMbn.js";import"./DgaSKhaW.js";import"./CYIRVW0k.js";const W=f({__name:"BlogStats",async setup(P){let o,p;const l=v(),_=g(),i=c(_.public.buildTime),r=c(l.component.stats.wordCount),u=c(""),{data:e}=([o,p]=b(()=>w("blog-stats",()=>h(()=>import("./DmBT22jJ.js"),[],import.meta.url).then(t=>(t.default||t)()))),o=await o,p(),o);e&&e.value&&e.value.total&&(r.value=n(e.value.total?.words),u.value=Object.entries(e.value.annual||{}).reverse().map(([t,a])=>`${t}年：${a.posts}篇，${n(a.words)}字`).join(`
`)),$(async()=>{if(i.value=E(i.value),!e||!e.value){const t=await $fetch("/api/stats").catch(()=>null);if(!t||!t.total)return;r.value=n(t.total?.words),u.value=Object.entries(t.annual||{}).reverse().map(([a,s])=>`${a}年：${s.posts}篇，${n(s.words)}字`).join(`
`)}});const m=[{label:"运营时长",value:S(l.timeEstablished),tip:`博客于${l.timeEstablished}上线`},{label:"上次更新",value:()=>C(T,{date:_.public.buildTime,relative:!0,tipPrefix:"构建于"}),tip:x(()=>`构建于${i.value}`)},{label:"总字数",value:r,tip:u}];return(t,a)=>{const s=O,d=A;return B(),y(d,{card:"",title:"博客统计"},{default:D(()=>[j(s,{items:m,size:"large"})]),_:1})}}}),V=Object.assign(W,{__name:"WidgetBlogStats"});export{V as default};
