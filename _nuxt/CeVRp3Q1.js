import{J as T,k as L,aO as W,Q as f,aN as r,aZ as C,aM as k,aQ as h,b7 as s,b6 as J,aR as d,K as e,aT as P,b9 as x,aP as Z,b5 as y,b4 as S,r as N,N as G,aU as R,aV as X,bn as V,ag as Y,a$ as q,b0 as z}from"./BOu4zRvQ.js";import{u as E,r as ee,n as te,_ as F,q as oe,s as ne,t as j,v as se,f as ae,a as ie,w as re,x as ce}from"#entry";import{_ as H}from"./CAJSA7QO.js";import{g as O,i as le}from"./DLB8KaLf.js";import{c as de,d as B}from"./CHz72zE4.js";import{_ as ue}from"./C6tVGwsz.js";import me from"./CIbfToqt.js";import{u as K}from"./DsPHv7z9.js";import{a as pe,q as _e}from"./YUs7vQGv.js";import{_ as fe}from"./BhU1Ajfa.js";import{u as ge}from"./C5S9QbnH.js";import"./DGULe4rZ.js";import"./fqtr9wfk.js";import"./rJCbAzvX.js";import"./DKEEkYN0.js";const ve={class:"post-nav"},he={class:"operations"},ye={key:0,class:"post-info"},be={key:2},xe=T({inheritAttrs:!1,__name:"PostHeader",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{}},setup(t){const a=t,m=E(),o=L(()=>a.categories?.[0]),p=L(()=>de(o.value)),i=`【${m.title}】${a.title}

${a.description?`${a.description}

`:""}${new URL(a.path,m.url).href}`,{copy:c,copied:n}=ee(i);return(l,_)=>{const g=J,b=te,$=H,u=F,v=W("tip");return r(),f("div",{class:C(["post-header",{"has-cover":t.image,"text-revert":t.meta?.coverRevert}])},[t.image?(r(),k(g,{key:0,class:"post-cover",src:t.image,alt:t.title},null,8,["src","alt"])):h("",!0),s("div",ve,[s("div",he,[d(b,{icon:e(n)?"ph:check-bold":"ph:share-bold",onClick:_[0]||(_[0]=w=>e(c)())},{default:P(()=>[..._[1]||(_[1]=[x(" 文字分享 ",-1)])]),_:1},8,["icon"])]),t.meta?.hideInfo?h("",!0):(r(),f("div",ye,[t.date?Z((r(),k($,{key:0,date:t.date,icon:"ph:calendar-dots-bold"},null,8,["date"])),[[v,`创建于 ${("getLocaleDatetime"in l?l.getLocaleDatetime:e(O))(t.date)}`]]):h("",!0),t.updated&&("isTimeDiffSignificant"in l?l.isTimeDiffSignificant:e(le))(t.date,t.updated,.999)?Z((r(),k($,{key:1,date:t.updated,icon:"ph:calendar-plus-bold"},null,8,["date"])),[[v,`修改于 ${("getLocaleDatetime"in l?l.getLocaleDatetime:e(O))(t.updated)}`]]):h("",!0),e(o)?(r(),f("span",be,[d(u,{name:e(p)},null,8,["name"]),x(" "+y(e(o)),1)])):h("",!0),s("span",null,[d(u,{name:"ph:paragraph-bold"}),x(" "+y(("formatNumber"in l?l.formatNumber:e(oe))(t.readingTime?.words))+" 字 ",1)])]))]),s("h1",{class:C(["post-title",("getPostTypeClassName"in l?l.getPostTypeClassName:e(B))(t.type)])},y(t.title),3)],2)}}}),$e=Object.assign(S(xe,[["__scopeId","data-v-5127ee26"]]),{__name:"PostHeader"}),ke={class:"md-excerpt ai-excerpt"},Ce={class:"ai-excerpt-header"},Pe={class:"ai-excerpt-title"},Te={class:"ai-icon-gpt"},we={key:0,class:"ai-excerpt-toggle-outer hide-on-wide"},Ne={class:"ai-excerpt-toggle-wrap"},Se=900,De=T({__name:"Excerpt",props:{excerpt:{}},setup(t){const a=t,m=E(),o=N(a.excerpt),p=N(""),i=N(!1),c=N(!1);function n(){window.innerWidth<Se?(c.value=!0,i.value=!0):(c.value=!1,i.value=!1)}n(),window.addEventListener("resize",n);function l(){c.value&&(i.value=!i.value)}return m.component.excerpt?.animation!==!1&&(o.value="",G(async()=>{p.value=m.component.excerpt?.caret??"_";for(const _ of a.excerpt)o.value+=_,await ne(50);p.value=""})),(_,g)=>{const b=F;return r(),f("div",ke,[s("div",Ce,[s("div",Pe,[s("span",Te,[d(b,{name:"simple-icons:openai",class:"ai-gpt-icon"})]),g[0]||(g[0]=s("span",{class:"ai-label"},"智能摘要",-1))]),g[1]||(g[1]=s("span",{class:"ai-badge"},"Kimi·K2-Turbo",-1))]),s("div",{class:C(["ai-excerpt-content",{"is-folded":e(i)&&e(c),"is-unfolded":!e(i)&&e(c)}])},y(e(o))+y(e(p)),3),g[2]||(g[2]=s("noscript",null,null,-1)),e(o).length>80&&e(c)?(r(),f("div",we,[s("div",Ne,[s("button",{class:"ai-excerpt-toggle",onClick:l},y(e(i)?"展开全部":"收起"),1)])])):h("",!0)])}}}),Ie=Object.assign(S(De,[["__scopeId","data-v-a1f4a50b"]]),{__name:"PostExcerpt"}),Ae={class:"post-footer"},Le={key:0,class:"reference"},Re={class:"content"},Ee={class:"license"},Fe={class:"content"},Be=T({inheritAttrs:!1,__name:"PostFooter",props:{path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{}},setup(t){const a=E();return(m,o)=>{const p=me;return r(),f("div",Ae,[t.references?(r(),f("section",Le,[o[0]||(o[0]=s("div",{id:"references",class:"title text-creative"}," 参考链接 ",-1)),s("div",Re,[s("ul",null,[(r(!0),f(R,null,X(t.references,({title:i,link:c},n)=>(r(),f("li",{key:n},[d(p,{href:c||""},{default:P(()=>[x(y(i??c),1)]),_:2},1032,["href"])]))),128))])])])):h("",!0),s("section",Ee,[o[3]||(o[3]=s("div",{class:"title text-creative"}," 许可协议 ",-1)),s("div",Fe,[s("p",null,[o[1]||(o[1]=x(" 本文采用 ",-1)),d(p,{href:e(a).copyright.url},{default:P(()=>[x(y(e(a).copyright.name),1)]),_:1},8,["href"]),o[2]||(o[2]=x(" 许可协议，转载请注明出处。 ",-1))])])])])}}}),Ze=Object.assign(S(Be,[["__scopeId","data-v-cdb923bb"]]),{__name:"PostFooter"}),qe={class:"surround-text"},ze={key:0,class:"surround-post",dir:"ltr"},Oe=T({__name:"PostSurround",async setup(t){let a,m;const o=j(),{data:p}=([a,m]=V(()=>K(`surround-${o.path}`,()=>pe("content",o.path,{fields:["date","title","type"]}).order("date","ASC").where("stem","LIKE","posts/%"))),a=await a,m(),a),[i=null,c=null]=p.value??[],[n,l]=se({inheritAttrs:!1});return(_,g)=>{const b=F,$=H,u=ae;return r(),f(R,null,[d(e(n),null,{default:P(({post:v,icon:w,fallbackIcon:D,fallbackText:I,alignEnd:A})=>[d(u,{to:v?.path,class:"surround-link","align-end":A},{default:P(()=>[d(b,{class:C({"rtl-flip":v}),name:v?w:D},null,8,["class","name"]),s("div",qe,[s("strong",{class:C(["title",("getPostTypeClassName"in _?_.getPostTypeClassName:e(B))(v?.type)])},y(v?.title||I),3),v?.date?(r(),k($,{key:0,class:"date",date:v.date},null,8,["date"])):h("",!0)])]),_:2},1032,["to","align-end"])]),_:1}),e(i)||e(c)?(r(),f("div",ze,[d(e(l),{post:e(c),icon:"solar:rewind-back-bold-duotone","fallback-icon":"solar:document-add-bold-duotone","fallback-text":"新故事即将发生"},null,8,["post"]),d(e(l),{post:e(i),icon:"solar:rewind-forward-bold-duotone","fallback-icon":"solar:reel-bold-duotone","fallback-text":"已抵达博客尽头","align-end":""},null,8,["post"])])):h("",!0)],64)}}}),Ve=Object.assign(S(Oe,[["__scopeId","data-v-5bbacfc0"]]),{__name:"PostSurround"}),st=T({__name:"[...slug]",async setup(t){let a,m;const o=j();function p(u){return!u||u==="/"||u.endsWith("/")?u:`${u}/`}const i=ie();i.setAside(["toc"]);const c=p(o.path),{data:n}=([a,m]=V(()=>K(()=>c,()=>_e("content").path(c).first(),"$BPopkF1nvN")),a=await a,m(),a),l=ge(),{toc:_,meta:g}=re(l),b=L(()=>n.value?.description||"");function $(){_.value=n.value?.body.toc,g.value=n.value?.meta}return $(),n.value?(Y({title:n.value.title,meta:[{property:"og:type",content:"article"},{property:"og:image",content:n.value.image},{name:"description",content:n.value.description}]}),i.setAside(n.value.meta?.aside)):(o.meta.title="404",i.setAside(["blog-log"])),(u,v)=>{const w=$e,D=Ie,I=ue,A=Ze,M=Ve,Q=fe,U=ce;return e(n)?(r(),f(R,{key:0},[d(w,q(z(e(n))),null,16),e(b)?(r(),k(D,{key:0,excerpt:e(b)},null,8,["excerpt"])):h("",!0),d(I,{class:C(["article",("getPostTypeClassName"in u?u.getPostTypeClassName:e(B))(e(n)?.type,{prefix:"md"})]),value:e(n),tag:"article"},null,8,["class","value"]),d(A,q(z(e(n))),null,16),d(M),d(Q)],64)):(r(),k(U,{key:1,icon:"solar:confounded-square-bold-duotone",title:"内容为空或页面不存在"}))}}});export{st as default};
