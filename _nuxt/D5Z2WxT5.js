import{a0 as C,o as y,a1 as S,a2 as E,x as V,y as B,k as I,_ as N}from"./BcHDEQLf.js";import{_ as W}from"./1x3x30Ko.js";import{u as w}from"./D4urXyXP.js";import{r as z,_ as g,J as A,aN as T,aO as m,aU as p,aS as f,K as u,b6 as _,Q as b,aV as D,aW as F,a_ as O,aR as R,b9 as P,b5 as $}from"./C30-xQm5.js";import"./D-deoX8n.js";const q=({delay:t},o)=>{let e,s=!0;const n=(...c)=>{s?(clearTimeout(e),e=setTimeout(()=>{s&&o(...c),e=void 0},t)):o(...c)};return n.isPending=()=>e!==void 0,n.cancel=()=>{s=!1},n.flush=(...c)=>o(...c),n},H=({interval:t},o)=>{let e=!0,s;const n=(...c)=>{e&&(o(...c),e=!1,s=setTimeout(()=>{e=!0,s=void 0},t))};return n.isThrottled=()=>s!==void 0,n},j=t=>H({interval:20},t),J=t=>q({delay:20},t);function K(t){const o=j(t),e=J(t);return()=>{o(),e()}}function M(t){const o=z(null),e=(d,l=[])=>(d.forEach(a=>{const r=document.getElementById(a.id);r&&l.push({id:a.id,offsetTop:r.offsetTop}),a.children&&e(a.children,l)}),l),s=C(()=>g(t),()=>e(g(t)).reverse()),n=()=>{const d=Number.parseFloat(getComputedStyle(document.documentElement).getPropertyValue("scroll-margin-top")),l=window.scrollY+(d||64),a=s.value.find(v=>v.offsetTop<=l);o.value=a?.id||null;const r=document.querySelector("#z-aside"),h=document.querySelector(`#z-aside a[href="#${o.value}"]`);r?.scroll({top:h?.offsetTop||0})};y("scroll",K(()=>n()),{passive:!0});const{height:c}=S(document?.body);return E(c,s.trigger),{activeTocItem:o}}const Q={href:"#main-content","aria-label":"返回开头"},U={href:"#artalk","aria-label":"评论区"},Y=["href","title"],Z={key:1,class:"no-toc"},G=A({__name:"Toc",setup(t){const[o,e]=V(),s=w(),{toc:n}=B(s),{activeTocItem:c}=M(()=>n.value?.links??[]);function d(l,a){return l.id===a?!0:l.children?.some(r=>d(r,a))??!1}return(l,a)=>{const r=N,h=I,v=W;return m(),T(v,null,{title:p(()=>[a[0]||(a[0]=_("span",{class:"title"},"文章目录",-1)),_("a",Q,[f(r,{name:"ph:arrow-circle-up-bold"})]),_("a",U,[f(r,{name:"ph:chat-circle-text-bold"})])]),default:p(()=>[f(u(o),null,{default:p(({tocItem:k})=>[_("ol",null,[(m(!0),b(D,null,F(k,(i,x)=>(m(),b("li",{key:x,class:O({"has-active":d(i,u(c)),active:i.id===u(c)})},[_("a",{href:`#${i?.id}`,title:i.text},P(i.text),9,Y),i.children?(m(),T(u(e),{key:0,"toc-item":i.children},null,8,["toc-item"])):R("",!0)],2))),128))])]),_:1}),f(h,null,{default:p(()=>[u(n)?.links.length?(m(),T(u(e),{key:0,"toc-item":u(n).links},null,8,["toc-item"])):(m(),b("p",Z," 暂无目录信息 "))]),_:1})]),_:1})}}}),ne=Object.assign($(G,[["__scopeId","data-v-08d7de6b"]]),{__name:"WidgetToc"});export{ne as default};
