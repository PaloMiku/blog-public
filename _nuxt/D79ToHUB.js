import{y as w,z as R,aF as x,Z as a,s as D,q as G}from"./BOu4zRvQ.js";import{D as Q,E as W}from"#entry";function _(s){return w()?(R(s),!0):!1}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const p=new WeakMap;function M(s,f,q={}){const{mode:g="replace",route:c=Q(),router:n=W(),transform:r}=q;let u=e=>e,y=e=>e;typeof r=="function"?u=r:r&&(r.get&&(u=r.get),r.set&&(y=r.set)),p.has(n)||p.set(n,new Map);const i=p.get(n);let t=c.query[s];_(()=>{t=void 0});let l;const h=x((e,m)=>(l=m,{get(){return e(),u(t!==void 0?t:a(f))},set(o){o=y(o),t!==o&&(t=o===a(f)?void 0:o,i.set(s,o===a(f)?void 0:o),m(),D(()=>{if(i.size===0)return;const S=Object.fromEntries(i.entries());i.clear();const{params:d,query:b,hash:k}=c;n[a(g)]({params:d,query:{...b,...S},hash:k})}))}}));return G(()=>c.query[s],e=>{t!==u(e)&&(t=e,l())},{flush:"sync"}),h}export{M as u};
