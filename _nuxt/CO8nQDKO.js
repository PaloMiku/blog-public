import{d as k,k as o,h as s,j as e,i as u,n as z,l as p,t as c,p as F,y as L,z as b,q as V,u as h,Q as j,R as M,r as y,c as w,o as D,f as $,w as I,S as A,U as B,F as x,v as C,B as E,C as U,E as q,G as H,V as Q}from"#entry";import{s as R,a as Z,f as J,u as K}from"./D8BxnqMY.js";import{_ as X}from"./Dnh0M5Dc.js";import Y from"./CU_1SdKo.js";import{_ as ee}from"./BctPQFqq.js";import"./msZ4JmWp.js";const te={key:0,class:"steam-profile"},se={class:"profile-header"},ae={class:"profile-info"},oe={class:"username-row"},ne={class:"username"},le={class:"status-badge-group"},ie={key:0,class:"status-playing"},ce={key:1,class:"status-playing"},re=["href"],me={key:1,class:"steam-profile-empty"},de=k({__name:"SteamProfile",props:{user:{},metadata:{default:null}},setup(t){const d=a=>R[a]||"#90a0a6",l=a=>Z[a]||a;return(a,m)=>{const v=z;return t.user?(s(),o("div",te,[e("div",se,[u(v,{src:t.user.avatar.large,alt:t.user.username,class:"avatar",loading:"lazy"},null,8,["src","alt"]),e("div",ae,[e("div",oe,[e("h2",ne,c(t.user.username),1),e("div",le,[e("div",{class:"status-badge",style:F({"--status-color":d(t.user.status)})},[m[0]||(m[0]=e("span",{class:"status-dot"},null,-1)),L(" "+c(l(t.user.status)),1)],4)])]),t.user.currentGame?(s(),o("p",ie," 正在玩 "+c(t.user.currentGame.name),1)):t.user.status==="offline"?(s(),o("p",ce," 用户当前离线 ")):p("",!0),e("a",{href:t.user.profileUrl,target:"_blank",class:"profile-link"}," 访问 Steam 个人资料 → ",8,re)])])])):(s(),o("div",me,[...m[1]||(m[1]=[e("p",null,"无法加载 Steam 数据",-1)])]))}}}),ue=Object.assign(b(de,[["__scopeId","data-v-512e1ec4"]]),{__name:"SteamProfile"}),_e={class:"stats-overview"},ve={class:"stat-card"},ge={class:"stat-info"},pe={class:"stat-value"},he={class:"stat-card"},ye={class:"stat-info"},fe={class:"stat-value"},$e={key:0,class:"stat-card"},ke={class:"stat-info"},be={class:"stat-value"},Se=k({__name:"SteamStatsOverview",props:{games:{},user:{}},setup(t){return(d,l)=>{const a=V;return s(),o("div",_e,[e("div",ve,[u(a,{name:"ph:game-controller-bold",size:"28",class:"stat-icon"}),e("div",ge,[l[0]||(l[0]=e("div",{class:"stat-label"},"游戏总数",-1)),e("div",pe,c(t.games?.totalCount??0),1)])]),e("div",he,[u(a,{name:"ph:hourglass-bold",size:"28",class:"stat-icon"}),e("div",ye,[l[1]||(l[1]=e("div",{class:"stat-label"},"总游玩时长",-1)),e("div",fe,c(t.user?.playtimeStats?.totalForever??0)+" 小时",1)])]),t.user?.playtimeStats?.totalTwoWeeks?(s(),o("div",$e,[u(a,{name:"ph:calendar-bold",size:"28",class:"stat-icon"}),e("div",ke,[l[2]||(l[2]=e("div",{class:"stat-label"},"最近两周内时长",-1)),e("div",be,c(h(J)(t.user.playtimeStats.totalTwoWeeks)),1)])])):p("",!0)])}}}),we=Object.assign(b(Se,[["__scopeId","data-v-19d720e6"]]),{__name:"SteamStatsOverview"}),xe=["title"],Ce={class:"game-header"},Ge={class:"game-content"},Te={class:"game-name"},Pe={class:"game-meta"},Me={class:"meta-item"},Ie={class:"value"},ze={key:0,class:"meta-item"},Fe={class:"value"},Ve={key:1,class:"meta-item"},De={class:"value"},Ne={key:2,class:"meta-item"},Oe={class:"value"},We={key:3,class:"meta-item"},Le={class:"value"},je={key:0,class:"achievements-progress"},Ae={class:"progress-bar"},Be={class:"progress-text"},Ee={key:1,class:"game-description"},Ue={class:"game-footer"},qe=["href"],He=k({__name:"GameCard",props:{game:{}},setup(t){const d=l=>{window.open(`https://store.steampowered.com/app/${l}`,"_blank")};return(l,a)=>{const m=z;return s(),o("div",{class:"game-card",title:`点击查看 ${t.game.name} 的 Steam 页面`,onClick:a[2]||(a[2]=v=>d(t.game.appid))},[e("div",Ce,[u(m,{src:t.game.images.headerImage,alt:t.game.name,class:"header-image",loading:"lazy"},null,8,["src","alt"]),a[3]||(a[3]=e("div",{class:"game-overlay"},null,-1))]),e("div",Ge,[e("h3",Te,c(t.game.name),1),e("div",Pe,[e("div",Me,[a[4]||(a[4]=e("span",{class:"label"},"总时长:",-1)),e("span",Ie,c(t.game.playtimeForever)+" 小时",1)]),t.game.playtimeTwoWeeks!==void 0?(s(),o("div",ze,[a[5]||(a[5]=e("span",{class:"label"},"最近两周:",-1)),e("span",Fe,c(t.game.playtimeTwoWeeks)+" 小时",1)])):p("",!0),t.game.achievements?(s(),o("div",Ve,[a[6]||(a[6]=e("span",{class:"label"},"成就:",-1)),e("span",De,c(t.game.achievements.unlocked)+"/"+c(t.game.achievements.total),1)])):p("",!0),t.game.releaseDate?(s(),o("div",Ne,[a[7]||(a[7]=e("span",{class:"label"},"发布:",-1)),e("span",Oe,c(t.game.releaseDate),1)])):p("",!0),t.game.price?(s(),o("div",We,[a[8]||(a[8]=e("span",{class:"label"},"价格:",-1)),e("span",Le,c(t.game.price.displayPrice),1)])):p("",!0)]),t.game.achievements?(s(),o("div",je,[e("div",Ae,[e("div",{class:j(["progress-fill",{"progress-complete":t.game.achievements.percentage===100}]),style:F({width:`${t.game.achievements.percentage}%`})},null,6)]),e("span",Be,"成就进度: "+c(t.game.achievements.percentage)+"%",1)])):p("",!0),t.game.shortDescription?(s(),o("p",Ee,c(t.game.shortDescription),1)):p("",!0),e("div",Ue,[e("a",{class:"steam-link",href:`https://store.steampowered.com/app/${t.game.appid}`,target:"_blank",rel:"noopener noreferrer",onClick:a[0]||(a[0]=M(()=>{},["stop"])),onMousedown:a[1]||(a[1]=M(()=>{},["stop"]))}," 在 Steam 中查看 → ",40,qe)])])],8,xe)}}}),Qe=Object.assign(b(He,[["__scopeId","data-v-1215f1ca"]]),{__name:"GameCard"}),P=12,Re={class:"tab-content"},Ze={key:0},Je={key:0,class:"games-scroll"},Ke={class:"games-scroll-container"},Xe={key:1,class:"games-grid"},Ye={key:1,class:"empty-state"},et={class:"tab-content"},tt={class:"games-toolbar"},st={class:"game-count"},at={key:0},ot={key:0,class:"games-scroll"},nt={class:"games-scroll-container"},lt={key:1,class:"games-grid"},it={key:1,class:"empty-state"},ct={key:0},rt={key:1},mt={key:2,class:"pagination-control"},dt=k({__name:"SteamGamesTabs",props:{games:{}},setup(t){const d=t,l=y(""),a=y(1),m=y(!1),v=w(()=>{const _=d.games?.allGames;return _?_.map(n=>({...n,playtimeForever:typeof n.playtimeForever=="number"?Math.round(n.playtimeForever):0,playtimeTwoWeeks:n.playtimeTwoWeeks?Math.round(n.playtimeTwoWeeks):0})):[]}),g=w(()=>{if(!v.value)return[];let _=[...v.value];if(l.value.trim()){const n=l.value.toLowerCase();_=_.filter(r=>r.name.toLowerCase().includes(n))}return _.sort((n,r)=>r.playtimeForever-n.playtimeForever)}),f=w(()=>Math.ceil(g.value.length/P)),S=w(()=>{const _=(a.value-1)*P;return g.value.slice(_,_+P)});return D(()=>{m.value=!0}),(_,n)=>{const r=Qe,G=X,T=Y;return s(),$(T,{tabs:["最近游戏","游戏库"],center:""},{tab1:I(()=>[e("div",Re,[d.games?.recentGames&&d.games.recentGames.length>0?(s(),o("div",Ze,[m.value?(s(),o("div",Je,[e("div",Ke,[(s(!0),o(x,null,C(d.games.recentGames,i=>(s(),$(r,{key:i.appid,game:i,class:"games-scroll-item"},null,8,["game"]))),128))])])):(s(),o("div",Xe,[(s(!0),o(x,null,C(d.games.recentGames,i=>(s(),$(r,{key:i.appid,game:i},null,8,["game"]))),128))]))])):(s(),o("div",Ye,[...n[2]||(n[2]=[e("p",null,"暂无最近游戏数据",-1)])]))])]),tab2:I(()=>[e("div",et,[e("div",tt,[A(e("input",{"onUpdate:modelValue":n[0]||(n[0]=i=>l.value=i),type:"text",placeholder:"搜索游戏...",class:"search-input"},null,512),[[B,l.value]]),e("div",st,c(g.value.length)+" / "+c(d.games?.totalCount??0),1)]),g.value.length>0?(s(),o("div",at,[m.value?(s(),o("div",ot,[e("div",nt,[(s(!0),o(x,null,C(g.value,i=>(s(),$(r,{key:i.appid,game:i,class:"games-scroll-item"},null,8,["game"]))),128))])])):(s(),o("div",lt,[(s(!0),o(x,null,C(S.value,i=>(s(),$(r,{key:i.appid,game:i},null,8,["game"]))),128))]))])):(s(),o("div",it,[l.value?(s(),o("p",ct,"没有找到匹配的游戏")):(s(),o("p",rt,"暂无游戏数据"))])),!m.value&&f.value>1?(s(),o("div",mt,[u(G,{modelValue:a.value,"onUpdate:modelValue":n[1]||(n[1]=i=>a.value=i),class:"pagination","total-pages":f.value},null,8,["modelValue","total-pages"])])):p("",!0)])]),_:1})}}}),ut=Object.assign(b(dt,[["__scopeId","data-v-b375c7fd"]]),{__name:"SteamGamesTabs"}),_t={class:"steam-page"},vt={class:"mobile-only"},gt={key:0,class:"loading-state"},pt={key:1,class:"error-state"},ht={key:2,class:"steam-content"},yt=k({__name:"steam",setup(t){const d=E(),l=U();q({title:"Steam",meta:[{name:"description",content:`${d.author.name} 的 Steam 个人资料，查看完整的游戏库、游戏时长、成就等信息。`},{property:"og:type",content:"profile"},{name:"keywords",content:"Steam,游戏库,游戏时长,成就"}]}),l.setAside(["blog-tech","comm-group"]);const{fetchSteamData:a}=K(),m=y(!0),v=y(!1),g=y(null),f=y(null),S=y(null);return D(async()=>{try{const n=await a();n.success&&n.data?(g.value=n.data.user,f.value=n.data.games,S.value=n.allMetadata):v.value=!0}catch(n){console.error("Failed to fetch Steam data:",n),v.value=!0}finally{m.value=!1}}),(n,r)=>{const G=H,T=V,i=ue,N=we,O=ut,W=ee;return s(),o("div",_t,[e("div",vt,[u(G,{to:"/",suffix:"Steam"})]),h(m)?(s(),o("div",gt,[...r[0]||(r[0]=[Q('<div class="loading-container" data-v-99077abd><p class="loading-text" data-v-99077abd>加载 Steam 数据中...</p><div class="progress-bar-container" data-v-99077abd><div class="progress-bar" data-v-99077abd><div class="progress-fill" data-v-99077abd></div></div><p class="loading-detail" data-v-99077abd>正在获取用户信息、游戏库和成就数据...</p></div></div>',1)])])):h(v)?(s(),o("div",pt,[u(T,{name:"ph:warning-bold",size:"36"}),r[1]||(r[1]=e("p",null,"无法加载 Steam 数据",-1)),r[2]||(r[2]=e("p",{class:"error-detail"},"请检查 API 是否可用",-1))])):(s(),o("div",ht,[u(i,{user:h(g),metadata:h(S)},null,8,["user","metadata"]),u(N,{games:h(f),user:h(g)},null,8,["games","user"]),u(O,{games:h(f)},null,8,["games"])])),u(W)])}}}),xt=b(yt,[["__scopeId","data-v-99077abd"]]);export{xt as default};
