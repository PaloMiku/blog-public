import{_ as Z}from"./ClNiTJ3o.js";import{_ as j}from"./CIDcZ5D3.js";import{J as $,x as T,Q as d,aN as o,aM as x,aQ as C,aR as v,K as t,aT as B,b5 as n,b8 as m,aU as L,b7 as z,br as F,b4 as I,ah as Q,bp as W,l as S,aV as w,aX as E,bc as G}from"./D6ajeznB.js";import{j as H,c as J,d as K,r as M}from"./yV9leV6D.js";import{g as U,i as P}from"./C7bRQkBh.js";import{i as X,a as q,b as ee,c as te,g as ae}from"./Bt2CfG6P.js";import"./BXIFPJUw.js";import"./DuNgfAeC.js";import"./DgBLLKjM.js";const se={class:"article-item"},ie={class:"article-title"},ne=$({__name:"Archive",props:{to:{},useUpdated:{type:Boolean},path:{},readingTime:{},title:{},description:{},link:{},date:{},updated:{},published:{},categories:{},tags:{},type:{},image:{},recommend:{},references:{},meta:{}},setup(e){const r=e,l=T(()=>r.useUpdated?r.updated:r.date);return(i,g)=>{const h=j,y=F,_=H;return o(),d("li",se,[t(l)?(o(),x(h,{key:0,datetime:t(l),title:("getLocaleDatetime"in i?i.getLocaleDatetime:t(U))(t(l)),month:"2-digit",day:"2-digit"},null,8,["datetime","title"])):C("",!0),v(_,{class:"article-link gradient-card",to:e.to,title:e.description},{default:B(()=>[n("span",ie,m(e.title),1),e.date&&e.useUpdated&&("isTimeDiffSignificant"in i?i.isTimeDiffSignificant:t(P))(e.date,e.updated)?(o(),d(L,{key:0},[g[0]||(g[0]=z("   ",-1)),v(h,{class:"aux-date",datetime:e.date,title:("getLocaleDatetime"in i?i.getLocaleDatetime:t(U))(e.date),year:t(X)(e.date,e.updated??0)?void 0:"numeric",month:"2-digit",day:"2-digit"},null,8,["datetime","title","year"])],64)):C("",!0),e.image?(o(),x(y,{key:1,class:"article-cover",src:e.image,alt:e.title,loading:"lazy"},null,8,["src","alt"])):C("",!0)]),_:1},8,["to","title"])])}}}),oe=Object.assign(I(ne,[["__scopeId","data-v-41660236"]]),{__name:"ZArchive"}),re={class:"archive proper-height"},le={class:"archive-title"},ce={class:"archive-year"},de={class:"archive-age"},ue={class:"archive-info"},me=$({__name:"archive",async setup(e){let r,l;const i=J();Q({meta:[{name:"description",content:`${i.title}的所有文章归档。`}]});const g=i.component.stats.birthYear;K().setAside(["blog-stats","blog-log"]);const{data:y}=([r,l]=W(()=>q()),r=await r,l(),r),{listSorted:_,isAscending:p,sortOrder:u}=ee(y),{category:b,categories:O,listCategorized:V}=te(_),N=T(()=>{const c=Object.entries(ae(V.value,a=>new Date(a[u.value]||0).getFullYear()));return p.value?c:c.reverse()}),R=T(()=>N.value.reduce((c,[a,k])=>{const D=k?.reduce((s,f)=>s+f.readingTime.words,0)||0;return c[a]=M(D),c},{}));return(c,a)=>{const k=Z,D=oe;return o(),d("div",re,[v(k,{"is-ascending":t(p),"onUpdate:isAscending":a[0]||(a[0]=s=>S(p)?p.value=s:null),"sort-order":t(u),"onUpdate:sortOrder":a[1]||(a[1]=s=>S(u)?u.value=s:null),category:t(b),"onUpdate:category":a[2]||(a[2]=s=>S(b)?b.value=s:null),categories:t(O)},null,8,["is-ascending","sort-order","category","categories"]),(o(!0),d(L,null,w(t(N),([s,f])=>(o(),d("section",{key:s,class:"archive-group"},[n("div",le,[n("h2",ce,m(s),1),n("div",de,[n("span",null,m(Number(s)-t(g)),1),a[3]||(a[3]=n("span",{class:"age-label"},"岁",-1))]),n("div",ue,[n("span",null,m(t(R)[s])+"字",1),n("span",null,m(f?.length)+"篇",1)])]),v(G,{tag:"menu",class:"archive-list",name:"float-in"},{default:B(()=>[(o(!0),d(L,null,w(f,(A,Y)=>(o(),x(D,E({key:A.path},{ref_for:!0},A,{to:A.path,"use-updated":t(u)==="updated",style:{"--delay":`${Y*.03}s`}}),null,16,["to","use-updated","style"]))),128))]),_:2},1024)]))),128))])}}}),De=I(me,[["__scopeId","data-v-97feb8b8"]]);export{De as default};
